2025-12-29 13:29:18 
处理投资组合: vp08_hs300_HB 
2025-12-29 13:29:18   日期范围: 2025-11-02 到 2025-11-04
2025-12-29 13:29:19 工作日列表: 2025-11-02 到 2025-11-04，共 2 天
2025-12-29 13:29:23 股票权重约束函数执行失败: 函数或变量 'top_number' 无法识别。
2025-12-29 13:29:23 错误位置: stock_weight_constraint_matlab (第 85 行)
2025-12-29 13:29:23 尝试从df_score中获取高分股票...
2025-12-29 13:29:27 股票权重约束函数执行失败: 函数或变量 'top_number' 无法识别。
2025-12-29 13:29:27 错误位置: stock_weight_constraint_matlab (第 85 行)
2025-12-29 13:29:27 尝试从df_score中获取高分股票...
2025-12-29 13:29:27 
处理投资组合: vp08_hs300_HB 
2025-12-29 13:29:27   日期范围: 2025-11-02 到 2025-11-04
2025-12-29 13:29:27 工作日列表: 2025-11-02 到 2025-11-04，共 2 天
2025-12-29 13:29:29 股票权重约束函数执行失败: 函数或变量 'top_number' 无法识别。
2025-12-29 13:29:29 错误位置: stock_weight_constraint_matlab (第 85 行)
2025-12-29 13:29:29 尝试从df_score中获取高分股票...
2025-12-29 13:29:31 股票权重约束函数执行失败: 函数或变量 'top_number' 无法识别。
2025-12-29 13:29:31 错误位置: stock_weight_constraint_matlab (第 85 行)
2025-12-29 13:29:31 尝试从df_score中获取高分股票...
2025-12-29 13:29:32 从配置文件读取到 2 个投资组合
2025-12-29 13:29:32 开始优化投资组合: vp08_hs300_HB 
2025-12-29 13:29:32   日期范围: 2025-11-02 到 2025-11-04
2025-12-29 13:29:32 工作日列表: 2025-11-02 到 2025-11-04，共 2 天
2025-12-29 13:29:33 正在优化: vp08_hs300_HB - 2025-11-03
2025-12-29 13:29:33 MATLAB函数开始处理路径: E:\test\yfr\vp08_hs300_HB\2025-11-03
2025-12-29 13:29:33 配置文件不存在，使用默认配置
2025-12-29 13:29:33 使用指定的并行工作进程数: 6
2025-12-29 13:29:33 配置并行计算，最大工作进程数: 6
2025-12-29 13:29:33 创建新并行池 6 个工作进程
2025-12-29 13:29:33 创建新并行池 6 个工作进程
2025-12-29 13:31:24 从配置文件读取到 2 个投资组合
2025-12-29 13:31:24 
处理投资组合: vp08_hs300_HB 
2025-12-29 13:31:24   日期范围: 2025-11-02 到 2025-11-04
2025-12-29 13:31:24 工作日列表: 2025-11-02 到 2025-11-04，共 2 天
2025-12-29 13:31:28 目标股票数量: 320
2025-12-29 13:31:28 最终股票数量: 320 (其中指数成分股: 299, top股票: 10, 补充股票: 11)
2025-12-29 13:31:32 目标股票数量: 320
2025-12-29 13:31:32 最终股票数量: 320 (其中指数成分股: 299, top股票: 10, 补充股票: 11)
2025-12-29 13:31:34 
处理投资组合: vp08_hs300_HB 
2025-12-29 13:31:34   日期范围: 2025-11-02 到 2025-11-04
2025-12-29 13:31:34 工作日列表: 2025-11-02 到 2025-11-04，共 2 天
2025-12-29 13:31:37 目标股票数量: 320
2025-12-29 13:31:37 最终股票数量: 320 (其中指数成分股: 299, top股票: 10, 补充股票: 11)
2025-12-29 13:31:41 目标股票数量: 320
2025-12-29 13:31:41 最终股票数量: 320 (其中指数成分股: 299, top股票: 10, 补充股票: 11)
2025-12-29 13:31:43 从配置文件读取到 2 个投资组合
2025-12-29 13:31:43 开始优化投资组合: vp08_hs300_HB 
2025-12-29 13:31:43   日期范围: 2025-11-02 到 2025-11-04
2025-12-29 13:31:43 工作日列表: 2025-11-02 到 2025-11-04，共 2 天
2025-12-29 13:31:43 正在优化: vp08_hs300_HB - 2025-11-03
2025-12-29 13:31:43 MATLAB函数开始处理路径: E:\test\yfr\vp08_hs300_HB\2025-11-03
2025-12-29 13:31:43 配置文件不存在，使用默认配置
2025-12-29 13:31:43 使用指定的并行工作进程数: 6
2025-12-29 13:31:43 配置并行计算，最大工作进程数: 6
2025-12-29 13:31:43 创建新并行池 6 个工作进程
2025-12-29 13:31:43 创建新并行池 6 个工作进程
2025-12-29 13:32:24 从配置文件读取到 2 个投资组合
2025-12-29 13:32:24 
处理投资组合: vp08_hs300_HB 
2025-12-29 13:32:24   日期范围: 2025-11-02 到 2025-11-04
2025-12-29 13:32:25 工作日列表: 2025-11-02 到 2025-11-04，共 2 天
2025-12-29 13:32:27 目标股票数量: 320
2025-12-29 13:32:27 最终股票数量: 320 (其中指数成分股: 299, top股票: 10, 补充股票: 11)
2025-12-29 13:42:50 从配置文件读取到 2 个投资组合
2025-12-29 13:42:50 
处理投资组合: vp08_hs300_HB 
2025-12-29 13:42:50   日期范围: 2025-11-02 到 2025-11-04
2025-12-29 13:42:51 工作日列表: 2025-11-02 到 2025-11-04，共 2 天
2025-12-29 13:42:53 目标股票数量: 320
2025-12-29 13:42:53 最终股票数量: 320 (其中指数成分股: 299, top股票: 10, 补充股票: 11)
2025-12-29 14:19:27 从配置文件读取到 2 个投资组合
2025-12-29 14:19:27 
处理投资组合: vp08_hs300_HB 
2025-12-29 14:19:27   日期范围: 2025-11-02 到 2025-11-04
2025-12-29 14:19:27 工作日列表: 2025-11-02 到 2025-11-04，共 2 天
2025-12-29 14:20:01 从配置文件读取到 2 个投资组合
2025-12-29 14:20:01 
处理投资组合: vp08_hs300_HB 
2025-12-29 14:20:01   日期范围: 2025-11-02 到 2025-11-04
2025-12-29 14:20:02 工作日列表: 2025-11-02 到 2025-11-04，共 2 天
2025-12-29 14:20:02 WARN: 从本地 prediction 文件读取失败: 无法识别的字段名称 "text"。
2025-12-29 14:21:28 从配置文件读取到 2 个投资组合
2025-12-29 14:21:28 
处理投资组合: vp08_hs300_HB 
2025-12-29 14:21:28   日期范围: 2025-11-02 到 2025-11-04
2025-12-29 14:21:28 工作日列表: 2025-11-02 到 2025-11-04，共 2 天
2025-12-29 14:21:29 WARN: 从本地 prediction 文件读取失败: 无法识别的字段名称 "text"。
2025-12-29 14:21:30 WARN: 从本地 prediction 文件读取失败: 无法识别的字段名称 "text"。
2025-12-29 14:21:30 
处理投资组合: vp08_hs300_HB 
2025-12-29 14:21:30   日期范围: 2025-11-02 到 2025-11-04
2025-12-29 14:21:30 工作日列表: 2025-11-02 到 2025-11-04，共 2 天
2025-12-29 14:21:31 WARN: 从本地 prediction 文件读取失败: 无法识别的字段名称 "text"。
2025-12-29 14:21:31 WARN: 从本地 prediction 文件读取失败: 无法识别的字段名称 "text"。
2025-12-29 14:21:32 从配置文件读取到 2 个投资组合
2025-12-29 14:21:32 开始优化投资组合: vp08_hs300_HB 
2025-12-29 14:21:32   日期范围: 2025-11-02 到 2025-11-04
2025-12-29 14:21:33 工作日列表: 2025-11-02 到 2025-11-04，共 2 天
2025-12-29 14:21:33 正在优化: vp08_hs300_HB - 2025-11-03
2025-12-29 14:21:33 MATLAB函数开始处理路径: E:\test\yfr\vp08_hs300_HB\2025-11-03
2025-12-29 14:21:33 配置文件不存在，使用默认配置
2025-12-29 14:21:33 使用指定的并行工作进程数: 6
2025-12-29 14:21:33 配置并行计算，最大工作进程数: 6
2025-12-29 14:21:33 创建新并行池 6 个工作进程
2025-12-29 14:21:33 创建新并行池 6 个工作进程
2025-12-29 14:23:04 从配置文件读取到 2 个投资组合
2025-12-29 14:23:05 
处理投资组合: vp08_hs300_HB 
2025-12-29 14:23:05   日期范围: 2025-11-02 到 2025-11-04
2025-12-29 14:23:05 工作日列表: 2025-11-02 到 2025-11-04，共 2 天
2025-12-29 14:23:05 WARN: 从本地 prediction 文件读取失败: 无法识别的字段名称 "text"。
2025-12-29 14:23:06 WARN: 从本地 prediction 文件读取失败: 无法识别的字段名称 "text"。
2025-12-29 14:23:07 
处理投资组合: vp08_hs300_HB 
2025-12-29 14:23:07   日期范围: 2025-11-02 到 2025-11-04
2025-12-29 14:24:03 从配置文件读取到 2 个投资组合
2025-12-29 14:24:03 
处理投资组合: vp08_hs300_HB 
2025-12-29 14:24:03   日期范围: 2025-11-02 到 2025-11-04
2025-12-29 14:24:03 工作日列表: 2025-11-02 到 2025-11-04，共 2 天
2025-12-29 14:24:06 目标股票数量: 320
2025-12-29 14:24:06 最终股票数量: 320 (其中指数成分股: 299, top股票: 10, 补充股票: 11)
2025-12-29 14:24:11 目标股票数量: 320
2025-12-29 14:24:11 最终股票数量: 320 (其中指数成分股: 299, top股票: 10, 补充股票: 11)
2025-12-29 14:24:13 
处理投资组合: vp08_hs300_HB 
2025-12-29 14:24:13   日期范围: 2025-11-02 到 2025-11-04
2025-12-29 14:24:13 工作日列表: 2025-11-02 到 2025-11-04，共 2 天
2025-12-29 14:24:16 目标股票数量: 320
2025-12-29 14:24:16 最终股票数量: 320 (其中指数成分股: 299, top股票: 10, 补充股票: 11)
2025-12-29 14:24:20 目标股票数量: 320
2025-12-29 14:24:20 最终股票数量: 320 (其中指数成分股: 299, top股票: 10, 补充股票: 11)
2025-12-29 14:24:22 从配置文件读取到 2 个投资组合
2025-12-29 14:24:22 开始优化投资组合: vp08_hs300_HB 
2025-12-29 14:24:22   日期范围: 2025-11-02 到 2025-11-04
2025-12-29 14:24:23 工作日列表: 2025-11-02 到 2025-11-04，共 2 天
2025-12-29 14:24:23 正在优化: vp08_hs300_HB - 2025-11-03
2025-12-29 14:24:23 MATLAB函数开始处理路径: E:\test\yfr\vp08_hs300_HB\2025-11-03
2025-12-29 14:24:23 配置文件不存在，使用默认配置
2025-12-29 14:24:23 使用指定的并行工作进程数: 6
2025-12-29 14:24:23 配置并行计算，最大工作进程数: 6
2025-12-29 14:24:23 创建新并行池 6 个工作进程
2025-12-29 14:24:23 创建新并行池 6 个工作进程
2025-12-29 14:30:55 正在读取配置文件: 
2025-12-29 14:36:44 从配置文件读取到 2 个投资组合
2025-12-29 14:36:44 
处理投资组合: vp08_hs300_HB 
2025-12-29 14:36:44   日期范围: 2025-11-01 到 2025-11-04
2025-12-29 14:36:44 工作日列表: 2025-11-01 到 2025-11-04，共 2 天
2025-12-29 14:37:56 从配置文件读取到 2 个投资组合
2025-12-29 14:37:56 
处理投资组合: vp08_hs300_HB 
2025-12-29 14:37:56   日期范围: 2025-11-01 到 2025-11-04
2025-12-29 14:37:56 工作日列表: 2025-11-01 到 2025-11-04，共 2 天
2025-12-29 14:47:24 从配置文件读取到 2 个投资组合
2025-12-29 14:47:24 
处理投资组合: vp08_hs300_HB 
2025-12-29 14:47:24   日期范围: 2025-11-01 到 2025-11-04
2025-12-29 14:47:24 工作日列表: 2025-11-01 到 2025-11-04，共 2 天
2025-12-29 14:52:50 从配置文件读取到 2 个投资组合
2025-12-29 14:52:50 
处理投资组合: vp08_hs300_HB__1 
2025-12-29 14:52:50   日期范围: 2025-11-01 到 2025-11-04
2025-12-29 14:52:50 工作日列表: 2025-11-01 到 2025-11-04，共 2 天
2025-12-29 14:52:50 
处理投资组合: vp08_hs300_HB__2 
2025-12-29 14:52:50   日期范围: 2025-11-02 到 2025-11-04
2025-12-29 14:52:50 工作日列表: 2025-11-02 到 2025-11-04，共 2 天
2025-12-29 14:56:14 从配置文件读取到 2 个投资组合
2025-12-29 14:56:14 
处理投资组合: vp08_hs300_HB_1 
2025-12-29 14:56:14   日期范围: 2025-11-01 到 2025-11-04
2025-12-29 14:56:14 工作日列表: 2025-11-01 到 2025-11-04，共 2 天
2025-12-29 14:56:48 从配置文件读取到 2 个投资组合
2025-12-29 14:56:48 
处理投资组合: vp08_hs300_HB_1 
2025-12-29 14:56:48   日期范围: 2025-11-01 到 2025-11-04
2025-12-29 14:56:49 工作日列表: 2025-11-01 到 2025-11-04，共 2 天
2025-12-29 14:56:51 股票权重约束函数执行失败: 函数或变量 'top_number' 无法识别。
2025-12-29 14:56:51 错误位置: stock_weight_constraint_matlab (第 81 行)
2025-12-29 14:56:51 尝试从df_score中获取高分股票...
2025-12-29 14:56:54 股票权重约束函数执行失败: 函数或变量 'top_number' 无法识别。
2025-12-29 14:56:54 错误位置: stock_weight_constraint_matlab (第 81 行)
2025-12-29 14:56:54 尝试从df_score中获取高分股票...
2025-12-29 14:56:54 
处理投资组合: vp08_hs300_HB_2 
2025-12-29 14:56:54   日期范围: 2025-11-02 到 2025-11-04
2025-12-29 14:56:54 工作日列表: 2025-11-02 到 2025-11-04，共 2 天
2025-12-29 14:56:56 股票权重约束函数执行失败: 函数或变量 'top_number' 无法识别。
2025-12-29 14:56:56 错误位置: stock_weight_constraint_matlab (第 81 行)
2025-12-29 14:56:56 尝试从df_score中获取高分股票...
2025-12-29 14:57:21 从配置文件读取到 2 个投资组合
2025-12-29 14:57:22 
处理投资组合: vp08_hs300_HB_1 
2025-12-29 14:57:22   日期范围: 2025-11-01 到 2025-11-04
2025-12-29 14:57:22 工作日列表: 2025-11-01 到 2025-11-04，共 2 天
2025-12-29 14:57:25 股票权重约束函数执行失败: 函数或变量 'top_number' 无法识别。
2025-12-29 14:57:25 错误位置: stock_weight_constraint_matlab (第 81 行)
2025-12-29 14:57:25 尝试从df_score中获取高分股票...
2025-12-29 15:07:11 从配置文件读取到 2 个投资组合
2025-12-29 15:07:12 
处理投资组合: vp08_hs300_HB_1 
2025-12-29 15:07:12   日期范围: 2025-11-01 到 2025-11-04
2025-12-29 15:07:12 工作日列表: 2025-11-01 到 2025-11-04，共 2 天
2025-12-29 15:07:15 股票权重约束函数执行失败: 函数或变量 'top_number' 无法识别。
2025-12-29 15:07:15 错误位置: stock_weight_constraint_matlab (第 82 行)
2025-12-29 15:07:15 尝试从df_score中获取高分股票...
2025-12-29 15:09:12 从配置文件读取到 2 个投资组合
2025-12-29 15:09:12 
处理投资组合: vp08_hs300_HB_1 
2025-12-29 15:09:12   日期范围: 2025-11-01 到 2025-11-04
2025-12-29 15:09:12 工作日列表: 2025-11-01 到 2025-11-04，共 2 天
2025-12-29 15:09:15 股票权重约束函数执行失败: 函数或变量 'top_number' 无法识别。
2025-12-29 15:09:15 错误位置: stock_weight_constraint_matlab (第 83 行)
2025-12-29 15:09:15 尝试从df_score中获取高分股票...
2025-12-29 15:09:17 股票权重约束函数执行失败: 函数或变量 'top_number' 无法识别。
2025-12-29 15:09:17 错误位置: stock_weight_constraint_matlab (第 83 行)
2025-12-29 15:09:17 尝试从df_score中获取高分股票...
2025-12-29 15:09:17 
处理投资组合: vp08_hs300_HB_2 
2025-12-29 15:09:17   日期范围: 2025-11-02 到 2025-11-04
2025-12-29 15:09:17 工作日列表: 2025-11-02 到 2025-11-04，共 2 天
2025-12-29 15:09:20 股票权重约束函数执行失败: 函数或变量 'top_number' 无法识别。
2025-12-29 15:09:20 错误位置: stock_weight_constraint_matlab (第 83 行)
2025-12-29 15:09:20 尝试从df_score中获取高分股票...
2025-12-29 15:09:22 股票权重约束函数执行失败: 函数或变量 'top_number' 无法识别。
2025-12-29 15:09:22 错误位置: stock_weight_constraint_matlab (第 83 行)
2025-12-29 15:09:22 尝试从df_score中获取高分股票...
2025-12-29 15:09:22 从配置文件读取到 2 个投资组合
2025-12-29 15:09:22 开始优化投资组合: vp08_hs300_HB_1 
2025-12-29 15:09:22   日期范围: 2025-11-01 到 2025-11-04
2025-12-29 15:09:23 工作日列表: 2025-11-01 到 2025-11-04，共 2 天
2025-12-29 15:09:23 投资组合 vp08_hs300_HB_1 优化完成
2025-12-29 15:09:23 开始优化投资组合: vp08_hs300_HB_2 
2025-12-29 15:09:23   日期范围: 2025-11-02 到 2025-11-04
2025-12-29 15:09:23 工作日列表: 2025-11-02 到 2025-11-04，共 2 天
2025-12-29 15:09:23 投资组合 vp08_hs300_HB_2 优化完成
2025-12-29 15:09:23 所有投资组合批量优化完成
2025-12-29 15:09:23 正在读取配置文件: 
2025-12-29 15:09:23 从配置文件读取到 2 个投资组合
2025-12-29 15:09:23 
处理投资组合: vp08_hs300_HB_1 (yfr)
2025-12-29 15:09:24 工作日列表: 2025-11-01 到 2025-11-04，共 2 天
2025-12-29 15:09:24   日期范围: 2025-11-01 到 2025-11-04，共 2 个工作日
2025-12-29 15:09:24   警告: vp08_hs300_HB_1/2025-11-03 缺少 Stock_code.csv，跳过
2025-12-29 15:09:24   警告: vp08_hs300_HB_1/2025-11-04 缺少 Stock_code.csv，跳过
2025-12-29 15:09:24 
处理投资组合: vp08_hs300_HB_2 (yfr)
2025-12-29 15:09:24 工作日列表: 2025-11-02 到 2025-11-04，共 2 天
2025-12-29 15:09:24   日期范围: 2025-11-02 到 2025-11-04，共 2 个工作日
2025-12-29 15:09:24   警告: vp08_hs300_HB_2/2025-11-03 缺少 Stock_code.csv，跳过
2025-12-29 15:09:24   警告: vp08_hs300_HB_2/2025-11-04 缺少 Stock_code.csv，跳过
{} 
操作在以下过程中被用户终止 ReadYamlRaw>load_yaml (第 73 行)


位置 ReadYamlRaw (第 42 行)
    result = load_yaml(filename, nosuchfileaction, treatasdata);
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
位置 ReadYaml (第 48 行)
    ry = ReadYamlRaw(filename, 0, nosuchfileaction, treatasdata);
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
位置 data_preparation (第 98 行)
            path = ReadYaml(path_config);
                   ^^^^^^^^^^^^^^^^^^^^^
位置 run_optimizer (第 37 行)
	data_preparation();
 ^^^^^^^^^^^^^^^^^^
位置 main_history_web (第 6 行)
run_optimizer();
^^^^^^^^^^^^^^^
 (第 84 行)
2025-12-29 15:10:19 尝试从df_score中获取高分股票...
2025-12-29 15:10:19 
处理投资组合: vp08_hs300_HB_2 
2025-12-29 15:10:19   日期范围: 2025-11-02 到 2025-11-04
2025-12-29 15:10:19 工作日列表: 2025-11-02 到 2025-11-04，共 2 天
2025-12-29 15:10:22 股票权重约束函数执行失败: 函数或变量 'top_number' 无法识别。
2025-12-29 15:10:22 错误位置: stock_weight_constraint_matlab (第 84 行)
2025-12-29 15:10:22 尝试从df_score中获取高分股票...
2025-12-29 15:10:24 股票权重约束函数执行失败: 函数或变量 'top_number' 无法识别。
2025-12-29 15:10:24 错误位置: stock_weight_constraint_matlab (第 84 行)
2025-12-29 15:10:24 尝试从df_score中获取高分股票...
2025-12-29 15:10:25 从配置文件读取到 2 个投资组合
2025-12-29 15:10:25 开始优化投资组合: vp08_hs300_HB_1 
2025-12-29 15:10:25   日期范围: 2025-11-01 到 2025-11-04
2025-12-29 15:10:25 工作日列表: 2025-11-01 到 2025-11-04，共 2 天
2025-12-29 15:10:25 投资组合 vp08_hs300_HB_1 优化完成
2025-12-29 15:10:25 开始优化投资组合: vp08_hs300_HB_2 
2025-12-29 15:10:25   日期范围: 2025-11-02 到 2025-11-04
2025-12-29 15:10:25 工作日列表: 2025-11-02 到 2025-11-04，共 2 天
2025-12-29 15:10:25 投资组合 vp08_hs300_HB_2 优化完成
2025-12-29 15:10:25 所有投资组合批量优化完成
2025-12-29 15:10:26 正在读取配置文件: 
2025-12-29 15:10:26 从配置文件读取到 2 个投资组合
2025-12-29 15:10:26 
处理投资组合: vp08_hs300_HB_1 (yfr)
2025-12-29 15:10:26 工作日列表: 2025-11-01 到 2025-11-04，共 2 天
2025-12-29 15:10:26   日期范围: 2025-11-01 到 2025-11-04，共 2 个工作日
2025-12-29 15:10:26   警告: vp08_hs300_HB_1/2025-11-03 缺少 Stock_code.csv，跳过
2025-12-29 15:10:26   警告: vp08_hs300_HB_1/2025-11-04 缺少 Stock_code.csv，跳过
2025-12-29 15:10:26 
处理投资组合: vp08_hs300_HB_2 (yfr)
2025-12-29 15:10:26 工作日列表: 2025-11-02 到 2025-11-04，共 2 天
2025-12-29 15:10:26   日期范围: 2025-11-02 到 2025-11-04，共 2 个工作日
2025-12-29 15:10:26   警告: vp08_hs300_HB_2/2025-11-03 缺少 Stock_code.csv，跳过
2025-12-29 15:10:26   警告: vp08_hs300_HB_2/2025-11-04 缺少 Stock_code.csv，跳过
2025-12-29 15:11:00 从配置文件读取到 2 个投资组合
2025-12-29 15:11:00 
处理投资组合: vp08_hs300_HB_1 
2025-12-29 15:11:00   日期范围: 2025-11-01 到 2025-11-04
2025-12-29 15:11:00 工作日列表: 2025-11-01 到 2025-11-04，共 2 天
2025-12-29 15:11:03 股票权重约束函数执行失败: 函数或变量 'top_number' 无法识别。
2025-12-29 15:11:03 错误位置: stock_weight_constraint_matlab (第 86 行)
2025-12-29 15:11:03 尝试从df_score中获取高分股票...
2025-12-29 15:11:46 从配置文件读取到 2 个投资组合
2025-12-29 15:11:46 
处理投资组合: vp08_hs300_HB_1 
2025-12-29 15:11:46   日期范围: 2025-11-01 到 2025-11-04
2025-12-29 15:11:47 工作日列表: 2025-11-01 到 2025-11-04，共 2 天
2025-12-29 15:11:49 股票权重约束函数执行失败: 函数或变量 'top_number' 无法识别。
2025-12-29 15:11:49 错误位置: stock_weight_constraint_matlab (第 87 行)
2025-12-29 15:11:49 尝试从df_score中获取高分股票...
2025-12-29 15:11:52 股票权重约束函数执行失败: 函数或变量 'top_number' 无法识别。
2025-12-29 15:11:52 错误位置: stock_weight_constraint_matlab (第 87 行)
2025-12-29 15:11:52 尝试从df_score中获取高分股票...
2025-12-29 15:11:52 
处理投资组合: vp08_hs300_HB_2 
2025-12-29 15:11:52   日期范围: 2025-11-02 到 2025-11-04
2025-12-29 15:11:52 工作日列表: 2025-11-02 到 2025-11-04，共 2 天
2025-12-29 15:11:54 股票权重约束函数执行失败: 函数或变量 'top_number' 无法识别。
2025-12-29 15:11:54 错误位置: stock_weight_constraint_matlab (第 87 行)
2025-12-29 15:11:54 尝试从df_score中获取高分股票...
2025-12-29 15:11:56 股票权重约束函数执行失败: 函数或变量 'top_number' 无法识别。
2025-12-29 15:11:56 错误位置: stock_weight_constraint_matlab (第 87 行)
2025-12-29 15:11:56 尝试从df_score中获取高分股票...
2025-12-29 15:11:57 从配置文件读取到 2 个投资组合
2025-12-29 15:11:57 开始优化投资组合: vp08_hs300_HB_1 
2025-12-29 15:11:57   日期范围: 2025-11-01 到 2025-11-04
2025-12-29 15:11:57 工作日列表: 2025-11-01 到 2025-11-04，共 2 天
2025-12-29 15:11:57 投资组合 vp08_hs300_HB_1 优化完成
2025-12-29 15:11:57 开始优化投资组合: vp08_hs300_HB_2 
2025-12-29 15:11:57   日期范围: 2025-11-02 到 2025-11-04
2025-12-29 15:11:57 工作日列表: 2025-11-02 到 2025-11-04，共 2 天
2025-12-29 15:11:57 投资组合 vp08_hs300_HB_2 优化完成
2025-12-29 15:11:57 所有投资组合批量优化完成
2025-12-29 15:11:58 正在读取配置文件: 
2025-12-29 15:11:58 从配置文件读取到 2 个投资组合
2025-12-29 15:11:58 
处理投资组合: vp08_hs300_HB_1 (yfr)
2025-12-29 15:11:58 工作日列表: 2025-11-01 到 2025-11-04，共 2 天
2025-12-29 15:11:58   日期范围: 2025-11-01 到 2025-11-04，共 2 个工作日
2025-12-29 15:11:58   警告: vp08_hs300_HB_1/2025-11-03 缺少 Stock_code.csv，跳过
2025-12-29 15:11:58   警告: vp08_hs300_HB_1/2025-11-04 缺少 Stock_code.csv，跳过
2025-12-29 15:11:58 
处理投资组合: vp08_hs300_HB_2 (yfr)
2025-12-29 15:11:58 工作日列表: 2025-11-02 到 2025-11-04，共 2 天
2025-12-29 15:11:58   日期范围: 2025-11-02 到 2025-11-04，共 2 个工作日
2025-12-29 15:11:58   警告: vp08_hs300_HB_2/2025-11-03 缺少 Stock_code.csv，跳过
2025-12-29 15:11:58   警告: vp08_hs300_HB_2/2025-11-04 缺少 Stock_code.csv，跳过
2025-12-29 15:12:17 从配置文件读取到 2 个投资组合
2025-12-29 15:12:17 
处理投资组合: vp08_hs300_HB_1 
2025-12-29 15:12:17   日期范围: 2025-11-01 到 2025-11-04
2025-12-29 15:12:18 工作日列表: 2025-11-01 到 2025-11-04，共 2 天
2025-12-29 15:12:20 股票权重约束函数执行失败: 函数或变量 'top_number' 无法识别。
2025-12-29 15:12:20 错误位置: stock_weight_constraint_matlab (第 87 行)
2025-12-29 15:12:20 尝试从df_score中获取高分股票...
2025-12-29 15:12:53 从配置文件读取到 2 个投资组合
2025-12-29 15:12:53 
处理投资组合: vp08_hs300_HB_1 
2025-12-29 15:12:53   日期范围: 2025-11-01 到 2025-11-04
2025-12-29 15:12:54 工作日列表: 2025-11-01 到 2025-11-04，共 2 天
2025-12-29 15:12:57 目标股票数量: 310
2025-12-29 15:12:57 最终股票数量: 310 (其中指数成分股: 299, top股票: 10, 补充股票: 1)
2025-12-29 15:13:02 目标股票数量: 310
2025-12-29 15:13:02 最终股票数量: 310 (其中指数成分股: 299, top股票: 10, 补充股票: 1)
2025-12-29 15:13:03 
处理投资组合: vp08_hs300_HB_2 
2025-12-29 15:13:03   日期范围: 2025-11-02 到 2025-11-04
2025-12-29 15:13:04 工作日列表: 2025-11-02 到 2025-11-04，共 2 天
2025-12-29 15:13:06 目标股票数量: 320
2025-12-29 15:13:06 最终股票数量: 320 (其中指数成分股: 299, top股票: 10, 补充股票: 11)
2025-12-29 15:13:11 目标股票数量: 320
2025-12-29 15:13:11 最终股票数量: 320 (其中指数成分股: 299, top股票: 10, 补充股票: 11)
2025-12-29 15:13:13 从配置文件读取到 2 个投资组合
2025-12-29 15:13:13 开始优化投资组合: vp08_hs300_HB_1 
2025-12-29 15:13:13   日期范围: 2025-11-01 到 2025-11-04
2025-12-29 15:13:14 工作日列表: 2025-11-01 到 2025-11-04，共 2 天
2025-12-29 15:13:14 正在优化: vp08_hs300_HB_1 - 2025-11-03
2025-12-29 15:13:14 MATLAB函数开始处理路径: E:\test\yfr\vp08_hs300_HB_1\2025-11-03
2025-12-29 15:13:14 配置文件不存在，使用默认配置
2025-12-29 15:13:14 使用指定的并行工作进程数: 6
2025-12-29 15:13:14 配置并行计算，最大工作进程数: 6
2025-12-29 15:13:14 创建新并行池 6 个工作进程
2025-12-29 15:13:14 创建新并行池 6 个工作进程
2025-12-29 15:13:36 并行池创建完毕，NumWorkers=6
2025-12-29 15:13:37 无法在 worker 上添加 utils 路径: 运算符的使用无效。
2025-12-29 15:13:37 开始读取数据...
2025-12-29 15:13:37 开始读取数据: E:\test\yfr\vp08_hs300_HB_1\2025-11-03
2025-12-29 15:13:37 风格因子数量: 11
2025-12-29 15:13:37 风格因子表类型: table, 维度: 11x1
2025-12-29 15:13:37 行业因子数量: 30
2025-12-29 15:13:37 行业因子表类型: table, 维度: 30x1
2025-12-29 15:13:37 股票风险暴露包含字段: data, textdata, colheaders
2025-12-29 15:13:37 股票风险暴露数据类型: double, 维度: 310x39
2025-12-29 15:13:38 股票分数包含字段: data, textdata, colheaders
2025-12-29 15:13:38 股票分数数据类型: double, 维度: 310x1
2025-12-29 15:13:38 权重下限包含字段: data, textdata, colheaders
2025-12-29 15:13:38 权重下限数据类型: double, 维度: 310x1
2025-12-29 15:13:38 权重上限包含字段: data, textdata, colheaders
2025-12-29 15:13:38 权重上限数据类型: double, 维度: 310x1
2025-12-29 15:13:38 指数初始权重包含字段: data, textdata, colheaders
2025-12-29 15:13:38 指数初始权重数据类型: double, 维度: 310x1
2025-12-29 15:13:38 股票特异风险包含字段: data, textdata, colheaders
2025-12-29 15:13:38 股票特异风险数据类型: double, 维度: 1x310
2025-12-29 15:13:38 因子协方差包含字段: data, textdata, colheaders
2025-12-29 15:13:38 因子协方差数据类型: double, 维度: 39x39
2025-12-29 15:13:38 因子约束上限数据类型: double, 维度: 1x40
2025-12-29 15:13:38 跟踪误差约束: 2.000000
2025-12-29 15:13:38 处理后的因子约束上限维度: 39x1
2025-12-29 15:13:38 换手率约束包含字段: data, textdata, rowheaders
2025-12-29 15:13:38 最大换手率限制: 1.00
2025-12-29 15:13:38 从配置文件读取权重：分数权重=1.00, 夏普比率权重=0.00
2025-12-29 15:13:38 股票数量: 310
2025-12-29 15:13:38 警告: 因子约束上限向量长度不足，需41，实际为39
2025-12-29 15:13:38 已扩展因子约束上限向量长度至41
2025-12-29 15:13:38 警告: 因子约束下限向量长度不足，需41，实际为39
2025-12-29 15:13:38 已扩展因子约束下限向量长度至41
2025-12-29 15:13:38 风格权重上限维度: 11x1
2025-12-29 15:13:38 风格权重下限维度: 11x1
2025-12-29 15:13:38 行业权重上限维度: 30x1
2025-12-29 15:13:38 行业权重下限维度: 30x1
2025-12-29 15:13:38 警告: 股票风险暴露维度不足，需41列，实际只有39列
2025-12-29 15:13:38 警告: 指数风险暴露维度不足，需41列，实际只有39列
2025-12-29 15:13:38 风格风险暴露维度: 310x11
2025-12-29 15:13:38 行业风险暴露维度: 310x28
2025-12-29 15:13:38 指数风格风险暴露维度: 11x1
2025-12-29 15:13:38 指数行业风险暴露维度: 30x1
2025-12-29 15:13:38 计算协方差矩阵...
2025-12-29 15:13:38 将股票特异风险转换为列向量，维度: 310x1
2025-12-29 15:13:38 协方差矩阵不是正定的，最小特征值: -0.000000，添加正则化项
2025-12-29 15:13:38 协方差矩阵维度: 310x310
2025-12-29 15:13:38 初始权重包含字段: data, textdata, colheaders
2025-12-29 15:13:38 初始权重数据类型: double, 维度: 310x1
2025-12-29 15:13:38 未找到昨天权重文件或代码文件，使用初始权重作为换手率计算基准
2025-12-29 15:13:38 未检测到yes文件，跳过权重约束
2025-12-29 15:13:38 转置后的股票分数维度: 1x310
2025-12-29 15:13:38 目标函数设置：分数权重=1.00, 夏普比率权重=0.00
2025-12-29 15:13:38 调试目标函数计算...
2025-12-29 15:13:38 协方差矩阵V检查:
2025-12-29 15:13:38   V维度: 310x310
2025-12-29 15:13:38   V中的NaN数量: 0
2025-12-29 15:13:38   V中的Inf数量: 0
2025-12-29 15:13:38   V中的负数数量: 17106
2025-12-29 15:13:38   V的最小值: -0.000172
2025-12-29 15:13:38   V的最大值: 0.002369
2025-12-29 15:13:38   V的最小特征值: 0.000001
2025-12-29 15:13:38 分数组件: 0.541566
2025-12-29 15:13:38 风险组件 (x'Vx*252): 0.158636
2025-12-29 15:13:38 风险标准差: 0.398291
2025-12-29 15:13:38 夏普比率组件: 1.359724
2025-12-29 15:13:38 目标函数值: 0.541566
2025-12-29 15:13:38 警告: 初始点权重和(0.996280)偏离1.0，进行归一化调整
2025-12-29 15:13:38 初始解维度: 310x1
2025-12-29 15:13:38 下界维度: 310x1
2025-12-29 15:13:38 上界维度: 310x1
2025-12-29 15:13:38 验证初始点:
2025-12-29 15:13:38 初始点 x0 中的 NaN: 0, Inf: 0
2025-12-29 15:13:38 初始点 x0 范围: [0.000000, 0.041744]
2025-12-29 15:13:38 初始点 x0 和: 1.000000
2025-12-29 15:13:38 初始点约束条件 g0 中的 NaN: 0, Inf: 0
2025-12-29 15:13:38 初始点约束条件 g0 范围: [-115331.001484, 0.003720]
2025-12-29 15:13:38 违反的约束数量: 3 / 84
2025-12-29 15:13:38 违反的约束详情:
2025-12-29 15:13:38   风格因子上限违反: 0 / 11
2025-12-29 15:13:38   风格因子下限违反: 1 / 11
2025-12-29 15:13:38   行业因子上限违反: 1 / 30
2025-12-29 15:13:38   行业因子下限违反: 0 / 30
2025-12-29 15:13:38   跟踪误差约束违反: -1.999574 (限制: 2.000000)
2025-12-29 15:13:38   换手率约束违反: 0.003720 (限制: 1.000000)
2025-12-29 15:13:38 线性等式约束维度: Aeq(1x310), beq(1x1)
2025-12-29 15:13:38 优化选项设置完成: 算法=sqp, 最大函数评估次数=800000, 并行计算=true
2025-12-29 15:13:38 开始求解优化问题...
2025-12-29 15:13:38 开始求解优化问题
2025-12-29 15:13:40 fmincon 返回: exitflag=-2, fval=0.055520
2025-12-29 15:13:40 优化失败但约束违反较小(0.004315)，尝试微调约束容忍度...
2025-12-29 15:13:40 使用微调后的约束容忍度重新优化...
2025-12-29 15:13:40 微调约束容忍度优化成功，使用该结果
2025-12-29 15:13:40 优化完成，输出标志: 2
2025-12-29 15:13:40 优化完成，输出标志: 2
2025-12-29 15:13:40 目标函数值: 0.055266
2025-12-29 15:13:40 优化成功完成：
2025-12-29 15:13:40   目标函数在可行域内呈现非递减趋势
2025-12-29 15:13:40   约束条件在可行域内满足要求
2025-12-29 15:13:40 函数评估次数: 1287
2025-12-29 15:13:40 一阶最优性: 9.368258e-03
2025-12-29 15:13:40 约束违反值: 4.661045e-03
2025-12-29 15:13:40 检测到 11 个负数权重，将其设为0并重新归一化
2025-12-29 15:13:40 实际换手率: 1.0044 (限制: 1.0000)
2025-12-29 15:13:40 换手率基准权重总和: 1.9963
2025-12-29 15:13:41 最终权重总和: 1.0000
2025-12-29 15:13:41 最大权重变化: 1.0000
2025-12-29 15:13:41 投资组合风险: 0.000502
2025-12-29 15:13:41 最终分数: -0.055266
2025-12-29 15:13:41 权重总和: 1.000000
2025-12-29 15:13:41 风格风险维度: 11x1
2025-12-29 15:13:41 行业风险维度: 30x1
2025-12-29 15:13:41 行业风险比率维度: 30x1
2025-12-29 15:13:41 优化完成，总时间: 26.72秒
2025-12-29 15:13:41 优化完成: vp08_hs300_HB_1 - 2025-11-03
2025-12-29 15:13:41 正在优化: vp08_hs300_HB_1 - 2025-11-04
2025-12-29 15:13:41 MATLAB函数开始处理路径: E:\test\yfr\vp08_hs300_HB_1\2025-11-04
2025-12-29 15:13:41 配置文件不存在，使用默认配置
2025-12-29 15:13:41 使用指定的并行工作进程数: 6
2025-12-29 15:13:41 配置并行计算，最大工作进程数: 6
2025-12-29 15:13:41 复用现有并行池，6个工作进程
2025-12-29 15:13:41 开始读取数据...
2025-12-29 15:13:41 开始读取数据: E:\test\yfr\vp08_hs300_HB_1\2025-11-04
2025-12-29 15:13:41 风格因子数量: 11
2025-12-29 15:13:41 风格因子表类型: table, 维度: 11x1
2025-12-29 15:13:41 行业因子数量: 30
2025-12-29 15:13:41 行业因子表类型: table, 维度: 30x1
2025-12-29 15:13:41 股票风险暴露包含字段: data, textdata, colheaders
2025-12-29 15:13:41 股票风险暴露数据类型: double, 维度: 310x39
2025-12-29 15:13:41 股票分数包含字段: data, textdata, colheaders
2025-12-29 15:13:41 股票分数数据类型: double, 维度: 310x1
2025-12-29 15:13:41 权重下限包含字段: data, textdata, colheaders
2025-12-29 15:13:41 权重下限数据类型: double, 维度: 310x1
2025-12-29 15:13:41 权重上限包含字段: data, textdata, colheaders
2025-12-29 15:13:41 权重上限数据类型: double, 维度: 310x1
2025-12-29 15:13:41 指数初始权重包含字段: data, textdata, colheaders
2025-12-29 15:13:41 指数初始权重数据类型: double, 维度: 310x1
2025-12-29 15:13:41 股票特异风险包含字段: data, textdata, colheaders
2025-12-29 15:13:41 股票特异风险数据类型: double, 维度: 1x310
2025-12-29 15:13:41 因子协方差包含字段: data, textdata, colheaders
2025-12-29 15:13:41 因子协方差数据类型: double, 维度: 39x39
2025-12-29 15:13:41 因子约束上限数据类型: double, 维度: 1x40
2025-12-29 15:13:41 跟踪误差约束: 2.000000
2025-12-29 15:13:41 处理后的因子约束上限维度: 39x1
2025-12-29 15:13:41 换手率约束包含字段: data, textdata, rowheaders
2025-12-29 15:13:41 最大换手率限制: 1.00
2025-12-29 15:13:41 从配置文件读取权重：分数权重=1.00, 夏普比率权重=0.00
2025-12-29 15:13:41 股票数量: 310
2025-12-29 15:13:41 警告: 因子约束上限向量长度不足，需41，实际为39
2025-12-29 15:13:41 已扩展因子约束上限向量长度至41
2025-12-29 15:13:41 警告: 因子约束下限向量长度不足，需41，实际为39
2025-12-29 15:13:41 已扩展因子约束下限向量长度至41
2025-12-29 15:13:41 风格权重上限维度: 11x1
2025-12-29 15:13:41 风格权重下限维度: 11x1
2025-12-29 15:13:41 行业权重上限维度: 30x1
2025-12-29 15:13:41 行业权重下限维度: 30x1
2025-12-29 15:13:41 警告: 股票风险暴露维度不足，需41列，实际只有39列
2025-12-29 15:13:41 警告: 指数风险暴露维度不足，需41列，实际只有39列
2025-12-29 15:13:41 风格风险暴露维度: 310x11
2025-12-29 15:13:41 行业风险暴露维度: 310x28
2025-12-29 15:13:41 指数风格风险暴露维度: 11x1
2025-12-29 15:13:41 指数行业风险暴露维度: 30x1
2025-12-29 15:13:41 计算协方差矩阵...
2025-12-29 15:13:41 将股票特异风险转换为列向量，维度: 310x1
2025-12-29 15:13:41 协方差矩阵不是正定的，最小特征值: -0.000000，添加正则化项
2025-12-29 15:13:41 协方差矩阵维度: 310x310
2025-12-29 15:13:41 初始权重包含字段: data, textdata, colheaders
2025-12-29 15:13:41 初始权重数据类型: double, 维度: 310x1
2025-12-29 15:13:41 昨天权重数据维度: 310x1, 代码数量: 310
2025-12-29 15:13:41 今天代码数量: 310
2025-12-29 15:13:41 昨天权重总和: 1.000004
2025-12-29 15:13:41 成功匹配股票代码: 299/310
2025-12-29 15:13:41 换手率基准权重总和: 1.000004
2025-12-29 15:13:41 使用昨天权重作为换手率计算基准（按代码匹配）
2025-12-29 15:13:41 检测到yes文件，应用权重约束...
2025-12-29 15:13:41 代码数量: 310, 权重数量: 310，允许权重约束
2025-12-29 15:13:41 应用yes权重后年化跟踪误差项为：0.918896
2025-12-29 15:13:41 权重约束应用完成，最终权重维度: 310x1
2025-12-29 15:13:41 转置后的股票分数维度: 1x310
2025-12-29 15:13:41 目标函数设置：分数权重=1.00, 夏普比率权重=0.00
2025-12-29 15:13:41 调试目标函数计算...
2025-12-29 15:13:41 协方差矩阵V检查:
2025-12-29 15:13:41   V维度: 310x310
2025-12-29 15:13:41   V中的NaN数量: 0
2025-12-29 15:13:41   V中的Inf数量: 0
2025-12-29 15:13:41   V中的负数数量: 15794
2025-12-29 15:13:41   V的最小值: -0.000162
2025-12-29 15:13:41   V的最大值: 0.003646
2025-12-29 15:13:41   V的最小特征值: 0.000001
2025-12-29 15:13:41 分数组件: 0.555383
2025-12-29 15:13:41 风险组件 (x'Vx*252): 0.943590
2025-12-29 15:13:41 风险标准差: 0.971386
2025-12-29 15:13:41 夏普比率组件: 0.571743
2025-12-29 15:13:41 目标函数值: 0.555383
2025-12-29 15:13:41 警告: 初始点权重和(1.002881)偏离1.0，进行归一化调整
2025-12-29 15:13:41 初始解维度: 310x1
2025-12-29 15:13:41 下界维度: 310x1
2025-12-29 15:13:41 上界维度: 310x1
2025-12-29 15:13:41 验证初始点:
2025-12-29 15:13:41 初始点 x0 中的 NaN: 0, Inf: 0
2025-12-29 15:13:41 初始点 x0 范围: [0.000000, 0.041491]
2025-12-29 15:13:41 初始点 x0 和: 1.000000
2025-12-29 15:13:41 初始点约束条件 g0 中的 NaN: 0, Inf: 0
2025-12-29 15:13:41 初始点约束条件 g0 范围: [-115333.000000, 0.000000]
2025-12-29 15:13:41 违反的约束数量: 0 / 84
2025-12-29 15:13:41 线性等式约束维度: Aeq(1x310), beq(1x1)
2025-12-29 15:13:41 优化选项设置完成: 算法=sqp, 最大函数评估次数=800000, 并行计算=true
2025-12-29 15:13:41 开始求解优化问题...
2025-12-29 15:13:41 开始求解优化问题
2025-12-29 15:13:42 fmincon 返回: exitflag=1, fval=0.016662
2025-12-29 15:13:42 找到更好的可行解，使用该解
2025-12-29 15:13:42 优化完成，输出标志: 1
2025-12-29 15:13:42 优化完成，输出标志: 1
2025-12-29 15:13:42 目标函数值: 0.016662
2025-12-29 15:13:42 优化成功完成：
2025-12-29 15:13:42   找到满足约束条件的局部最小值
2025-12-29 15:13:42 函数评估次数: 1863
2025-12-29 15:13:42 一阶最优性: 1.243745e-11
2025-12-29 15:13:42 约束违反值: 1.332268e-15
2025-12-29 15:13:42 检测到 11 个负数权重，将其设为0并重新归一化
2025-12-29 15:13:42 实际换手率: 0.1895 (限制: 1.0000)
2025-12-29 15:13:42 换手率基准权重总和: 1.0000
2025-12-29 15:13:42 最终权重总和: 1.0000
2025-12-29 15:13:42 最大权重变化: 0.0200 (股票: 600150.SH)
2025-12-29 15:13:42 投资组合风险: 0.010057
2025-12-29 15:13:42 最终分数: -0.016662
2025-12-29 15:13:42 权重总和: 1.000000
2025-12-29 15:13:42 风格风险维度: 11x1
2025-12-29 15:13:42 行业风险维度: 30x1
2025-12-29 15:13:42 行业风险比率维度: 30x1
2025-12-29 15:13:42 优化完成，总时间: 1.07秒
2025-12-29 15:13:42 优化完成: vp08_hs300_HB_1 - 2025-11-04
2025-12-29 15:13:42 投资组合 vp08_hs300_HB_1 优化完成
2025-12-29 15:13:42 开始优化投资组合: vp08_hs300_HB_2 
2025-12-29 15:13:42   日期范围: 2025-11-02 到 2025-11-04
2025-12-29 15:13:42 工作日列表: 2025-11-02 到 2025-11-04，共 2 天
2025-12-29 15:13:42 正在优化: vp08_hs300_HB_2 - 2025-11-03
2025-12-29 15:13:42 MATLAB函数开始处理路径: E:\test\yfr\vp08_hs300_HB_2\2025-11-03
2025-12-29 15:13:42 配置文件不存在，使用默认配置
2025-12-29 15:13:42 使用指定的并行工作进程数: 6
2025-12-29 15:13:42 配置并行计算，最大工作进程数: 6
2025-12-29 15:13:42 复用现有并行池，6个工作进程
2025-12-29 15:13:42 开始读取数据...
2025-12-29 15:13:42 开始读取数据: E:\test\yfr\vp08_hs300_HB_2\2025-11-03
2025-12-29 15:13:42 风格因子数量: 11
2025-12-29 15:13:42 风格因子表类型: table, 维度: 11x1
2025-12-29 15:13:42 行业因子数量: 30
2025-12-29 15:13:42 行业因子表类型: table, 维度: 30x1
2025-12-29 15:13:42 股票风险暴露包含字段: data, textdata, colheaders
2025-12-29 15:13:42 股票风险暴露数据类型: double, 维度: 320x39
2025-12-29 15:13:42 股票分数包含字段: data, textdata, colheaders
2025-12-29 15:13:42 股票分数数据类型: double, 维度: 320x1
2025-12-29 15:13:42 权重下限包含字段: data, textdata, colheaders
2025-12-29 15:13:42 权重下限数据类型: double, 维度: 320x1
2025-12-29 15:13:42 权重上限包含字段: data, textdata, colheaders
2025-12-29 15:13:42 权重上限数据类型: double, 维度: 320x1
2025-12-29 15:13:42 指数初始权重包含字段: data, textdata, colheaders
2025-12-29 15:13:42 指数初始权重数据类型: double, 维度: 320x1
2025-12-29 15:13:42 股票特异风险包含字段: data, textdata, colheaders
2025-12-29 15:13:42 股票特异风险数据类型: double, 维度: 1x320
2025-12-29 15:13:42 因子协方差包含字段: data, textdata, colheaders
2025-12-29 15:13:42 因子协方差数据类型: double, 维度: 39x39
2025-12-29 15:13:42 因子约束上限数据类型: double, 维度: 1x40
2025-12-29 15:13:42 跟踪误差约束: 0.080000
2025-12-29 15:13:42 处理后的因子约束上限维度: 39x1
2025-12-29 15:13:42 换手率约束包含字段: data, textdata, rowheaders
2025-12-29 15:13:42 最大换手率限制: 1.00
2025-12-29 15:13:42 从配置文件读取权重：分数权重=1.00, 夏普比率权重=0.00
2025-12-29 15:13:42 股票数量: 320
2025-12-29 15:13:42 警告: 因子约束上限向量长度不足，需41，实际为39
2025-12-29 15:13:42 已扩展因子约束上限向量长度至41
2025-12-29 15:13:42 警告: 因子约束下限向量长度不足，需41，实际为39
2025-12-29 15:13:42 已扩展因子约束下限向量长度至41
2025-12-29 15:13:42 风格权重上限维度: 11x1
2025-12-29 15:13:42 风格权重下限维度: 11x1
2025-12-29 15:13:42 行业权重上限维度: 30x1
2025-12-29 15:13:42 行业权重下限维度: 30x1
2025-12-29 15:13:42 警告: 股票风险暴露维度不足，需41列，实际只有39列
2025-12-29 15:13:42 警告: 指数风险暴露维度不足，需41列，实际只有39列
2025-12-29 15:13:42 风格风险暴露维度: 320x11
2025-12-29 15:13:42 行业风险暴露维度: 320x28
2025-12-29 15:13:42 指数风格风险暴露维度: 11x1
2025-12-29 15:13:42 指数行业风险暴露维度: 30x1
2025-12-29 15:13:42 计算协方差矩阵...
2025-12-29 15:13:42 将股票特异风险转换为列向量，维度: 320x1
2025-12-29 15:13:42 协方差矩阵不是正定的，最小特征值: -0.000000，添加正则化项
2025-12-29 15:13:42 协方差矩阵维度: 320x320
2025-12-29 15:13:42 初始权重包含字段: data, textdata, colheaders
2025-12-29 15:13:42 初始权重数据类型: double, 维度: 320x1
2025-12-29 15:13:42 未找到昨天权重文件或代码文件，使用初始权重作为换手率计算基准
2025-12-29 15:13:42 未检测到yes文件，跳过权重约束
2025-12-29 15:13:42 转置后的股票分数维度: 1x320
2025-12-29 15:13:42 目标函数设置：分数权重=1.00, 夏普比率权重=0.00
2025-12-29 15:13:42 调试目标函数计算...
2025-12-29 15:13:42 协方差矩阵V检查:
2025-12-29 15:13:42   V维度: 320x320
2025-12-29 15:13:42   V中的NaN数量: 0
2025-12-29 15:13:42   V中的Inf数量: 0
2025-12-29 15:13:42   V中的负数数量: 18022
2025-12-29 15:13:42   V的最小值: -0.000172
2025-12-29 15:13:42   V的最大值: 0.003604
2025-12-29 15:13:42   V的最小特征值: 0.000001
2025-12-29 15:13:42 分数组件: 0.511677
2025-12-29 15:13:42 风险组件 (x'Vx*252): 0.061661
2025-12-29 15:13:42 风险标准差: 0.248317
2025-12-29 15:13:43 夏普比率组件: 2.060583
2025-12-29 15:13:43 目标函数值: 0.511677
2025-12-29 15:13:43 警告: 初始点权重和(0.996280)偏离1.0，进行归一化调整
2025-12-29 15:13:43 初始解维度: 320x1
2025-12-29 15:13:43 下界维度: 320x1
2025-12-29 15:13:43 上界维度: 320x1
2025-12-29 15:13:43 验证初始点:
2025-12-29 15:13:43 初始点 x0 中的 NaN: 0, Inf: 0
2025-12-29 15:13:43 初始点 x0 范围: [0.000000, 0.041744]
2025-12-29 15:13:43 初始点 x0 和: 1.000000
2025-12-29 15:13:43 初始点约束条件 g0 中的 NaN: 0, Inf: 0
2025-12-29 15:13:43 初始点约束条件 g0 范围: [-115331.001484, 1648.899892]
2025-12-29 15:13:43 违反的约束数量: 31 / 84
2025-12-29 15:13:43 违反的约束详情:
2025-12-29 15:13:43   风格因子上限违反: 0 / 11
2025-12-29 15:13:43   风格因子下限违反: 4 / 11
2025-12-29 15:13:43   行业因子上限违反: 1 / 30
2025-12-29 15:13:43   行业因子下限违反: 25 / 30
2025-12-29 15:13:43   跟踪误差约束违反: -0.079574 (限制: 0.080000)
2025-12-29 15:13:43   换手率约束违反: 0.003720 (限制: 1.000000)
2025-12-29 15:13:43 线性等式约束维度: Aeq(1x320), beq(1x1)
2025-12-29 15:13:43 优化选项设置完成: 算法=sqp, 最大函数评估次数=800000, 并行计算=true
2025-12-29 15:13:43 开始求解优化问题...
2025-12-29 15:13:43 开始求解优化问题
2025-12-29 15:13:43 fmincon 返回: exitflag=-2, fval=0.056233
2025-12-29 15:13:43 优化完成，输出标志: -2
2025-12-29 15:13:43 优化完成，输出标志: -2
2025-12-29 15:13:43 目标函数值: 0.056233
2025-12-29 15:13:43 未找到可行解
2025-12-29 15:13:43 函数评估次数: 671
2025-12-29 15:13:43 一阶最优性: 5.975900e-01
2025-12-29 15:13:43 约束违反值: 1.648900e+03
2025-12-29 15:13:43 实际换手率: 1.0037 (限制: 1.0000)
2025-12-29 15:13:43 换手率基准权重总和: 1.9963
2025-12-29 15:13:43 最终权重总和: 1.0000
2025-12-29 15:13:43 最大权重变化: 0.0909
2025-12-29 15:13:43 投资组合风险: 0.000426
2025-12-29 15:13:43 最终分数: -0.056233
2025-12-29 15:13:43 权重总和: 1.000000
2025-12-29 15:13:43 风格风险维度: 11x1
2025-12-29 15:13:43 行业风险维度: 30x1
2025-12-29 15:13:43 行业风险比率维度: 30x1
2025-12-29 15:13:43 优化完成，总时间: 0.82秒
2025-12-29 15:13:43 优化完成: vp08_hs300_HB_2 - 2025-11-03
2025-12-29 15:13:43 正在优化: vp08_hs300_HB_2 - 2025-11-04
2025-12-29 15:13:43 MATLAB函数开始处理路径: E:\test\yfr\vp08_hs300_HB_2\2025-11-04
2025-12-29 15:13:43 配置文件不存在，使用默认配置
2025-12-29 15:13:43 使用指定的并行工作进程数: 6
2025-12-29 15:13:43 配置并行计算，最大工作进程数: 6
2025-12-29 15:13:43 复用现有并行池，6个工作进程
2025-12-29 15:13:43 开始读取数据...
2025-12-29 15:13:43 开始读取数据: E:\test\yfr\vp08_hs300_HB_2\2025-11-04
2025-12-29 15:13:43 风格因子数量: 11
2025-12-29 15:13:43 风格因子表类型: table, 维度: 11x1
2025-12-29 15:13:43 行业因子数量: 30
2025-12-29 15:13:43 行业因子表类型: table, 维度: 30x1
2025-12-29 15:13:43 股票风险暴露包含字段: data, textdata, colheaders
2025-12-29 15:13:43 股票风险暴露数据类型: double, 维度: 320x39
2025-12-29 15:13:43 股票分数包含字段: data, textdata, colheaders
2025-12-29 15:13:43 股票分数数据类型: double, 维度: 320x1
2025-12-29 15:13:43 权重下限包含字段: data, textdata, colheaders
2025-12-29 15:13:43 权重下限数据类型: double, 维度: 320x1
2025-12-29 15:13:43 权重上限包含字段: data, textdata, colheaders
2025-12-29 15:13:43 权重上限数据类型: double, 维度: 320x1
2025-12-29 15:13:43 指数初始权重包含字段: data, textdata, colheaders
2025-12-29 15:13:43 指数初始权重数据类型: double, 维度: 320x1
2025-12-29 15:13:43 股票特异风险包含字段: data, textdata, colheaders
2025-12-29 15:13:43 股票特异风险数据类型: double, 维度: 1x320
2025-12-29 15:13:43 因子协方差包含字段: data, textdata, colheaders
2025-12-29 15:13:43 因子协方差数据类型: double, 维度: 39x39
2025-12-29 15:13:43 因子约束上限数据类型: double, 维度: 1x40
2025-12-29 15:13:43 跟踪误差约束: 0.080000
2025-12-29 15:13:43 处理后的因子约束上限维度: 39x1
2025-12-29 15:13:43 换手率约束包含字段: data, textdata, rowheaders
2025-12-29 15:13:43 最大换手率限制: 1.00
2025-12-29 15:13:43 从配置文件读取权重：分数权重=1.00, 夏普比率权重=0.00
2025-12-29 15:13:43 股票数量: 320
2025-12-29 15:13:43 警告: 因子约束上限向量长度不足，需41，实际为39
2025-12-29 15:13:43 已扩展因子约束上限向量长度至41
2025-12-29 15:13:43 警告: 因子约束下限向量长度不足，需41，实际为39
2025-12-29 15:13:43 已扩展因子约束下限向量长度至41
2025-12-29 15:13:43 风格权重上限维度: 11x1
2025-12-29 15:13:43 风格权重下限维度: 11x1
2025-12-29 15:13:43 行业权重上限维度: 30x1
2025-12-29 15:13:43 行业权重下限维度: 30x1
2025-12-29 15:13:43 警告: 股票风险暴露维度不足，需41列，实际只有39列
2025-12-29 15:13:43 警告: 指数风险暴露维度不足，需41列，实际只有39列
2025-12-29 15:13:43 风格风险暴露维度: 320x11
2025-12-29 15:13:43 行业风险暴露维度: 320x28
2025-12-29 15:13:43 指数风格风险暴露维度: 11x1
2025-12-29 15:13:43 指数行业风险暴露维度: 30x1
2025-12-29 15:13:43 计算协方差矩阵...
2025-12-29 15:13:43 将股票特异风险转换为列向量，维度: 320x1
2025-12-29 15:13:43 协方差矩阵不是正定的，最小特征值: -0.000000，添加正则化项
2025-12-29 15:13:43 协方差矩阵维度: 320x320
2025-12-29 15:13:43 初始权重包含字段: data, textdata, colheaders
2025-12-29 15:13:43 初始权重数据类型: double, 维度: 320x1
2025-12-29 15:13:43 昨天权重数据维度: 320x1, 代码数量: 320
2025-12-29 15:13:43 今天代码数量: 320
2025-12-29 15:13:43 昨天权重总和: 1.000001
2025-12-29 15:13:43 成功匹配股票代码: 299/320
2025-12-29 15:13:43 换手率基准权重总和: 1.000001
2025-12-29 15:13:43 使用昨天权重作为换手率计算基准（按代码匹配）
2025-12-29 15:13:43 检测到yes文件，应用权重约束...
2025-12-29 15:13:43 代码数量: 320, 权重数量: 320，允许权重约束
2025-12-29 15:13:43 应用yes权重后年化跟踪误差项为：0.019179
2025-12-29 15:13:43 权重约束应用完成，最终权重维度: 320x1
2025-12-29 15:13:43 转置后的股票分数维度: 1x320
2025-12-29 15:13:43 目标函数设置：分数权重=1.00, 夏普比率权重=0.00
2025-12-29 15:13:43 调试目标函数计算...
2025-12-29 15:13:43 协方差矩阵V检查:
2025-12-29 15:13:43   V维度: 320x320
2025-12-29 15:13:43   V中的NaN数量: 0
2025-12-29 15:13:43   V中的Inf数量: 0
2025-12-29 15:13:43   V中的负数数量: 17098
2025-12-29 15:13:43   V的最小值: -0.000162
2025-12-29 15:13:43   V的最大值: 0.003646
2025-12-29 15:13:43   V的最小特征值: 0.000001
2025-12-29 15:13:43 分数组件: 0.377640
2025-12-29 15:13:43 风险组件 (x'Vx*252): 0.040001
2025-12-29 15:13:43 风险标准差: 0.200002
2025-12-29 15:13:43 夏普比率组件: 1.888181
2025-12-29 15:13:43 目标函数值: 0.377640
2025-12-29 15:13:43 警告: 初始点权重和(1.002914)偏离1.0，进行归一化调整
2025-12-29 15:13:43 初始解维度: 320x1
2025-12-29 15:13:43 下界维度: 320x1
2025-12-29 15:13:43 上界维度: 320x1
2025-12-29 15:13:43 验证初始点:
2025-12-29 15:13:43 初始点 x0 中的 NaN: 0, Inf: 0
2025-12-29 15:13:43 初始点 x0 范围: [0.000000, 0.041606]
2025-12-29 15:13:43 初始点 x0 和: 1.000000
2025-12-29 15:13:43 初始点约束条件 g0 中的 NaN: 0, Inf: 0
2025-12-29 15:13:43 初始点约束条件 g0 范围: [-115333.001913, 1242.108949]
2025-12-29 15:13:43 违反的约束数量: 29 / 84
2025-12-29 15:13:43 违反的约束详情:
2025-12-29 15:13:43   风格因子上限违反: 0 / 11
2025-12-29 15:13:43   风格因子下限违反: 3 / 11
2025-12-29 15:13:43   行业因子上限违反: 0 / 30
2025-12-29 15:13:43   行业因子下限违反: 26 / 30
2025-12-29 15:13:43   跟踪误差约束违反: -0.078935 (限制: 0.080000)
2025-12-29 15:13:43   换手率约束违反: -0.994280 (限制: 1.000000)
2025-12-29 15:13:43 线性等式约束维度: Aeq(1x320), beq(1x1)
2025-12-29 15:13:43 优化选项设置完成: 算法=sqp, 最大函数评估次数=800000, 并行计算=true
2025-12-29 15:13:43 开始求解优化问题...
2025-12-29 15:13:43 开始求解优化问题
2025-12-29 15:13:44 fmincon 返回: exitflag=-2, fval=0.042659
2025-12-29 15:13:44 优化完成，输出标志: -2
2025-12-29 15:13:44 优化完成，输出标志: -2
2025-12-29 15:13:44 目标函数值: 0.042659
2025-12-29 15:13:44 未找到可行解
2025-12-29 15:13:44 函数评估次数: 671
2025-12-29 15:13:44 一阶最优性: 5.975900e-01
2025-12-29 15:13:44 约束违反值: 1.242109e+03
2025-12-29 15:13:44 实际换手率: 0.0058 (限制: 1.0000)
2025-12-29 15:13:44 换手率基准权重总和: 1.0000
2025-12-29 15:13:44 最终权重总和: 1.0001
2025-12-29 15:13:44 最大权重变化: 0.0005 (股票: 300274.SZ)
2025-12-29 15:13:44 投资组合风险: 0.001071
2025-12-29 15:13:44 最终分数: -0.042659
2025-12-29 15:13:44 权重总和: 1.000063
2025-12-29 15:13:44 风格风险维度: 11x1
2025-12-29 15:13:44 行业风险维度: 30x1
2025-12-29 15:13:44 行业风险比率维度: 30x1
2025-12-29 15:13:44 优化完成，总时间: 0.86秒
2025-12-29 15:13:44 优化完成: vp08_hs300_HB_2 - 2025-11-04
2025-12-29 15:13:44 投资组合 vp08_hs300_HB_2 优化完成
2025-12-29 15:13:44 所有投资组合批量优化完成
2025-12-29 15:13:44 正在读取配置文件: 
2025-12-29 15:13:45 从配置文件读取到 2 个投资组合
2025-12-29 15:13:45 
处理投资组合: vp08_hs300_HB_1 (yfr)
2025-12-29 15:13:45 工作日列表: 2025-11-01 到 2025-11-04，共 2 天
2025-12-29 15:13:45   日期范围: 2025-11-01 到 2025-11-04，共 2 个工作日
2025-12-29 15:13:45 
处理投资组合: vp08_hs300_HB_2 (yfr)
2025-12-29 15:13:45 工作日列表: 2025-11-02 到 2025-11-04，共 2 天
2025-12-29 15:13:45   日期范围: 2025-11-02 到 2025-11-04，共 2 个工作日
2025-12-29 15:15:48 MATLAB:UndefinedFunction
2025-12-29 15:15:57 MATLAB:UndefinedFunction
2025-12-29 15:17:28 Python return status: 2
2025-12-29 15:17:28 Python output:
usage: import_weight_to_mysql_custom.py [-h] table
import_weight_to_mysql_custom.py: error: unrecognized arguments: 
2025-12-29 15:17:28 Running python script failed (status=2).
2025-12-29 15:17:47 Python return status: 2
2025-12-29 15:17:47 Python output:
usage: import_weight_to_mysql_custom.py [-h] table
import_weight_to_mysql_custom.py: error: unrecognized arguments: 
2025-12-29 15:17:47 Running python script failed (status=2).
2025-12-29 15:26:22 Python return status: 0
2025-12-29 15:26:22 Python output:
2025-12-29 15:26:21 INFO     root: 上传 8320 行数据到表 yfr (database: portfolio_backtest)
2025-12-29 15:26:22 INFO     importer: 导入 8320 行到 portfolio_backtest.yfr
2025-12-29 15:52:43 从配置文件读取到 2 个投资组合
2025-12-29 15:52:44 
处理投资组合: vp08_hs300_HB_1 
2025-12-29 15:52:44   日期范围: 2025-11-01 到 2025-11-04
2025-12-29 15:52:44 工作日列表: 2025-11-01 到 2025-11-04，共 2 天
2025-12-29 15:52:48 目标股票数量: 310
2025-12-29 15:52:48 最终股票数量: 310 (其中指数成分股: 299, top股票: 10, 补充股票: 1)
2025-12-29 15:52:53 目标股票数量: 310
2025-12-29 15:52:53 最终股票数量: 310 (其中指数成分股: 299, top股票: 10, 补充股票: 1)
2025-12-29 15:52:54 
处理投资组合: vp08_hs300_HB_2 
2025-12-29 15:52:54   日期范围: 2025-11-02 到 2025-11-04
2025-12-29 15:52:55 工作日列表: 2025-11-02 到 2025-11-04，共 2 天
2025-12-29 15:52:57 目标股票数量: 320
2025-12-29 15:52:57 最终股票数量: 320 (其中指数成分股: 299, top股票: 10, 补充股票: 11)
2025-12-29 15:53:02 目标股票数量: 320
2025-12-29 15:53:02 最终股票数量: 320 (其中指数成分股: 299, top股票: 10, 补充股票: 11)
2025-12-29 15:53:04 从配置文件读取到 2 个投资组合
2025-12-29 15:53:04 开始优化投资组合: vp08_hs300_HB_1 
2025-12-29 15:53:04   日期范围: 2025-11-01 到 2025-11-04
2025-12-29 15:53:04 工作日列表: 2025-11-01 到 2025-11-04，共 2 天
2025-12-29 15:53:04 正在优化: vp08_hs300_HB_1 - 2025-11-03
2025-12-29 15:53:04 MATLAB函数开始处理路径: E:\test\yfr\vp08_hs300_HB_1\2025-11-03
2025-12-29 15:53:05 配置文件不存在，使用默认配置
2025-12-29 15:53:05 使用指定的并行工作进程数: 6
2025-12-29 15:53:05 配置并行计算，最大工作进程数: 6
2025-12-29 15:53:05 创建新并行池 6 个工作进程
2025-12-29 15:53:05 创建新并行池 6 个工作进程
2025-12-29 15:53:28 并行池创建完毕，NumWorkers=6
2025-12-29 15:53:28 无法在 worker 上添加 utils 路径: 运算符的使用无效。
2025-12-29 15:53:28 开始读取数据...
2025-12-29 15:53:28 开始读取数据: E:\test\yfr\vp08_hs300_HB_1\2025-11-03
2025-12-29 15:53:29 风格因子数量: 11
2025-12-29 15:53:31 风格因子表类型: table, 维度: 11x1
2025-12-29 15:53:31 行业因子数量: 30
2025-12-29 15:53:31 行业因子表类型: table, 维度: 30x1
2025-12-29 15:53:31 股票风险暴露包含字段: data, textdata, colheaders
2025-12-29 15:53:31 股票风险暴露数据类型: double, 维度: 310x39
2025-12-29 15:53:31 股票分数包含字段: data, textdata, colheaders
2025-12-29 15:53:31 股票分数数据类型: double, 维度: 310x1
2025-12-29 15:53:31 权重下限包含字段: data, textdata, colheaders
2025-12-29 15:53:31 权重下限数据类型: double, 维度: 310x1
2025-12-29 15:53:31 权重上限包含字段: data, textdata, colheaders
2025-12-29 15:53:31 权重上限数据类型: double, 维度: 310x1
2025-12-29 15:53:31 指数初始权重包含字段: data, textdata, colheaders
2025-12-29 15:53:31 指数初始权重数据类型: double, 维度: 310x1
2025-12-29 15:53:31 股票特异风险包含字段: data, textdata, colheaders
2025-12-29 15:53:31 股票特异风险数据类型: double, 维度: 1x310
2025-12-29 15:53:31 因子协方差包含字段: data, textdata, colheaders
2025-12-29 15:53:31 因子协方差数据类型: double, 维度: 39x39
2025-12-29 15:53:31 因子约束上限数据类型: double, 维度: 1x40
2025-12-29 15:53:31 跟踪误差约束: 2.000000
2025-12-29 15:53:31 处理后的因子约束上限维度: 39x1
2025-12-29 15:53:31 换手率约束包含字段: data, textdata, rowheaders
2025-12-29 15:53:31 最大换手率限制: 1.00
2025-12-29 15:53:31 从配置文件读取权重：分数权重=1.00, 夏普比率权重=0.00
2025-12-29 15:53:31 股票数量: 310
2025-12-29 15:53:31 警告: 因子约束上限向量长度不足，需41，实际为39
2025-12-29 15:53:31 已扩展因子约束上限向量长度至41
2025-12-29 15:53:31 警告: 因子约束下限向量长度不足，需41，实际为39
2025-12-29 15:53:31 已扩展因子约束下限向量长度至41
2025-12-29 15:53:31 风格权重上限维度: 11x1
2025-12-29 15:53:31 风格权重下限维度: 11x1
2025-12-29 15:53:31 行业权重上限维度: 30x1
2025-12-29 15:53:31 行业权重下限维度: 30x1
2025-12-29 15:53:31 警告: 股票风险暴露维度不足，需41列，实际只有39列
2025-12-29 15:53:31 警告: 指数风险暴露维度不足，需41列，实际只有39列
2025-12-29 15:53:31 风格风险暴露维度: 310x11
2025-12-29 15:53:31 行业风险暴露维度: 310x28
2025-12-29 15:53:31 指数风格风险暴露维度: 11x1
2025-12-29 15:53:31 指数行业风险暴露维度: 30x1
2025-12-29 15:53:31 计算协方差矩阵...
2025-12-29 15:53:31 将股票特异风险转换为列向量，维度: 310x1
2025-12-29 15:53:31 协方差矩阵不是正定的，最小特征值: -0.000000，添加正则化项
2025-12-29 15:53:31 协方差矩阵维度: 310x310
2025-12-29 15:53:31 初始权重包含字段: data, textdata, colheaders
2025-12-29 15:53:31 初始权重数据类型: double, 维度: 310x1
2025-12-29 15:53:31 昨天权重数据维度: 310x1, 代码数量: 310
2025-12-29 15:53:31 今天代码数量: 310
2025-12-29 15:53:31 昨天权重总和: 1.000004
2025-12-29 15:53:31 成功匹配股票代码: 299/310
2025-12-29 15:53:31 换手率基准权重总和: 1.000004
2025-12-29 15:53:31 使用昨天权重作为换手率计算基准（按代码匹配）
2025-12-29 15:53:31 检测到yes文件，应用权重约束...
2025-12-29 15:53:31 代码数量: 310, 权重数量: 310，允许权重约束
2025-12-29 15:53:31 应用yes权重后年化跟踪误差项为：0.000000
2025-12-29 15:53:31 权重约束应用完成，最终权重维度: 310x1
2025-12-29 15:53:31 转置后的股票分数维度: 1x310
2025-12-29 15:53:31 目标函数设置：分数权重=1.00, 夏普比率权重=0.00
2025-12-29 15:53:31 调试目标函数计算...
2025-12-29 15:53:31 协方差矩阵V检查:
2025-12-29 15:53:31   V维度: 310x310
2025-12-29 15:53:31   V中的NaN数量: 0
2025-12-29 15:53:31   V中的Inf数量: 0
2025-12-29 15:53:31   V中的负数数量: 17106
2025-12-29 15:53:31   V的最小值: -0.000172
2025-12-29 15:53:31   V的最大值: 0.002369
2025-12-29 15:53:31   V的最小特征值: 0.000001
2025-12-29 15:53:31 分数组件: -0.055231
2025-12-29 15:53:31 风险组件 (x'Vx*252): 0.013110
2025-12-29 15:53:31 风险标准差: 0.114497
2025-12-29 15:53:31 夏普比率组件: -0.482379
2025-12-29 15:53:31 目标函数值: -0.055231
2025-12-29 15:53:31 警告: 初始点权重和(1.000004)偏离1.0，进行归一化调整
2025-12-29 15:53:31 初始解维度: 310x1
2025-12-29 15:53:31 下界维度: 310x1
2025-12-29 15:53:31 上界维度: 310x1
2025-12-29 15:53:31 验证初始点:
2025-12-29 15:53:31 初始点 x0 中的 NaN: 0, Inf: 0
2025-12-29 15:53:31 初始点 x0 范围: [0.000000, 0.041629]
2025-12-29 15:53:31 初始点 x0 和: 1.000000
2025-12-29 15:53:31 初始点约束条件 g0 中的 NaN: 0, Inf: 0
2025-12-29 15:53:31 初始点约束条件 g0 范围: [-115331.000623, 0.000397]
2025-12-29 15:53:31 违反的约束数量: 1 / 84
2025-12-29 15:53:31 违反的约束详情:
2025-12-29 15:53:31   风格因子上限违反: 0 / 11
2025-12-29 15:53:31   风格因子下限违反: 1 / 11
2025-12-29 15:53:31   行业因子上限违反: 0 / 30
2025-12-29 15:53:31   行业因子下限违反: 0 / 30
2025-12-29 15:53:31   跟踪误差约束违反: -1.999563 (限制: 2.000000)
2025-12-29 15:53:31   换手率约束违反: -0.999996 (限制: 1.000000)
2025-12-29 15:53:31 线性等式约束维度: Aeq(1x310), beq(1x1)
2025-12-29 15:53:32 优化选项设置完成: 算法=sqp, 最大函数评估次数=800000, 并行计算=true
2025-12-29 15:53:32 开始求解优化问题...
2025-12-29 15:53:32 开始求解优化问题
2025-12-29 15:53:32 fmincon 返回: exitflag=1, fval=0.017608
2025-12-29 15:53:32 找到更好的可行解，使用该解
2025-12-29 15:53:32 优化完成，输出标志: 1
2025-12-29 15:53:32 优化完成，输出标志: 1
2025-12-29 15:53:32 目标函数值: 0.017608
2025-12-29 15:53:32 优化成功完成：
2025-12-29 15:53:32   找到满足约束条件的局部最小值
2025-12-29 15:53:32 函数评估次数: 1864
2025-12-29 15:53:32 一阶最优性: 1.554312e-15
2025-12-29 15:53:32 约束违反值: 2.088607e-15
2025-12-29 15:53:32 检测到 11 个负数权重，将其设为0并重新归一化
2025-12-29 15:53:32 实际换手率: 0.2179 (限制: 1.0000)
2025-12-29 15:53:32 换手率基准权重总和: 1.0000
2025-12-29 15:53:32 最终权重总和: 1.0000
2025-12-29 15:53:32 最大权重变化: 0.0153 (股票: 002230.SZ)
2025-12-29 15:53:32 投资组合风险: 0.008978
2025-12-29 15:53:32 最终分数: -0.017608
2025-12-29 15:53:32 权重总和: 1.000000
2025-12-29 15:53:32 风格风险维度: 11x1
2025-12-29 15:53:32 行业风险维度: 30x1
2025-12-29 15:53:32 行业风险比率维度: 30x1
2025-12-29 15:53:32 优化完成，总时间: 27.93秒
2025-12-29 15:53:32 优化完成: vp08_hs300_HB_1 - 2025-11-03
2025-12-29 15:53:32 正在优化: vp08_hs300_HB_1 - 2025-11-04
2025-12-29 15:53:32 MATLAB函数开始处理路径: E:\test\yfr\vp08_hs300_HB_1\2025-11-04
2025-12-29 15:53:32 配置文件不存在，使用默认配置
2025-12-29 15:53:32 使用指定的并行工作进程数: 6
2025-12-29 15:53:32 配置并行计算，最大工作进程数: 6
2025-12-29 15:53:32 复用现有并行池，6个工作进程
2025-12-29 15:53:32 开始读取数据...
2025-12-29 15:53:32 开始读取数据: E:\test\yfr\vp08_hs300_HB_1\2025-11-04
2025-12-29 15:53:33 风格因子数量: 11
2025-12-29 15:53:33 风格因子表类型: table, 维度: 11x1
2025-12-29 15:53:33 行业因子数量: 30
2025-12-29 15:53:33 行业因子表类型: table, 维度: 30x1
2025-12-29 15:53:33 股票风险暴露包含字段: data, textdata, colheaders
2025-12-29 15:53:33 股票风险暴露数据类型: double, 维度: 310x39
2025-12-29 15:53:33 股票分数包含字段: data, textdata, colheaders
2025-12-29 15:53:33 股票分数数据类型: double, 维度: 310x1
2025-12-29 15:53:33 权重下限包含字段: data, textdata, colheaders
2025-12-29 15:53:33 权重下限数据类型: double, 维度: 310x1
2025-12-29 15:53:33 权重上限包含字段: data, textdata, colheaders
2025-12-29 15:53:33 权重上限数据类型: double, 维度: 310x1
2025-12-29 15:53:33 指数初始权重包含字段: data, textdata, colheaders
2025-12-29 15:53:33 指数初始权重数据类型: double, 维度: 310x1
2025-12-29 15:53:33 股票特异风险包含字段: data, textdata, colheaders
2025-12-29 15:53:33 股票特异风险数据类型: double, 维度: 1x310
2025-12-29 15:53:33 因子协方差包含字段: data, textdata, colheaders
2025-12-29 15:53:33 因子协方差数据类型: double, 维度: 39x39
2025-12-29 15:53:33 因子约束上限数据类型: double, 维度: 1x40
2025-12-29 15:53:33 跟踪误差约束: 2.000000
2025-12-29 15:53:33 处理后的因子约束上限维度: 39x1
2025-12-29 15:53:33 换手率约束包含字段: data, textdata, rowheaders
2025-12-29 15:53:33 最大换手率限制: 1.00
2025-12-29 15:53:33 从配置文件读取权重：分数权重=1.00, 夏普比率权重=0.00
2025-12-29 15:53:33 股票数量: 310
2025-12-29 15:53:33 警告: 因子约束上限向量长度不足，需41，实际为39
2025-12-29 15:53:33 已扩展因子约束上限向量长度至41
2025-12-29 15:53:33 警告: 因子约束下限向量长度不足，需41，实际为39
2025-12-29 15:53:33 已扩展因子约束下限向量长度至41
2025-12-29 15:53:33 风格权重上限维度: 11x1
2025-12-29 15:53:33 风格权重下限维度: 11x1
2025-12-29 15:53:33 行业权重上限维度: 30x1
2025-12-29 15:53:33 行业权重下限维度: 30x1
2025-12-29 15:53:33 警告: 股票风险暴露维度不足，需41列，实际只有39列
2025-12-29 15:53:33 警告: 指数风险暴露维度不足，需41列，实际只有39列
2025-12-29 15:53:33 风格风险暴露维度: 310x11
2025-12-29 15:53:33 行业风险暴露维度: 310x28
2025-12-29 15:53:33 指数风格风险暴露维度: 11x1
2025-12-29 15:53:33 指数行业风险暴露维度: 30x1
2025-12-29 15:53:33 计算协方差矩阵...
2025-12-29 15:53:33 将股票特异风险转换为列向量，维度: 310x1
2025-12-29 15:53:33 协方差矩阵不是正定的，最小特征值: -0.000000，添加正则化项
2025-12-29 15:53:33 协方差矩阵维度: 310x310
2025-12-29 15:53:33 初始权重包含字段: data, textdata, colheaders
2025-12-29 15:53:33 初始权重数据类型: double, 维度: 310x1
2025-12-29 15:53:33 昨天权重数据维度: 310x1, 代码数量: 310
2025-12-29 15:53:33 今天代码数量: 310
2025-12-29 15:53:33 昨天权重总和: 1.000000
2025-12-29 15:53:33 成功匹配股票代码: 299/310
2025-12-29 15:53:33 换手率基准权重总和: 1.000000
2025-12-29 15:53:33 使用昨天权重作为换手率计算基准（按代码匹配）
2025-12-29 15:53:33 检测到yes文件，应用权重约束...
2025-12-29 15:53:35 代码数量: 310, 权重数量: 310，允许权重约束
2025-12-29 15:53:35 应用yes权重后年化跟踪误差项为：0.918855
2025-12-29 15:53:35 权重约束应用完成，最终权重维度: 310x1
2025-12-29 15:53:35 转置后的股票分数维度: 1x310
2025-12-29 15:53:35 目标函数设置：分数权重=1.00, 夏普比率权重=0.00
2025-12-29 15:53:35 调试目标函数计算...
2025-12-29 15:53:35 协方差矩阵V检查:
2025-12-29 15:53:35   V维度: 310x310
2025-12-29 15:53:35   V中的NaN数量: 0
2025-12-29 15:53:35   V中的Inf数量: 0
2025-12-29 15:53:35   V中的负数数量: 15794
2025-12-29 15:53:35   V的最小值: -0.000162
2025-12-29 15:53:35   V的最大值: 0.003646
2025-12-29 15:53:35   V的最小特征值: 0.000001
2025-12-29 15:53:35 分数组件: 0.556506
2025-12-29 15:53:35 风险组件 (x'Vx*252): 0.943154
2025-12-29 15:53:35 风险标准差: 0.971161
2025-12-29 15:53:35 夏普比率组件: 0.573031
2025-12-29 15:53:35 目标函数值: 0.556506
2025-12-29 15:53:35 警告: 初始点权重和(0.995727)偏离1.0，进行归一化调整
2025-12-29 15:53:35 初始解维度: 310x1
2025-12-29 15:53:35 下界维度: 310x1
2025-12-29 15:53:35 上界维度: 310x1
2025-12-29 15:53:35 验证初始点:
2025-12-29 15:53:35 初始点 x0 中的 NaN: 0, Inf: 0
2025-12-29 15:53:35 初始点 x0 范围: [0.000000, 0.041444]
2025-12-29 15:53:35 初始点 x0 和: 1.000000
2025-12-29 15:53:35 初始点约束条件 g0 中的 NaN: 0, Inf: 0
2025-12-29 15:53:35 初始点约束条件 g0 范围: [-115333.039117, 0.000918]
2025-12-29 15:53:35 违反的约束数量: 1 / 84
2025-12-29 15:53:35 违反的约束详情:
2025-12-29 15:53:35   风格因子上限违反: 1 / 11
2025-12-29 15:53:35   风格因子下限违反: 0 / 11
2025-12-29 15:53:35   行业因子上限违反: 0 / 30
2025-12-29 15:53:35   行业因子下限违反: 0 / 30
2025-12-29 15:53:35   跟踪误差约束违反: -1.993602 (限制: 2.000000)
2025-12-29 15:53:35   换手率约束违反: -0.915422 (限制: 1.000000)
2025-12-29 15:53:35 线性等式约束维度: Aeq(1x310), beq(1x1)
2025-12-29 15:53:35 优化选项设置完成: 算法=sqp, 最大函数评估次数=800000, 并行计算=true
2025-12-29 15:53:35 开始求解优化问题...
2025-12-29 15:53:35 开始求解优化问题
2025-12-29 15:53:35 fmincon 返回: exitflag=1, fval=0.016662
2025-12-29 15:53:35 找到更好的可行解，使用该解
2025-12-29 15:53:35 优化完成，输出标志: 1
2025-12-29 15:53:35 优化完成，输出标志: 1
2025-12-29 15:53:35 目标函数值: 0.016662
2025-12-29 15:53:35 优化成功完成：
2025-12-29 15:53:35   找到满足约束条件的局部最小值
2025-12-29 15:53:35 函数评估次数: 1864
2025-12-29 15:53:35 一阶最优性: 8.881784e-16
2025-12-29 15:53:35 约束违反值: 2.220386e-16
2025-12-29 15:53:35 检测到 11 个负数权重，将其设为0并重新归一化
2025-12-29 15:53:35 实际换手率: 0.2531 (限制: 1.0000)
2025-12-29 15:53:35 换手率基准权重总和: 1.0000
2025-12-29 15:53:35 最终权重总和: 1.0000
2025-12-29 15:53:35 最大权重变化: 0.0213 (股票: 600150.SH)
2025-12-29 15:53:35 投资组合风险: 0.010057
2025-12-29 15:53:35 最终分数: -0.016662
2025-12-29 15:53:35 权重总和: 1.000000
2025-12-29 15:53:35 风格风险维度: 11x1
2025-12-29 15:53:35 行业风险维度: 30x1
2025-12-29 15:53:35 行业风险比率维度: 30x1
2025-12-29 15:53:35 优化完成，总时间: 2.63秒
2025-12-29 15:53:35 优化完成: vp08_hs300_HB_1 - 2025-11-04
2025-12-29 15:53:35 投资组合 vp08_hs300_HB_1 优化完成
2025-12-29 15:53:35 开始优化投资组合: vp08_hs300_HB_2 
2025-12-29 15:53:35   日期范围: 2025-11-02 到 2025-11-04
2025-12-29 15:53:35 工作日列表: 2025-11-02 到 2025-11-04，共 2 天
2025-12-29 15:53:37 正在优化: vp08_hs300_HB_2 - 2025-11-03
2025-12-29 15:53:37 MATLAB函数开始处理路径: E:\test\yfr\vp08_hs300_HB_2\2025-11-03
2025-12-29 15:53:37 配置文件不存在，使用默认配置
2025-12-29 15:53:37 使用指定的并行工作进程数: 6
2025-12-29 15:53:37 配置并行计算，最大工作进程数: 6
2025-12-29 15:53:37 复用现有并行池，6个工作进程
2025-12-29 15:53:37 开始读取数据...
2025-12-29 15:53:37 开始读取数据: E:\test\yfr\vp08_hs300_HB_2\2025-11-03
2025-12-29 15:53:37 风格因子数量: 11
2025-12-29 15:53:37 风格因子表类型: table, 维度: 11x1
2025-12-29 15:53:38 行业因子数量: 30
2025-12-29 15:53:38 行业因子表类型: table, 维度: 30x1
2025-12-29 15:53:38 股票风险暴露包含字段: data, textdata, colheaders
2025-12-29 15:53:38 股票风险暴露数据类型: double, 维度: 320x39
2025-12-29 15:53:38 股票分数包含字段: data, textdata, colheaders
2025-12-29 15:53:38 股票分数数据类型: double, 维度: 320x1
2025-12-29 15:53:38 权重下限包含字段: data, textdata, colheaders
2025-12-29 15:53:38 权重下限数据类型: double, 维度: 320x1
2025-12-29 15:53:38 权重上限包含字段: data, textdata, colheaders
2025-12-29 15:53:38 权重上限数据类型: double, 维度: 320x1
2025-12-29 15:53:38 指数初始权重包含字段: data, textdata, colheaders
2025-12-29 15:53:38 指数初始权重数据类型: double, 维度: 320x1
2025-12-29 15:53:38 股票特异风险包含字段: data, textdata, colheaders
2025-12-29 15:53:38 股票特异风险数据类型: double, 维度: 1x320
2025-12-29 15:53:38 因子协方差包含字段: data, textdata, colheaders
2025-12-29 15:53:38 因子协方差数据类型: double, 维度: 39x39
2025-12-29 15:53:38 因子约束上限数据类型: double, 维度: 1x40
2025-12-29 15:53:38 跟踪误差约束: 0.080000
2025-12-29 15:53:38 处理后的因子约束上限维度: 39x1
2025-12-29 15:53:38 换手率约束包含字段: data, textdata, rowheaders
2025-12-29 15:53:38 最大换手率限制: 1.00
2025-12-29 15:53:38 从配置文件读取权重：分数权重=1.00, 夏普比率权重=0.00
2025-12-29 15:53:38 股票数量: 320
2025-12-29 15:53:38 警告: 因子约束上限向量长度不足，需41，实际为39
2025-12-29 15:53:38 已扩展因子约束上限向量长度至41
2025-12-29 15:53:38 警告: 因子约束下限向量长度不足，需41，实际为39
2025-12-29 15:53:38 已扩展因子约束下限向量长度至41
2025-12-29 15:53:38 风格权重上限维度: 11x1
2025-12-29 15:53:38 风格权重下限维度: 11x1
2025-12-29 15:53:38 行业权重上限维度: 30x1
2025-12-29 15:53:38 行业权重下限维度: 30x1
2025-12-29 15:53:38 警告: 股票风险暴露维度不足，需41列，实际只有39列
2025-12-29 15:53:38 警告: 指数风险暴露维度不足，需41列，实际只有39列
2025-12-29 15:53:38 风格风险暴露维度: 320x11
2025-12-29 15:53:38 行业风险暴露维度: 320x28
2025-12-29 15:53:38 指数风格风险暴露维度: 11x1
2025-12-29 15:53:38 指数行业风险暴露维度: 30x1
2025-12-29 15:53:38 计算协方差矩阵...
2025-12-29 15:53:38 将股票特异风险转换为列向量，维度: 320x1
2025-12-29 15:53:38 协方差矩阵不是正定的，最小特征值: -0.000000，添加正则化项
2025-12-29 15:53:38 协方差矩阵维度: 320x320
2025-12-29 15:53:38 初始权重包含字段: data, textdata, colheaders
2025-12-29 15:53:38 初始权重数据类型: double, 维度: 320x1
2025-12-29 15:53:38 昨天权重数据维度: 320x1, 代码数量: 320
2025-12-29 15:53:38 今天代码数量: 320
2025-12-29 15:53:38 昨天权重总和: 1.000001
2025-12-29 15:53:38 成功匹配股票代码: 299/320
2025-12-29 15:53:38 换手率基准权重总和: 1.000001
2025-12-29 15:53:38 使用昨天权重作为换手率计算基准（按代码匹配）
2025-12-29 15:53:38 检测到yes文件，应用权重约束...
2025-12-29 15:53:38 代码数量: 320, 权重数量: 320，允许权重约束
2025-12-29 15:53:38 应用yes权重后年化跟踪误差项为：0.000000
2025-12-29 15:53:38 权重约束应用完成，最终权重维度: 320x1
2025-12-29 15:53:38 转置后的股票分数维度: 1x320
2025-12-29 15:53:38 目标函数设置：分数权重=1.00, 夏普比率权重=0.00
2025-12-29 15:53:38 调试目标函数计算...
2025-12-29 15:53:38 协方差矩阵V检查:
2025-12-29 15:53:38   V维度: 320x320
2025-12-29 15:53:38   V中的NaN数量: 0
2025-12-29 15:53:38   V中的Inf数量: 0
2025-12-29 15:53:38   V中的负数数量: 18022
2025-12-29 15:53:38   V的最小值: -0.000172
2025-12-29 15:53:38   V的最大值: 0.003604
2025-12-29 15:53:38   V的最小特征值: 0.000001
2025-12-29 15:53:38 分数组件: -0.056233
2025-12-29 15:53:38 风险组件 (x'Vx*252): 0.013119
2025-12-29 15:53:38 风险标准差: 0.114537
2025-12-29 15:53:38 夏普比率组件: -0.490960
2025-12-29 15:53:38 目标函数值: -0.056233
2025-12-29 15:53:38 初始解维度: 320x1
2025-12-29 15:53:38 下界维度: 320x1
2025-12-29 15:53:38 上界维度: 320x1
2025-12-29 15:53:38 验证初始点:
2025-12-29 15:53:38 初始点 x0 中的 NaN: 0, Inf: 0
2025-12-29 15:53:38 初始点 x0 范围: [0.000000, 0.041744]
2025-12-29 15:53:38 初始点 x0 和: 1.000001
2025-12-29 15:53:38 初始点约束条件 g0 中的 NaN: 0, Inf: 0
2025-12-29 15:53:38 初始点约束条件 g0 范围: [-115331.001483, 1648.899891]
2025-12-29 15:53:38 违反的约束数量: 30 / 84
2025-12-29 15:53:38 违反的约束详情:
2025-12-29 15:53:38   风格因子上限违反: 0 / 11
2025-12-29 15:53:38   风格因子下限违反: 4 / 11
2025-12-29 15:53:38   行业因子上限违反: 1 / 30
2025-12-29 15:53:38   行业因子下限违反: 25 / 30
2025-12-29 15:53:38   跟踪误差约束违反: -0.079574 (限制: 0.080000)
2025-12-29 15:53:38   换手率约束违反: -1.000000 (限制: 1.000000)
2025-12-29 15:53:38 线性等式约束维度: Aeq(1x320), beq(1x1)
2025-12-29 15:53:38 优化选项设置完成: 算法=sqp, 最大函数评估次数=800000, 并行计算=true
2025-12-29 15:53:38 开始求解优化问题...
2025-12-29 15:53:38 开始求解优化问题
2025-12-29 15:53:38 fmincon 返回: exitflag=-2, fval=0.056233
2025-12-29 15:53:38 优化完成，输出标志: -2
2025-12-29 15:53:38 优化完成，输出标志: -2
2025-12-29 15:53:38 目标函数值: 0.056233
2025-12-29 15:53:38 未找到可行解
2025-12-29 15:53:38 函数评估次数: 671
2025-12-29 15:53:38 一阶最优性: 5.975900e-01
2025-12-29 15:53:38 约束违反值: 1.648900e+03
2025-12-29 15:53:38 实际换手率: 0.0000 (限制: 1.0000)
2025-12-29 15:53:38 换手率基准权重总和: 1.0000
2025-12-29 15:53:38 最终权重总和: 1.0000
2025-12-29 15:53:38 最大权重变化: 0.0000 (股票: 000001.SZ)
2025-12-29 15:53:38 投资组合风险: 0.000426
2025-12-29 15:53:38 最终分数: -0.056233
2025-12-29 15:53:38 权重总和: 1.000001
2025-12-29 15:53:38 风格风险维度: 11x1
2025-12-29 15:53:38 行业风险维度: 30x1
2025-12-29 15:53:38 行业风险比率维度: 30x1
2025-12-29 15:53:38 优化完成，总时间: 1.09秒
2025-12-29 15:53:38 优化完成: vp08_hs300_HB_2 - 2025-11-03
2025-12-29 15:53:38 正在优化: vp08_hs300_HB_2 - 2025-11-04
2025-12-29 15:53:38 MATLAB函数开始处理路径: E:\test\yfr\vp08_hs300_HB_2\2025-11-04
2025-12-29 15:53:38 配置文件不存在，使用默认配置
2025-12-29 15:53:38 使用指定的并行工作进程数: 6
2025-12-29 15:53:38 配置并行计算，最大工作进程数: 6
2025-12-29 15:53:38 复用现有并行池，6个工作进程
2025-12-29 15:53:38 开始读取数据...
2025-12-29 15:53:38 开始读取数据: E:\test\yfr\vp08_hs300_HB_2\2025-11-04
2025-12-29 15:53:39 风格因子数量: 11
2025-12-29 15:53:39 风格因子表类型: table, 维度: 11x1
2025-12-29 15:53:39 行业因子数量: 30
2025-12-29 15:53:39 行业因子表类型: table, 维度: 30x1
2025-12-29 15:53:39 股票风险暴露包含字段: data, textdata, colheaders
2025-12-29 15:53:39 股票风险暴露数据类型: double, 维度: 320x39
2025-12-29 15:53:39 股票分数包含字段: data, textdata, colheaders
2025-12-29 15:53:39 股票分数数据类型: double, 维度: 320x1
2025-12-29 15:53:39 权重下限包含字段: data, textdata, colheaders
2025-12-29 15:53:39 权重下限数据类型: double, 维度: 320x1
2025-12-29 15:53:39 权重上限包含字段: data, textdata, colheaders
2025-12-29 15:53:39 权重上限数据类型: double, 维度: 320x1
2025-12-29 15:53:39 指数初始权重包含字段: data, textdata, colheaders
2025-12-29 15:53:39 指数初始权重数据类型: double, 维度: 320x1
2025-12-29 15:53:39 股票特异风险包含字段: data, textdata, colheaders
2025-12-29 15:53:39 股票特异风险数据类型: double, 维度: 1x320
2025-12-29 15:53:39 因子协方差包含字段: data, textdata, colheaders
2025-12-29 15:53:39 因子协方差数据类型: double, 维度: 39x39
2025-12-29 15:53:39 因子约束上限数据类型: double, 维度: 1x40
2025-12-29 15:53:39 跟踪误差约束: 0.080000
2025-12-29 15:53:39 处理后的因子约束上限维度: 39x1
2025-12-29 15:53:39 换手率约束包含字段: data, textdata, rowheaders
2025-12-29 15:53:39 最大换手率限制: 1.00
2025-12-29 15:53:39 从配置文件读取权重：分数权重=1.00, 夏普比率权重=0.00
2025-12-29 15:53:39 股票数量: 320
2025-12-29 15:53:39 警告: 因子约束上限向量长度不足，需41，实际为39
2025-12-29 15:53:39 已扩展因子约束上限向量长度至41
2025-12-29 15:53:39 警告: 因子约束下限向量长度不足，需41，实际为39
2025-12-29 15:53:39 已扩展因子约束下限向量长度至41
2025-12-29 15:53:39 风格权重上限维度: 11x1
2025-12-29 15:53:39 风格权重下限维度: 11x1
2025-12-29 15:53:39 行业权重上限维度: 30x1
2025-12-29 15:53:39 行业权重下限维度: 30x1
2025-12-29 15:53:39 警告: 股票风险暴露维度不足，需41列，实际只有39列
2025-12-29 15:53:39 警告: 指数风险暴露维度不足，需41列，实际只有39列
2025-12-29 15:53:39 风格风险暴露维度: 320x11
2025-12-29 15:53:39 行业风险暴露维度: 320x28
2025-12-29 15:53:39 指数风格风险暴露维度: 11x1
2025-12-29 15:53:39 指数行业风险暴露维度: 30x1
2025-12-29 15:53:39 计算协方差矩阵...
2025-12-29 15:53:39 将股票特异风险转换为列向量，维度: 320x1
2025-12-29 15:53:39 协方差矩阵不是正定的，最小特征值: -0.000000，添加正则化项
2025-12-29 15:53:39 协方差矩阵维度: 320x320
2025-12-29 15:53:39 初始权重包含字段: data, textdata, colheaders
2025-12-29 15:53:39 初始权重数据类型: double, 维度: 320x1
2025-12-29 15:53:39 昨天权重数据维度: 320x1, 代码数量: 320
2025-12-29 15:53:39 今天代码数量: 320
2025-12-29 15:53:39 昨天权重总和: 1.000001
2025-12-29 15:53:39 成功匹配股票代码: 299/320
2025-12-29 15:53:39 换手率基准权重总和: 1.000001
2025-12-29 15:53:39 使用昨天权重作为换手率计算基准（按代码匹配）
2025-12-29 15:53:39 检测到yes文件，应用权重约束...
2025-12-29 15:53:39 代码数量: 320, 权重数量: 320，允许权重约束
2025-12-29 15:53:39 应用yes权重后年化跟踪误差项为：0.019179
2025-12-29 15:53:39 权重约束应用完成，最终权重维度: 320x1
2025-12-29 15:53:39 转置后的股票分数维度: 1x320
2025-12-29 15:53:39 目标函数设置：分数权重=1.00, 夏普比率权重=0.00
2025-12-29 15:53:39 调试目标函数计算...
2025-12-29 15:53:39 协方差矩阵V检查:
2025-12-29 15:53:39   V维度: 320x320
2025-12-29 15:53:39   V中的NaN数量: 0
2025-12-29 15:53:39   V中的Inf数量: 0
2025-12-29 15:53:39   V中的负数数量: 17098
2025-12-29 15:53:39   V的最小值: -0.000162
2025-12-29 15:53:39   V的最大值: 0.003646
2025-12-29 15:53:39   V的最小特征值: 0.000001
2025-12-29 15:53:39 分数组件: 0.377640
2025-12-29 15:53:39 风险组件 (x'Vx*252): 0.040001
2025-12-29 15:53:39 风险标准差: 0.200002
2025-12-29 15:53:39 夏普比率组件: 1.888181
2025-12-29 15:53:39 目标函数值: 0.377640
2025-12-29 15:53:39 警告: 初始点权重和(1.002914)偏离1.0，进行归一化调整
2025-12-29 15:53:39 初始解维度: 320x1
2025-12-29 15:53:39 下界维度: 320x1
2025-12-29 15:53:39 上界维度: 320x1
2025-12-29 15:53:39 验证初始点:
2025-12-29 15:53:39 初始点 x0 中的 NaN: 0, Inf: 0
2025-12-29 15:53:39 初始点 x0 范围: [0.000000, 0.041606]
2025-12-29 15:53:39 初始点 x0 和: 1.000000
2025-12-29 15:53:39 初始点约束条件 g0 中的 NaN: 0, Inf: 0
2025-12-29 15:53:39 初始点约束条件 g0 范围: [-115333.001913, 1242.108949]
2025-12-29 15:53:39 违反的约束数量: 29 / 84
2025-12-29 15:53:39 违反的约束详情:
2025-12-29 15:53:39   风格因子上限违反: 0 / 11
2025-12-29 15:53:39   风格因子下限违反: 3 / 11
2025-12-29 15:53:39   行业因子上限违反: 0 / 30
2025-12-29 15:53:39   行业因子下限违反: 26 / 30
2025-12-29 15:53:39   跟踪误差约束违反: -0.078935 (限制: 0.080000)
2025-12-29 15:53:39   换手率约束违反: -0.994280 (限制: 1.000000)
2025-12-29 15:53:39 线性等式约束维度: Aeq(1x320), beq(1x1)
2025-12-29 15:53:39 优化选项设置完成: 算法=sqp, 最大函数评估次数=800000, 并行计算=true
2025-12-29 15:53:39 开始求解优化问题...
2025-12-29 15:53:39 开始求解优化问题
2025-12-29 15:53:39 fmincon 返回: exitflag=-2, fval=0.042659
2025-12-29 15:53:39 优化完成，输出标志: -2
2025-12-29 15:53:39 优化完成，输出标志: -2
2025-12-29 15:53:39 目标函数值: 0.042659
2025-12-29 15:53:39 未找到可行解
2025-12-29 15:53:39 函数评估次数: 671
2025-12-29 15:53:39 一阶最优性: 5.975900e-01
2025-12-29 15:53:39 约束违反值: 1.242109e+03
2025-12-29 15:53:39 实际换手率: 0.0058 (限制: 1.0000)
2025-12-29 15:53:39 换手率基准权重总和: 1.0000
2025-12-29 15:53:39 最终权重总和: 1.0001
2025-12-29 15:53:39 最大权重变化: 0.0005 (股票: 300274.SZ)
2025-12-29 15:53:39 投资组合风险: 0.001071
2025-12-29 15:53:39 最终分数: -0.042659
2025-12-29 15:53:39 权重总和: 1.000063
2025-12-29 15:53:39 风格风险维度: 11x1
2025-12-29 15:53:39 行业风险维度: 30x1
2025-12-29 15:53:39 行业风险比率维度: 30x1
2025-12-29 15:53:39 优化完成，总时间: 0.83秒
2025-12-29 15:53:39 优化完成: vp08_hs300_HB_2 - 2025-11-04
2025-12-29 15:53:39 投资组合 vp08_hs300_HB_2 优化完成
2025-12-29 15:53:39 所有投资组合批量优化完成
2025-12-29 15:53:40 正在读取配置文件: 
2025-12-29 15:53:40 从配置文件读取到 2 个投资组合
2025-12-29 15:53:40 
处理投资组合: vp08_hs300_HB_1 (yfr)
2025-12-29 15:53:40 工作日列表: 2025-11-01 到 2025-11-04，共 2 天
2025-12-29 15:53:40   日期范围: 2025-11-01 到 2025-11-04，共 2 个工作日
2025-12-29 15:53:41 
处理投资组合: vp08_hs300_HB_2 (yfr)
2025-12-29 15:53:41 工作日列表: 2025-11-02 到 2025-11-04，共 2 天
2025-12-29 15:53:41   日期范围: 2025-11-02 到 2025-11-04，共 2 个工作日
2025-12-29 15:59:57 Python return status: 0
2025-12-29 15:59:57 Python output:
2025-12-29 15:59:56 INFO     root: 上传 8320 行数据到表 yfr (database: portfolio_backtest)
2025-12-29 15:59:57 INFO     importer: 导入 8320 行到 portfolio_backtest.yfr
2025-12-29 16:00:36 Python return status: 0
2025-12-29 16:01:21 Python return status: 0
2025-12-29 16:01:21 Python output:
2025-12-29 16:01:21 INFO     root: 上传 1260 行数据到表 yfr (database: portfolio_backtest)
2025-12-29 16:01:21 INFO     importer: 导入 1260 行到 portfolio_backtest.yfr
2025-12-29 16:01:38 Python return status: 0
2025-12-29 16:01:38 Python output:
2025-12-29 16:01:37 INFO     root: 上传 1260 行数据到表 yfr (database: portfolio_backtest)
2025-12-29 16:01:38 INFO     importer: 导入 1260 行到 portfolio_backtest.yfr
2025-12-29 16:06:05 Python return status: 0
2025-12-29 16:06:05 Python output:
2025-12-29 16:06:04 INFO     root: 上传 1260 行数据到表 yfr (database: portfolio_backtest)
2025-12-29 16:06:05 INFO     importer: 导入 640 行到 portfolio_backtest.yfr
2025-12-29 16:07:44 Python return status: 0
2025-12-29 16:07:44 Python output:
2025-12-29 16:07:43 INFO     root: 上传 1260 行数据到表 yfr (database: portfolio_backtest)
2025-12-29 16:07:44 INFO     importer: 导入 1260 行到 portfolio_backtest.yfr
2025-12-29 16:08:09 Python return status: 0
2025-12-29 16:08:09 Python output:
2025-12-29 16:08:08 INFO     root: 上传 1260 行数据到表 yfr (database: portfolio_backtest)
2025-12-29 16:08:09 INFO     importer: 导入 1260 行到 portfolio_backtest.yfr
2025-12-29 16:10:09 Python return status: 0
2025-12-29 16:10:09 Python output:
2025-12-29 16:10:09 INFO     root: 上传 1260 行数据到表 yfr (database: portfolio_backtest)
2025-12-29 16:10:09 INFO     importer: 导入 640 行到 portfolio_backtest.yfr
2025-12-29 16:10:30 Python return status: 0
2025-12-29 16:10:30 Python output:
2025-12-29 16:10:29 INFO     root: 上传 1260 行数据到表 yfr (database: portfolio_backtest)
2025-12-29 16:10:30 INFO     importer: 导入 1260 行到 portfolio_backtest.yfr
2025-12-29 16:14:11 Python return status: 0
2025-12-29 16:14:11 Python output:
2025-12-29 16:14:11 INFO     root: 上传 1260 行数据到表 yfr (database: portfolio_backtest)
2025-12-29 16:14:11 INFO     importer: 导入 1260 行到 portfolio_backtest.yfr
2025-12-29 16:34:11 从配置文件读取到 2 个投资组合
2025-12-29 16:34:12 
处理投资组合: vp08_hs300_HB_1 
2025-12-29 16:34:12   日期范围: 2025-11-01 到 2025-11-06
2025-12-29 16:34:12 工作日列表: 2025-11-01 到 2025-11-06，共 4 天
2025-12-29 16:34:15 目标股票数量: 310
2025-12-29 16:34:15 最终股票数量: 310 (其中指数成分股: 299, top股票: 10, 补充股票: 1)
2025-12-29 16:34:19 目标股票数量: 310
2025-12-29 16:34:19 最终股票数量: 310 (其中指数成分股: 299, top股票: 10, 补充股票: 1)
2025-12-29 16:34:24 目标股票数量: 310
2025-12-29 16:34:24 最终股票数量: 310 (其中指数成分股: 299, top股票: 10, 补充股票: 1)
2025-12-29 16:34:28 目标股票数量: 310
2025-12-29 16:34:28 最终股票数量: 310 (其中指数成分股: 299, top股票: 10, 补充股票: 1)
2025-12-29 16:34:30 
处理投资组合: vp08_hs300_HB_2 
2025-12-29 16:34:30   日期范围: 2025-11-02 到 2025-11-04
2025-12-29 16:34:30 工作日列表: 2025-11-02 到 2025-11-04，共 2 天
2025-12-29 16:34:33 目标股票数量: 320
2025-12-29 16:34:33 最终股票数量: 320 (其中指数成分股: 299, top股票: 10, 补充股票: 11)
2025-12-29 16:34:37 目标股票数量: 320
2025-12-29 16:34:37 最终股票数量: 320 (其中指数成分股: 299, top股票: 10, 补充股票: 11)
2025-12-29 16:34:39 从配置文件读取到 2 个投资组合
2025-12-29 16:34:39 开始优化投资组合: vp08_hs300_HB_1 
2025-12-29 16:34:39   日期范围: 2025-11-01 到 2025-11-06
2025-12-29 16:34:40 工作日列表: 2025-11-01 到 2025-11-06，共 4 天
2025-12-29 16:34:40 正在优化: vp08_hs300_HB_1 - 2025-11-03
2025-12-29 16:34:40 MATLAB函数开始处理路径: E:\test\yfr\vp08_hs300_HB_1\2025-11-03
2025-12-29 16:34:40 配置文件不存在，使用默认配置
2025-12-29 16:34:40 使用指定的并行工作进程数: 6
2025-12-29 16:34:40 配置并行计算，最大工作进程数: 6
2025-12-29 16:34:40 创建新并行池 6 个工作进程
2025-12-29 16:34:40 创建新并行池 6 个工作进程
2025-12-29 16:35:03 并行池创建完毕，NumWorkers=6
2025-12-29 16:35:03 无法在 worker 上添加 utils 路径: 运算符的使用无效。
2025-12-29 16:35:03 开始读取数据...
2025-12-29 16:35:03 开始读取数据: E:\test\yfr\vp08_hs300_HB_1\2025-11-03
2025-12-29 16:35:03 风格因子数量: 11
2025-12-29 16:35:03 风格因子表类型: table, 维度: 11x1
2025-12-29 16:35:03 行业因子数量: 30
2025-12-29 16:35:03 行业因子表类型: table, 维度: 30x1
2025-12-29 16:35:03 股票风险暴露包含字段: data, textdata, colheaders
2025-12-29 16:35:03 股票风险暴露数据类型: double, 维度: 310x39
2025-12-29 16:35:03 股票分数包含字段: data, textdata, colheaders
2025-12-29 16:35:03 股票分数数据类型: double, 维度: 310x1
2025-12-29 16:35:03 权重下限包含字段: data, textdata, colheaders
2025-12-29 16:35:03 权重下限数据类型: double, 维度: 310x1
2025-12-29 16:35:03 权重上限包含字段: data, textdata, colheaders
2025-12-29 16:35:03 权重上限数据类型: double, 维度: 310x1
2025-12-29 16:35:03 指数初始权重包含字段: data, textdata, colheaders
2025-12-29 16:35:03 指数初始权重数据类型: double, 维度: 310x1
2025-12-29 16:35:03 股票特异风险包含字段: data, textdata, colheaders
2025-12-29 16:35:03 股票特异风险数据类型: double, 维度: 1x310
2025-12-29 16:35:03 因子协方差包含字段: data, textdata, colheaders
2025-12-29 16:35:03 因子协方差数据类型: double, 维度: 39x39
2025-12-29 16:35:03 因子约束上限数据类型: double, 维度: 1x40
2025-12-29 16:35:03 跟踪误差约束: 2.000000
2025-12-29 16:35:03 处理后的因子约束上限维度: 39x1
2025-12-29 16:35:03 换手率约束包含字段: data, textdata, rowheaders
2025-12-29 16:35:03 最大换手率限制: 1.00
2025-12-29 16:35:03 从配置文件读取权重：分数权重=1.00, 夏普比率权重=0.00
2025-12-29 16:35:03 股票数量: 310
2025-12-29 16:35:03 警告: 因子约束上限向量长度不足，需41，实际为39
2025-12-29 16:35:03 已扩展因子约束上限向量长度至41
2025-12-29 16:35:03 警告: 因子约束下限向量长度不足，需41，实际为39
2025-12-29 16:35:03 已扩展因子约束下限向量长度至41
2025-12-29 16:35:03 风格权重上限维度: 11x1
2025-12-29 16:35:03 风格权重下限维度: 11x1
2025-12-29 16:35:03 行业权重上限维度: 30x1
2025-12-29 16:35:03 行业权重下限维度: 30x1
2025-12-29 16:35:03 警告: 股票风险暴露维度不足，需41列，实际只有39列
2025-12-29 16:35:03 警告: 指数风险暴露维度不足，需41列，实际只有39列
2025-12-29 16:35:03 风格风险暴露维度: 310x11
2025-12-29 16:35:03 行业风险暴露维度: 310x28
2025-12-29 16:35:03 指数风格风险暴露维度: 11x1
2025-12-29 16:35:03 指数行业风险暴露维度: 30x1
2025-12-29 16:35:03 计算协方差矩阵...
2025-12-29 16:35:03 将股票特异风险转换为列向量，维度: 310x1
2025-12-29 16:35:03 协方差矩阵不是正定的，最小特征值: -0.000000，添加正则化项
2025-12-29 16:35:03 协方差矩阵维度: 310x310
2025-12-29 16:35:03 初始权重包含字段: data, textdata, colheaders
2025-12-29 16:35:03 初始权重数据类型: double, 维度: 310x1
2025-12-29 16:35:03 昨天权重数据维度: 310x1, 代码数量: 310
2025-12-29 16:35:03 今天代码数量: 310
2025-12-29 16:35:03 昨天权重总和: 1.000000
2025-12-29 16:35:03 成功匹配股票代码: 299/310
2025-12-29 16:35:03 换手率基准权重总和: 1.000000
2025-12-29 16:35:03 使用昨天权重作为换手率计算基准（按代码匹配）
2025-12-29 16:35:03 检测到yes文件，应用权重约束...
2025-12-29 16:35:03 代码数量: 310, 权重数量: 310，允许权重约束
2025-12-29 16:35:03 应用yes权重后年化跟踪误差项为：0.000081
2025-12-29 16:35:03 权重约束应用完成，最终权重维度: 310x1
2025-12-29 16:35:03 转置后的股票分数维度: 1x310
2025-12-29 16:35:03 目标函数设置：分数权重=1.00, 夏普比率权重=0.00
2025-12-29 16:35:03 调试目标函数计算...
2025-12-29 16:35:03 协方差矩阵V检查:
2025-12-29 16:35:03   V维度: 310x310
2025-12-29 16:35:03   V中的NaN数量: 0
2025-12-29 16:35:03   V中的Inf数量: 0
2025-12-29 16:35:03   V中的负数数量: 17106
2025-12-29 16:35:03   V的最小值: -0.000172
2025-12-29 16:35:03   V的最大值: 0.002369
2025-12-29 16:35:03   V的最小特征值: 0.000001
2025-12-29 16:35:03 分数组件: -0.017608
2025-12-29 16:35:03 风险组件 (x'Vx*252): 0.012826
2025-12-29 16:35:03 风险标准差: 0.113253
2025-12-29 16:35:03 夏普比率组件: -0.155477
2025-12-29 16:35:03 目标函数值: -0.017608
2025-12-29 16:35:03 警告: 初始点权重和(1.000005)偏离1.0，进行归一化调整
2025-12-29 16:35:03 初始解维度: 310x1
2025-12-29 16:35:03 下界维度: 310x1
2025-12-29 16:35:03 上界维度: 310x1
2025-12-29 16:35:03 验证初始点:
2025-12-29 16:35:03 初始点 x0 中的 NaN: 0, Inf: 0
2025-12-29 16:35:03 初始点 x0 范围: [0.000000, 0.037429]
2025-12-29 16:35:03 初始点 x0 和: 1.000000
2025-12-29 16:35:03 初始点约束条件 g0 中的 NaN: 0, Inf: 0
2025-12-29 16:35:03 初始点约束条件 g0 范围: [-115331.072096, 0.000000]
2025-12-29 16:35:03 违反的约束数量: 0 / 84
2025-12-29 16:35:03 线性等式约束维度: Aeq(1x310), beq(1x1)
2025-12-29 16:35:03 优化选项设置完成: 算法=sqp, 最大函数评估次数=800000, 并行计算=true
2025-12-29 16:35:03 开始求解优化问题...
2025-12-29 16:35:03 开始求解优化问题
2025-12-29 16:35:04 fmincon 返回: exitflag=-2, fval=0.014284
2025-12-29 16:35:04 找到更好的可行解，使用该解
2025-12-29 16:35:04 优化失败但约束违反较小(0.001000)，尝试微调约束容忍度...
2025-12-29 16:35:04 使用微调后的约束容忍度重新优化...
2025-12-29 16:35:05 微调约束容忍度优化也失败，使用原始结果
2025-12-29 16:35:05 约束违反很小(0.001000)，接受当前解作为近似最优解
2025-12-29 16:35:05 优化完成，输出标志: 1
2025-12-29 16:35:05 优化完成，输出标志: 1
2025-12-29 16:35:05 目标函数值: 0.017609
2025-12-29 16:35:05 优化成功完成：
2025-12-29 16:35:05   找到满足约束条件的局部最小值
2025-12-29 16:35:05 函数评估次数: 1286
2025-12-29 16:35:05 一阶最优性: 3.860920e-03
2025-12-29 16:35:05 约束违反值: 1.000000e-03
2025-12-29 16:35:05 实际换手率: 0.0000 (限制: 1.0000)
2025-12-29 16:35:05 换手率基准权重总和: 1.0000
2025-12-29 16:35:05 最终权重总和: 1.0000
2025-12-29 16:35:05 最大权重变化: 0.0000 (股票: 601985.SH)
2025-12-29 16:35:05 投资组合风险: 0.008978
2025-12-29 16:35:05 最终分数: -0.017609
2025-12-29 16:35:05 权重总和: 1.000001
2025-12-29 16:35:05 风格风险维度: 11x1
2025-12-29 16:35:05 行业风险维度: 30x1
2025-12-29 16:35:05 行业风险比率维度: 30x1
2025-12-29 16:35:05 优化完成，总时间: 25.29秒
2025-12-29 16:35:05 优化完成: vp08_hs300_HB_1 - 2025-11-03
2025-12-29 16:35:05 正在优化: vp08_hs300_HB_1 - 2025-11-04
2025-12-29 16:35:05 MATLAB函数开始处理路径: E:\test\yfr\vp08_hs300_HB_1\2025-11-04
2025-12-29 16:35:05 配置文件不存在，使用默认配置
2025-12-29 16:35:05 使用指定的并行工作进程数: 6
2025-12-29 16:35:05 配置并行计算，最大工作进程数: 6
2025-12-29 16:35:05 复用现有并行池，6个工作进程
2025-12-29 16:35:05 开始读取数据...
2025-12-29 16:35:05 开始读取数据: E:\test\yfr\vp08_hs300_HB_1\2025-11-04
2025-12-29 16:35:05 风格因子数量: 11
2025-12-29 16:35:05 风格因子表类型: table, 维度: 11x1
2025-12-29 16:35:05 行业因子数量: 30
2025-12-29 16:35:05 行业因子表类型: table, 维度: 30x1
2025-12-29 16:35:05 股票风险暴露包含字段: data, textdata, colheaders
2025-12-29 16:35:05 股票风险暴露数据类型: double, 维度: 310x39
2025-12-29 16:35:05 股票分数包含字段: data, textdata, colheaders
2025-12-29 16:35:05 股票分数数据类型: double, 维度: 310x1
2025-12-29 16:35:05 权重下限包含字段: data, textdata, colheaders
2025-12-29 16:35:05 权重下限数据类型: double, 维度: 310x1
2025-12-29 16:35:05 权重上限包含字段: data, textdata, colheaders
2025-12-29 16:35:05 权重上限数据类型: double, 维度: 310x1
2025-12-29 16:35:05 指数初始权重包含字段: data, textdata, colheaders
2025-12-29 16:35:05 指数初始权重数据类型: double, 维度: 310x1
2025-12-29 16:35:05 股票特异风险包含字段: data, textdata, colheaders
2025-12-29 16:35:05 股票特异风险数据类型: double, 维度: 1x310
2025-12-29 16:35:05 因子协方差包含字段: data, textdata, colheaders
2025-12-29 16:35:05 因子协方差数据类型: double, 维度: 39x39
2025-12-29 16:35:05 因子约束上限数据类型: double, 维度: 1x40
2025-12-29 16:35:05 跟踪误差约束: 2.000000
2025-12-29 16:35:05 处理后的因子约束上限维度: 39x1
2025-12-29 16:35:05 换手率约束包含字段: data, textdata, rowheaders
2025-12-29 16:35:05 最大换手率限制: 1.00
2025-12-29 16:35:05 从配置文件读取权重：分数权重=1.00, 夏普比率权重=0.00
2025-12-29 16:35:05 股票数量: 310
2025-12-29 16:35:05 警告: 因子约束上限向量长度不足，需41，实际为39
2025-12-29 16:35:05 已扩展因子约束上限向量长度至41
2025-12-29 16:35:05 警告: 因子约束下限向量长度不足，需41，实际为39
2025-12-29 16:35:05 已扩展因子约束下限向量长度至41
2025-12-29 16:35:05 风格权重上限维度: 11x1
2025-12-29 16:35:05 风格权重下限维度: 11x1
2025-12-29 16:35:05 行业权重上限维度: 30x1
2025-12-29 16:35:05 行业权重下限维度: 30x1
2025-12-29 16:35:05 警告: 股票风险暴露维度不足，需41列，实际只有39列
2025-12-29 16:35:05 警告: 指数风险暴露维度不足，需41列，实际只有39列
2025-12-29 16:35:05 风格风险暴露维度: 310x11
2025-12-29 16:35:05 行业风险暴露维度: 310x28
2025-12-29 16:35:05 指数风格风险暴露维度: 11x1
2025-12-29 16:35:05 指数行业风险暴露维度: 30x1
2025-12-29 16:35:05 计算协方差矩阵...
2025-12-29 16:35:05 将股票特异风险转换为列向量，维度: 310x1
2025-12-29 16:35:05 协方差矩阵不是正定的，最小特征值: -0.000000，添加正则化项
2025-12-29 16:35:05 协方差矩阵维度: 310x310
2025-12-29 16:35:05 初始权重包含字段: data, textdata, colheaders
2025-12-29 16:35:05 初始权重数据类型: double, 维度: 310x1
2025-12-29 16:35:05 昨天权重数据维度: 310x1, 代码数量: 310
2025-12-29 16:35:05 今天代码数量: 310
2025-12-29 16:35:05 昨天权重总和: 0.999999
2025-12-29 16:35:05 成功匹配股票代码: 299/310
2025-12-29 16:35:05 换手率基准权重总和: 0.999999
2025-12-29 16:35:05 使用昨天权重作为换手率计算基准（按代码匹配）
2025-12-29 16:35:05 检测到yes文件，应用权重约束...
2025-12-29 16:35:05 代码数量: 310, 权重数量: 310，允许权重约束
2025-12-29 16:35:05 应用yes权重后年化跟踪误差项为：0.918855
2025-12-29 16:35:05 权重约束应用完成，最终权重维度: 310x1
2025-12-29 16:35:05 转置后的股票分数维度: 1x310
2025-12-29 16:35:05 目标函数设置：分数权重=1.00, 夏普比率权重=0.00
2025-12-29 16:35:05 调试目标函数计算...
2025-12-29 16:35:05 协方差矩阵V检查:
2025-12-29 16:35:05   V维度: 310x310
2025-12-29 16:35:05   V中的NaN数量: 0
2025-12-29 16:35:05   V中的Inf数量: 0
2025-12-29 16:35:05   V中的负数数量: 15794
2025-12-29 16:35:05   V的最小值: -0.000162
2025-12-29 16:35:05   V的最大值: 0.003646
2025-12-29 16:35:05   V的最小特征值: 0.000001
2025-12-29 16:35:05 分数组件: 0.556506
2025-12-29 16:35:05 风险组件 (x'Vx*252): 0.943154
2025-12-29 16:35:05 风险标准差: 0.971161
2025-12-29 16:35:05 夏普比率组件: 0.573031
2025-12-29 16:35:05 目标函数值: 0.556506
2025-12-29 16:35:05 警告: 初始点权重和(0.995726)偏离1.0，进行归一化调整
2025-12-29 16:35:05 初始解维度: 310x1
2025-12-29 16:35:05 下界维度: 310x1
2025-12-29 16:35:05 上界维度: 310x1
2025-12-29 16:35:05 验证初始点:
2025-12-29 16:35:05 初始点 x0 中的 NaN: 0, Inf: 0
2025-12-29 16:35:05 初始点 x0 范围: [0.000000, 0.041444]
2025-12-29 16:35:05 初始点 x0 和: 1.000000
2025-12-29 16:35:05 初始点约束条件 g0 中的 NaN: 0, Inf: 0
2025-12-29 16:35:05 初始点约束条件 g0 范围: [-115333.039118, 0.000920]
2025-12-29 16:35:05 违反的约束数量: 1 / 84
2025-12-29 16:35:05 违反的约束详情:
2025-12-29 16:35:05   风格因子上限违反: 1 / 11
2025-12-29 16:35:05   风格因子下限违反: 0 / 11
2025-12-29 16:35:05   行业因子上限违反: 0 / 30
2025-12-29 16:35:05   行业因子下限违反: 0 / 30
2025-12-29 16:35:05   跟踪误差约束违反: -1.993602 (限制: 2.000000)
2025-12-29 16:35:05   换手率约束违反: -0.915421 (限制: 1.000000)
2025-12-29 16:35:05 线性等式约束维度: Aeq(1x310), beq(1x1)
2025-12-29 16:35:05 优化选项设置完成: 算法=sqp, 最大函数评估次数=800000, 并行计算=true
2025-12-29 16:35:05 开始求解优化问题...
2025-12-29 16:35:05 开始求解优化问题
2025-12-29 16:35:06 fmincon 返回: exitflag=2, fval=0.016745
2025-12-29 16:35:06 找到更好的可行解，使用该解
2025-12-29 16:35:06 优化完成，输出标志: 2
2025-12-29 16:35:06 优化完成，输出标志: 2
2025-12-29 16:35:06 目标函数值: 0.016745
2025-12-29 16:35:06 优化成功完成：
2025-12-29 16:35:06   目标函数在可行域内呈现非递减趋势
2025-12-29 16:35:06   约束条件在可行域内满足要求
2025-12-29 16:35:06 函数评估次数: 1864
2025-12-29 16:35:06 一阶最优性: 1.498715e-04
2025-12-29 16:35:06 约束违反值: 3.899960e-04
2025-12-29 16:35:06 检测到 10 个负数权重，将其设为0并重新归一化
2025-12-29 16:35:06 实际换手率: 0.2528 (限制: 1.0000)
2025-12-29 16:35:06 换手率基准权重总和: 1.0000
2025-12-29 16:35:06 最终权重总和: 1.0000
2025-12-29 16:35:06 最大权重变化: 0.0213 (股票: 600150.SH)
2025-12-29 16:35:06 投资组合风险: 0.010030
2025-12-29 16:35:06 最终分数: -0.016745
2025-12-29 16:35:06 权重总和: 1.000000
2025-12-29 16:35:06 风格风险维度: 11x1
2025-12-29 16:35:06 行业风险维度: 30x1
2025-12-29 16:35:06 行业风险比率维度: 30x1
2025-12-29 16:35:06 优化完成，总时间: 0.77秒
2025-12-29 16:35:06 优化完成: vp08_hs300_HB_1 - 2025-11-04
2025-12-29 16:35:06 正在优化: vp08_hs300_HB_1 - 2025-11-05
2025-12-29 16:35:06 MATLAB函数开始处理路径: E:\test\yfr\vp08_hs300_HB_1\2025-11-05
2025-12-29 16:35:06 配置文件不存在，使用默认配置
2025-12-29 16:35:06 使用指定的并行工作进程数: 6
2025-12-29 16:35:06 配置并行计算，最大工作进程数: 6
2025-12-29 16:35:06 复用现有并行池，6个工作进程
2025-12-29 16:35:06 开始读取数据...
2025-12-29 16:35:06 开始读取数据: E:\test\yfr\vp08_hs300_HB_1\2025-11-05
2025-12-29 16:35:06 风格因子数量: 11
2025-12-29 16:35:06 风格因子表类型: table, 维度: 11x1
2025-12-29 16:35:06 行业因子数量: 30
2025-12-29 16:35:06 行业因子表类型: table, 维度: 30x1
2025-12-29 16:35:06 股票风险暴露包含字段: data, textdata, colheaders
2025-12-29 16:35:06 股票风险暴露数据类型: double, 维度: 310x39
2025-12-29 16:35:06 股票分数包含字段: data, textdata, colheaders
2025-12-29 16:35:06 股票分数数据类型: double, 维度: 310x1
2025-12-29 16:35:06 权重下限包含字段: data, textdata, colheaders
2025-12-29 16:35:06 权重下限数据类型: double, 维度: 310x1
2025-12-29 16:35:06 权重上限包含字段: data, textdata, colheaders
2025-12-29 16:35:06 权重上限数据类型: double, 维度: 310x1
2025-12-29 16:35:06 指数初始权重包含字段: data, textdata, colheaders
2025-12-29 16:35:06 指数初始权重数据类型: double, 维度: 310x1
2025-12-29 16:35:06 股票特异风险包含字段: data, textdata, colheaders
2025-12-29 16:35:06 股票特异风险数据类型: double, 维度: 1x310
2025-12-29 16:35:06 因子协方差包含字段: data, textdata, colheaders
2025-12-29 16:35:06 因子协方差数据类型: double, 维度: 39x39
2025-12-29 16:35:06 因子约束上限数据类型: double, 维度: 1x40
2025-12-29 16:35:06 跟踪误差约束: 2.000000
2025-12-29 16:35:06 处理后的因子约束上限维度: 39x1
2025-12-29 16:35:06 换手率约束包含字段: data, textdata, rowheaders
2025-12-29 16:35:06 最大换手率限制: 1.00
2025-12-29 16:35:06 从配置文件读取权重：分数权重=1.00, 夏普比率权重=0.00
2025-12-29 16:35:06 股票数量: 310
2025-12-29 16:35:06 警告: 因子约束上限向量长度不足，需41，实际为39
2025-12-29 16:35:06 已扩展因子约束上限向量长度至41
2025-12-29 16:35:06 警告: 因子约束下限向量长度不足，需41，实际为39
2025-12-29 16:35:06 已扩展因子约束下限向量长度至41
2025-12-29 16:35:06 风格权重上限维度: 11x1
2025-12-29 16:35:06 风格权重下限维度: 11x1
2025-12-29 16:35:06 行业权重上限维度: 30x1
2025-12-29 16:35:06 行业权重下限维度: 30x1
2025-12-29 16:35:06 警告: 股票风险暴露维度不足，需41列，实际只有39列
2025-12-29 16:35:06 警告: 指数风险暴露维度不足，需41列，实际只有39列
2025-12-29 16:35:06 风格风险暴露维度: 310x11
2025-12-29 16:35:06 行业风险暴露维度: 310x28
2025-12-29 16:35:06 指数风格风险暴露维度: 11x1
2025-12-29 16:35:06 指数行业风险暴露维度: 30x1
2025-12-29 16:35:06 计算协方差矩阵...
2025-12-29 16:35:06 将股票特异风险转换为列向量，维度: 310x1
2025-12-29 16:35:06 协方差矩阵维度: 310x310
2025-12-29 16:35:06 初始权重包含字段: data, textdata, colheaders
2025-12-29 16:35:06 初始权重数据类型: double, 维度: 310x1
2025-12-29 16:35:06 昨天权重数据维度: 310x1, 代码数量: 310
2025-12-29 16:35:06 今天代码数量: 310
2025-12-29 16:35:06 昨天权重总和: 1.000000
2025-12-29 16:35:06 成功匹配股票代码: 299/310
2025-12-29 16:35:06 换手率基准权重总和: 1.000000
2025-12-29 16:35:06 使用昨天权重作为换手率计算基准（按代码匹配）
2025-12-29 16:35:06 检测到yes文件，应用权重约束...
2025-12-29 16:35:06 代码数量: 310, 权重数量: 310，允许权重约束
2025-12-29 16:35:06 应用yes权重后年化跟踪误差项为：0.165443
2025-12-29 16:35:06 权重约束应用完成，最终权重维度: 310x1
2025-12-29 16:35:06 转置后的股票分数维度: 1x310
2025-12-29 16:35:06 目标函数设置：分数权重=1.00, 夏普比率权重=0.00
2025-12-29 16:35:06 调试目标函数计算...
2025-12-29 16:35:06 协方差矩阵V检查:
2025-12-29 16:35:06   V维度: 310x310
2025-12-29 16:35:06   V中的NaN数量: 0
2025-12-29 16:35:06   V中的Inf数量: 0
2025-12-29 16:35:06   V中的负数数量: 19578
2025-12-29 16:35:06   V的最小值: -0.000187
2025-12-29 16:35:06   V的最大值: 0.003655
2025-12-29 16:35:06   V的最小特征值: 0.000000
2025-12-29 16:35:06 分数组件: 0.609179
2025-12-29 16:35:06 风险组件 (x'Vx*252): 0.193321
2025-12-29 16:35:06 风险标准差: 0.439683
2025-12-29 16:35:06 夏普比率组件: 1.385497
2025-12-29 16:35:06 目标函数值: 0.609179
2025-12-29 16:35:06 警告: 初始点权重和(0.966524)偏离1.0，进行归一化调整
2025-12-29 16:35:06 初始解维度: 310x1
2025-12-29 16:35:06 下界维度: 310x1
2025-12-29 16:35:06 上界维度: 310x1
2025-12-29 16:35:06 验证初始点:
2025-12-29 16:35:06 初始点 x0 中的 NaN: 0, Inf: 0
2025-12-29 16:35:06 初始点 x0 范围: [0.000000, 0.042779]
2025-12-29 16:35:06 初始点 x0 和: 1.000000
2025-12-29 16:35:06 初始点约束条件 g0 中的 NaN: 0, Inf: 0
2025-12-29 16:35:06 初始点约束条件 g0 范围: [-114901.016810, 0.000754]
2025-12-29 16:35:06 违反的约束数量: 1 / 84
2025-12-29 16:35:06 违反的约束详情:
2025-12-29 16:35:06   风格因子上限违反: 0 / 11
2025-12-29 16:35:06   风格因子下限违反: 0 / 11
2025-12-29 16:35:06   行业因子上限违反: 1 / 30
2025-12-29 16:35:06   行业因子下限违反: 0 / 30
2025-12-29 16:35:06   跟踪误差约束违反: -1.997148 (限制: 2.000000)
2025-12-29 16:35:06   换手率约束违反: -0.859903 (限制: 1.000000)
2025-12-29 16:35:06 线性等式约束维度: Aeq(1x310), beq(1x1)
2025-12-29 16:35:06 优化选项设置完成: 算法=sqp, 最大函数评估次数=800000, 并行计算=true
2025-12-29 16:35:06 开始求解优化问题...
2025-12-29 16:35:06 开始求解优化问题
2025-12-29 16:35:07 fmincon 返回: exitflag=1, fval=-0.080530
2025-12-29 16:35:07 找到更好的可行解，使用该解
2025-12-29 16:35:07 优化完成，输出标志: 1
2025-12-29 16:35:07 优化完成，输出标志: 1
2025-12-29 16:35:07 目标函数值: -0.080530
2025-12-29 16:35:07 优化成功完成：
2025-12-29 16:35:07   找到满足约束条件的局部最小值
2025-12-29 16:35:07 函数评估次数: 2484
2025-12-29 16:35:07 一阶最优性: 4.163347e-11
2025-12-29 16:35:07 约束违反值: 1.332268e-15
2025-12-29 16:35:07 检测到 11 个负数权重，将其设为0并重新归一化
2025-12-29 16:35:07 实际换手率: 0.2581 (限制: 1.0000)
2025-12-29 16:35:07 换手率基准权重总和: 1.0000
2025-12-29 16:35:07 最终权重总和: 1.0000
2025-12-29 16:35:07 最大权重变化: 0.0206 (股票: 600150.SH)
2025-12-29 16:35:07 投资组合风险: 0.009824
2025-12-29 16:35:07 最终分数: 0.080530
2025-12-29 16:35:07 权重总和: 1.000000
2025-12-29 16:35:07 风格风险维度: 11x1
2025-12-29 16:35:07 行业风险维度: 30x1
2025-12-29 16:35:07 行业风险比率维度: 30x1
2025-12-29 16:35:07 优化完成，总时间: 0.75秒
2025-12-29 16:35:07 优化完成: vp08_hs300_HB_1 - 2025-11-05
2025-12-29 16:35:07 正在优化: vp08_hs300_HB_1 - 2025-11-06
2025-12-29 16:35:07 MATLAB函数开始处理路径: E:\test\yfr\vp08_hs300_HB_1\2025-11-06
2025-12-29 16:35:07 配置文件不存在，使用默认配置
2025-12-29 16:35:07 使用指定的并行工作进程数: 6
2025-12-29 16:35:07 配置并行计算，最大工作进程数: 6
2025-12-29 16:35:07 复用现有并行池，6个工作进程
2025-12-29 16:35:07 开始读取数据...
2025-12-29 16:35:07 开始读取数据: E:\test\yfr\vp08_hs300_HB_1\2025-11-06
2025-12-29 16:35:07 风格因子数量: 11
2025-12-29 16:35:07 风格因子表类型: table, 维度: 11x1
2025-12-29 16:35:07 行业因子数量: 30
2025-12-29 16:35:07 行业因子表类型: table, 维度: 30x1
2025-12-29 16:35:07 股票风险暴露包含字段: data, textdata, colheaders
2025-12-29 16:35:07 股票风险暴露数据类型: double, 维度: 310x39
2025-12-29 16:35:07 股票分数包含字段: data, textdata, colheaders
2025-12-29 16:35:07 股票分数数据类型: double, 维度: 310x1
2025-12-29 16:35:07 权重下限包含字段: data, textdata, colheaders
2025-12-29 16:35:07 权重下限数据类型: double, 维度: 310x1
2025-12-29 16:35:07 权重上限包含字段: data, textdata, colheaders
2025-12-29 16:35:07 权重上限数据类型: double, 维度: 310x1
2025-12-29 16:35:07 指数初始权重包含字段: data, textdata, colheaders
2025-12-29 16:35:07 指数初始权重数据类型: double, 维度: 310x1
2025-12-29 16:35:07 股票特异风险包含字段: data, textdata, colheaders
2025-12-29 16:35:07 股票特异风险数据类型: double, 维度: 1x310
2025-12-29 16:35:07 因子协方差包含字段: data, textdata, colheaders
2025-12-29 16:35:07 因子协方差数据类型: double, 维度: 39x39
2025-12-29 16:35:07 因子约束上限数据类型: double, 维度: 1x40
2025-12-29 16:35:07 跟踪误差约束: 2.000000
2025-12-29 16:35:07 处理后的因子约束上限维度: 39x1
2025-12-29 16:35:07 换手率约束包含字段: data, textdata, rowheaders
2025-12-29 16:35:07 最大换手率限制: 1.00
2025-12-29 16:35:07 从配置文件读取权重：分数权重=1.00, 夏普比率权重=0.00
2025-12-29 16:35:07 股票数量: 310
2025-12-29 16:35:07 警告: 因子约束上限向量长度不足，需41，实际为39
2025-12-29 16:35:07 已扩展因子约束上限向量长度至41
2025-12-29 16:35:07 警告: 因子约束下限向量长度不足，需41，实际为39
2025-12-29 16:35:07 已扩展因子约束下限向量长度至41
2025-12-29 16:35:07 风格权重上限维度: 11x1
2025-12-29 16:35:07 风格权重下限维度: 11x1
2025-12-29 16:35:07 行业权重上限维度: 30x1
2025-12-29 16:35:07 行业权重下限维度: 30x1
2025-12-29 16:35:07 警告: 股票风险暴露维度不足，需41列，实际只有39列
2025-12-29 16:35:07 警告: 指数风险暴露维度不足，需41列，实际只有39列
2025-12-29 16:35:07 风格风险暴露维度: 310x11
2025-12-29 16:35:07 行业风险暴露维度: 310x28
2025-12-29 16:35:07 指数风格风险暴露维度: 11x1
2025-12-29 16:35:07 指数行业风险暴露维度: 30x1
2025-12-29 16:35:07 计算协方差矩阵...
2025-12-29 16:35:07 将股票特异风险转换为列向量，维度: 310x1
2025-12-29 16:35:07 协方差矩阵维度: 310x310
2025-12-29 16:35:07 初始权重包含字段: data, textdata, colheaders
2025-12-29 16:35:07 初始权重数据类型: double, 维度: 310x1
2025-12-29 16:35:07 昨天权重数据维度: 310x1, 代码数量: 310
2025-12-29 16:35:07 今天代码数量: 310
2025-12-29 16:35:07 昨天权重总和: 0.999995
2025-12-29 16:35:07 成功匹配股票代码: 299/310
2025-12-29 16:35:07 换手率基准权重总和: 0.999995
2025-12-29 16:35:07 使用昨天权重作为换手率计算基准（按代码匹配）
2025-12-29 16:35:07 检测到yes文件，应用权重约束...
2025-12-29 16:35:07 代码数量: 310, 权重数量: 310，允许权重约束
2025-12-29 16:35:07 应用yes权重后年化跟踪误差项为：0.115993
2025-12-29 16:35:07 权重约束应用完成，最终权重维度: 310x1
2025-12-29 16:35:07 转置后的股票分数维度: 1x310
2025-12-29 16:35:07 目标函数设置：分数权重=1.00, 夏普比率权重=0.00
2025-12-29 16:35:07 调试目标函数计算...
2025-12-29 16:35:07 协方差矩阵V检查:
2025-12-29 16:35:07   V维度: 310x310
2025-12-29 16:35:07   V中的NaN数量: 0
2025-12-29 16:35:07   V中的Inf数量: 0
2025-12-29 16:35:07   V中的负数数量: 19864
2025-12-29 16:35:07   V的最小值: -0.000185
2025-12-29 16:35:07   V的最大值: 0.003656
2025-12-29 16:35:07   V的最小特征值: 0.000000
2025-12-29 16:35:07 分数组件: 0.536509
2025-12-29 16:35:07 风险组件 (x'Vx*252): 0.144161
2025-12-29 16:35:07 风险标准差: 0.379685
2025-12-29 16:35:07 夏普比率组件: 1.413035
2025-12-29 16:35:07 目标函数值: 0.536509
2025-12-29 16:35:07 警告: 初始点权重和(0.966050)偏离1.0，进行归一化调整
2025-12-29 16:35:07 初始解维度: 310x1
2025-12-29 16:35:07 下界维度: 310x1
2025-12-29 16:35:07 上界维度: 310x1
2025-12-29 16:35:07 验证初始点:
2025-12-29 16:35:07 初始点 x0 中的 NaN: 0, Inf: 0
2025-12-29 16:35:07 初始点 x0 范围: [0.000000, 0.046269]
2025-12-29 16:35:07 初始点 x0 和: 1.000000
2025-12-29 16:35:07 初始点约束条件 g0 中的 NaN: 0, Inf: 0
2025-12-29 16:35:07 初始点约束条件 g0 范围: [-115501.020803, 0.007582]
2025-12-29 16:35:07 违反的约束数量: 1 / 84
2025-12-29 16:35:07 违反的约束详情:
2025-12-29 16:35:07   风格因子上限违反: 1 / 11
2025-12-29 16:35:07   风格因子下限违反: 0 / 11
2025-12-29 16:35:07   行业因子上限违反: 0 / 30
2025-12-29 16:35:07   行业因子下限违反: 0 / 30
2025-12-29 16:35:07   跟踪误差约束违反: -1.993490 (限制: 2.000000)
2025-12-29 16:35:07   换手率约束违反: -0.909331 (限制: 1.000000)
2025-12-29 16:35:07 线性等式约束维度: Aeq(1x310), beq(1x1)
2025-12-29 16:35:07 优化选项设置完成: 算法=sqp, 最大函数评估次数=800000, 并行计算=true
2025-12-29 16:35:07 开始求解优化问题...
2025-12-29 16:35:07 开始求解优化问题
2025-12-29 16:35:07 fmincon 返回: exitflag=1, fval=-0.014294
2025-12-29 16:35:07 找到更好的可行解，使用该解
2025-12-29 16:35:07 优化完成，输出标志: 1
2025-12-29 16:35:07 优化完成，输出标志: 1
2025-12-29 16:35:07 目标函数值: -0.014294
2025-12-29 16:35:07 优化成功完成：
2025-12-29 16:35:07   找到满足约束条件的局部最小值
2025-12-29 16:35:07 函数评估次数: 4347
2025-12-29 16:35:07 一阶最优性: 1.040829e-11
2025-12-29 16:35:07 约束违反值: 6.661338e-16
2025-12-29 16:35:07 检测到 8 个负数权重，将其设为0并重新归一化
2025-12-29 16:35:07 实际换手率: 0.1686 (限制: 1.0000)
2025-12-29 16:35:07 换手率基准权重总和: 1.0000
2025-12-29 16:35:07 最终权重总和: 1.0000
2025-12-29 16:35:07 最大权重变化: 0.0138 (股票: 601688.SH)
2025-12-29 16:35:07 投资组合风险: 0.008040
2025-12-29 16:35:07 最终分数: 0.014294
2025-12-29 16:35:07 权重总和: 1.000000
2025-12-29 16:35:07 风格风险维度: 11x1
2025-12-29 16:35:07 行业风险维度: 30x1
2025-12-29 16:35:07 行业风险比率维度: 30x1
2025-12-29 16:35:08 优化完成，总时间: 0.90秒
2025-12-29 16:35:08 优化完成: vp08_hs300_HB_1 - 2025-11-06
2025-12-29 16:35:08 投资组合 vp08_hs300_HB_1 优化完成
2025-12-29 16:35:08 开始优化投资组合: vp08_hs300_HB_2 
2025-12-29 16:35:08   日期范围: 2025-11-02 到 2025-11-04
2025-12-29 16:35:08 工作日列表: 2025-11-02 到 2025-11-04，共 2 天
2025-12-29 16:35:08 正在优化: vp08_hs300_HB_2 - 2025-11-03
2025-12-29 16:35:08 MATLAB函数开始处理路径: E:\test\yfr\vp08_hs300_HB_2\2025-11-03
2025-12-29 16:35:08 配置文件不存在，使用默认配置
2025-12-29 16:35:08 使用指定的并行工作进程数: 6
2025-12-29 16:35:08 配置并行计算，最大工作进程数: 6
2025-12-29 16:35:08 复用现有并行池，6个工作进程
2025-12-29 16:35:08 开始读取数据...
2025-12-29 16:35:08 开始读取数据: E:\test\yfr\vp08_hs300_HB_2\2025-11-03
2025-12-29 16:35:08 风格因子数量: 11
2025-12-29 16:35:08 风格因子表类型: table, 维度: 11x1
2025-12-29 16:35:08 行业因子数量: 30
2025-12-29 16:35:08 行业因子表类型: table, 维度: 30x1
2025-12-29 16:35:08 股票风险暴露包含字段: data, textdata, colheaders
2025-12-29 16:35:08 股票风险暴露数据类型: double, 维度: 320x39
2025-12-29 16:35:08 股票分数包含字段: data, textdata, colheaders
2025-12-29 16:35:08 股票分数数据类型: double, 维度: 320x1
2025-12-29 16:35:08 权重下限包含字段: data, textdata, colheaders
2025-12-29 16:35:08 权重下限数据类型: double, 维度: 320x1
2025-12-29 16:35:08 权重上限包含字段: data, textdata, colheaders
2025-12-29 16:35:08 权重上限数据类型: double, 维度: 320x1
2025-12-29 16:35:08 指数初始权重包含字段: data, textdata, colheaders
2025-12-29 16:35:08 指数初始权重数据类型: double, 维度: 320x1
2025-12-29 16:35:08 股票特异风险包含字段: data, textdata, colheaders
2025-12-29 16:35:08 股票特异风险数据类型: double, 维度: 1x320
2025-12-29 16:35:08 因子协方差包含字段: data, textdata, colheaders
2025-12-29 16:35:08 因子协方差数据类型: double, 维度: 39x39
2025-12-29 16:35:08 因子约束上限数据类型: double, 维度: 1x40
2025-12-29 16:35:08 跟踪误差约束: 0.080000
2025-12-29 16:35:08 处理后的因子约束上限维度: 39x1
2025-12-29 16:35:08 换手率约束包含字段: data, textdata, rowheaders
2025-12-29 16:35:08 最大换手率限制: 1.00
2025-12-29 16:35:08 从配置文件读取权重：分数权重=1.00, 夏普比率权重=0.00
2025-12-29 16:35:08 股票数量: 320
2025-12-29 16:35:08 警告: 因子约束上限向量长度不足，需41，实际为39
2025-12-29 16:35:08 已扩展因子约束上限向量长度至41
2025-12-29 16:35:08 警告: 因子约束下限向量长度不足，需41，实际为39
2025-12-29 16:35:08 已扩展因子约束下限向量长度至41
2025-12-29 16:35:08 风格权重上限维度: 11x1
2025-12-29 16:35:08 风格权重下限维度: 11x1
2025-12-29 16:35:08 行业权重上限维度: 30x1
2025-12-29 16:35:08 行业权重下限维度: 30x1
2025-12-29 16:35:08 警告: 股票风险暴露维度不足，需41列，实际只有39列
2025-12-29 16:35:08 警告: 指数风险暴露维度不足，需41列，实际只有39列
2025-12-29 16:35:08 风格风险暴露维度: 320x11
2025-12-29 16:35:08 行业风险暴露维度: 320x28
2025-12-29 16:35:08 指数风格风险暴露维度: 11x1
2025-12-29 16:35:08 指数行业风险暴露维度: 30x1
2025-12-29 16:35:08 计算协方差矩阵...
2025-12-29 16:35:08 将股票特异风险转换为列向量，维度: 320x1
2025-12-29 16:35:08 协方差矩阵不是正定的，最小特征值: -0.000000，添加正则化项
2025-12-29 16:35:08 协方差矩阵维度: 320x320
2025-12-29 16:35:08 初始权重包含字段: data, textdata, colheaders
2025-12-29 16:35:08 初始权重数据类型: double, 维度: 320x1
2025-12-29 16:35:08 昨天权重数据维度: 320x1, 代码数量: 320
2025-12-29 16:35:08 今天代码数量: 320
2025-12-29 16:35:08 昨天权重总和: 1.000001
2025-12-29 16:35:08 成功匹配股票代码: 299/320
2025-12-29 16:35:08 换手率基准权重总和: 1.000001
2025-12-29 16:35:08 使用昨天权重作为换手率计算基准（按代码匹配）
2025-12-29 16:35:08 检测到yes文件，应用权重约束...
2025-12-29 16:35:08 代码数量: 320, 权重数量: 320，允许权重约束
2025-12-29 16:35:08 应用yes权重后年化跟踪误差项为：0.000000
2025-12-29 16:35:08 权重约束应用完成，最终权重维度: 320x1
2025-12-29 16:35:08 转置后的股票分数维度: 1x320
2025-12-29 16:35:08 目标函数设置：分数权重=1.00, 夏普比率权重=0.00
2025-12-29 16:35:08 调试目标函数计算...
2025-12-29 16:35:08 协方差矩阵V检查:
2025-12-29 16:35:08   V维度: 320x320
2025-12-29 16:35:08   V中的NaN数量: 0
2025-12-29 16:35:08   V中的Inf数量: 0
2025-12-29 16:35:08   V中的负数数量: 18022
2025-12-29 16:35:08   V的最小值: -0.000172
2025-12-29 16:35:08   V的最大值: 0.003604
2025-12-29 16:35:08   V的最小特征值: 0.000001
2025-12-29 16:35:08 分数组件: -0.056233
2025-12-29 16:35:08 风险组件 (x'Vx*252): 0.013119
2025-12-29 16:35:08 风险标准差: 0.114537
2025-12-29 16:35:08 夏普比率组件: -0.490960
2025-12-29 16:35:08 目标函数值: -0.056233
2025-12-29 16:35:08 初始解维度: 320x1
2025-12-29 16:35:08 下界维度: 320x1
2025-12-29 16:35:08 上界维度: 320x1
2025-12-29 16:35:08 验证初始点:
2025-12-29 16:35:08 初始点 x0 中的 NaN: 0, Inf: 0
2025-12-29 16:35:08 初始点 x0 范围: [0.000000, 0.041744]
2025-12-29 16:35:08 初始点 x0 和: 1.000001
2025-12-29 16:35:08 初始点约束条件 g0 中的 NaN: 0, Inf: 0
2025-12-29 16:35:08 初始点约束条件 g0 范围: [-115331.001483, 1648.899891]
2025-12-29 16:35:08 违反的约束数量: 30 / 84
2025-12-29 16:35:08 违反的约束详情:
2025-12-29 16:35:08   风格因子上限违反: 0 / 11
2025-12-29 16:35:08   风格因子下限违反: 4 / 11
2025-12-29 16:35:08   行业因子上限违反: 1 / 30
2025-12-29 16:35:08   行业因子下限违反: 25 / 30
2025-12-29 16:35:08   跟踪误差约束违反: -0.079574 (限制: 0.080000)
2025-12-29 16:35:08   换手率约束违反: -1.000000 (限制: 1.000000)
2025-12-29 16:35:08 线性等式约束维度: Aeq(1x320), beq(1x1)
2025-12-29 16:35:08 优化选项设置完成: 算法=sqp, 最大函数评估次数=800000, 并行计算=true
2025-12-29 16:35:08 开始求解优化问题...
2025-12-29 16:35:08 开始求解优化问题
2025-12-29 16:35:09 fmincon 返回: exitflag=-2, fval=0.056233
2025-12-29 16:35:09 优化完成，输出标志: -2
2025-12-29 16:35:09 优化完成，输出标志: -2
2025-12-29 16:35:09 目标函数值: 0.056233
2025-12-29 16:35:09 未找到可行解
2025-12-29 16:35:09 函数评估次数: 671
2025-12-29 16:35:09 一阶最优性: 5.975900e-01
2025-12-29 16:35:09 约束违反值: 1.648900e+03
2025-12-29 16:35:09 实际换手率: 0.0000 (限制: 1.0000)
2025-12-29 16:35:09 换手率基准权重总和: 1.0000
2025-12-29 16:35:09 最终权重总和: 1.0000
2025-12-29 16:35:09 最大权重变化: 0.0000 (股票: 000001.SZ)
2025-12-29 16:35:09 投资组合风险: 0.000426
2025-12-29 16:35:09 最终分数: -0.056233
2025-12-29 16:35:09 权重总和: 1.000001
2025-12-29 16:35:09 风格风险维度: 11x1
2025-12-29 16:35:09 行业风险维度: 30x1
2025-12-29 16:35:09 行业风险比率维度: 30x1
2025-12-29 16:35:09 优化完成，总时间: 0.85秒
2025-12-29 16:35:09 优化完成: vp08_hs300_HB_2 - 2025-11-03
2025-12-29 16:35:09 正在优化: vp08_hs300_HB_2 - 2025-11-04
2025-12-29 16:35:09 MATLAB函数开始处理路径: E:\test\yfr\vp08_hs300_HB_2\2025-11-04
2025-12-29 16:35:09 配置文件不存在，使用默认配置
2025-12-29 16:35:09 使用指定的并行工作进程数: 6
2025-12-29 16:35:09 配置并行计算，最大工作进程数: 6
2025-12-29 16:35:09 复用现有并行池，6个工作进程
2025-12-29 16:35:09 开始读取数据...
2025-12-29 16:35:09 开始读取数据: E:\test\yfr\vp08_hs300_HB_2\2025-11-04
2025-12-29 16:35:09 风格因子数量: 11
2025-12-29 16:35:09 风格因子表类型: table, 维度: 11x1
2025-12-29 16:35:09 行业因子数量: 30
2025-12-29 16:35:09 行业因子表类型: table, 维度: 30x1
2025-12-29 16:35:09 股票风险暴露包含字段: data, textdata, colheaders
2025-12-29 16:35:09 股票风险暴露数据类型: double, 维度: 320x39
2025-12-29 16:35:09 股票分数包含字段: data, textdata, colheaders
2025-12-29 16:35:09 股票分数数据类型: double, 维度: 320x1
2025-12-29 16:35:09 权重下限包含字段: data, textdata, colheaders
2025-12-29 16:35:09 权重下限数据类型: double, 维度: 320x1
2025-12-29 16:35:09 权重上限包含字段: data, textdata, colheaders
2025-12-29 16:35:09 权重上限数据类型: double, 维度: 320x1
2025-12-29 16:35:09 指数初始权重包含字段: data, textdata, colheaders
2025-12-29 16:35:09 指数初始权重数据类型: double, 维度: 320x1
2025-12-29 16:35:09 股票特异风险包含字段: data, textdata, colheaders
2025-12-29 16:35:09 股票特异风险数据类型: double, 维度: 1x320
2025-12-29 16:35:09 因子协方差包含字段: data, textdata, colheaders
2025-12-29 16:35:09 因子协方差数据类型: double, 维度: 39x39
2025-12-29 16:35:09 因子约束上限数据类型: double, 维度: 1x40
2025-12-29 16:35:09 跟踪误差约束: 0.080000
2025-12-29 16:35:09 处理后的因子约束上限维度: 39x1
2025-12-29 16:35:09 换手率约束包含字段: data, textdata, rowheaders
2025-12-29 16:35:09 最大换手率限制: 1.00
2025-12-29 16:35:09 从配置文件读取权重：分数权重=1.00, 夏普比率权重=0.00
2025-12-29 16:35:09 股票数量: 320
2025-12-29 16:35:09 警告: 因子约束上限向量长度不足，需41，实际为39
2025-12-29 16:35:09 已扩展因子约束上限向量长度至41
2025-12-29 16:35:09 警告: 因子约束下限向量长度不足，需41，实际为39
2025-12-29 16:35:09 已扩展因子约束下限向量长度至41
2025-12-29 16:35:09 风格权重上限维度: 11x1
2025-12-29 16:35:09 风格权重下限维度: 11x1
2025-12-29 16:35:09 行业权重上限维度: 30x1
2025-12-29 16:35:09 行业权重下限维度: 30x1
2025-12-29 16:35:09 警告: 股票风险暴露维度不足，需41列，实际只有39列
2025-12-29 16:35:09 警告: 指数风险暴露维度不足，需41列，实际只有39列
2025-12-29 16:35:09 风格风险暴露维度: 320x11
2025-12-29 16:35:09 行业风险暴露维度: 320x28
2025-12-29 16:35:09 指数风格风险暴露维度: 11x1
2025-12-29 16:35:09 指数行业风险暴露维度: 30x1
2025-12-29 16:35:09 计算协方差矩阵...
2025-12-29 16:35:09 将股票特异风险转换为列向量，维度: 320x1
2025-12-29 16:35:09 协方差矩阵不是正定的，最小特征值: -0.000000，添加正则化项
2025-12-29 16:35:09 协方差矩阵维度: 320x320
2025-12-29 16:35:09 初始权重包含字段: data, textdata, colheaders
2025-12-29 16:35:09 初始权重数据类型: double, 维度: 320x1
2025-12-29 16:35:09 昨天权重数据维度: 320x1, 代码数量: 320
2025-12-29 16:35:09 今天代码数量: 320
2025-12-29 16:35:09 昨天权重总和: 1.000001
2025-12-29 16:35:09 成功匹配股票代码: 299/320
2025-12-29 16:35:09 换手率基准权重总和: 1.000001
2025-12-29 16:35:09 使用昨天权重作为换手率计算基准（按代码匹配）
2025-12-29 16:35:09 检测到yes文件，应用权重约束...
2025-12-29 16:35:09 代码数量: 320, 权重数量: 320，允许权重约束
2025-12-29 16:35:09 应用yes权重后年化跟踪误差项为：0.019179
2025-12-29 16:35:09 权重约束应用完成，最终权重维度: 320x1
2025-12-29 16:35:09 转置后的股票分数维度: 1x320
2025-12-29 16:35:09 目标函数设置：分数权重=1.00, 夏普比率权重=0.00
2025-12-29 16:35:09 调试目标函数计算...
2025-12-29 16:35:09 协方差矩阵V检查:
2025-12-29 16:35:09   V维度: 320x320
2025-12-29 16:35:09   V中的NaN数量: 0
2025-12-29 16:35:09   V中的Inf数量: 0
2025-12-29 16:35:09   V中的负数数量: 17098
2025-12-29 16:35:09   V的最小值: -0.000162
2025-12-29 16:35:09   V的最大值: 0.003646
2025-12-29 16:35:09   V的最小特征值: 0.000001
2025-12-29 16:35:09 分数组件: 0.377640
2025-12-29 16:35:09 风险组件 (x'Vx*252): 0.040001
2025-12-29 16:35:09 风险标准差: 0.200002
2025-12-29 16:35:09 夏普比率组件: 1.888181
2025-12-29 16:35:09 目标函数值: 0.377640
2025-12-29 16:35:09 警告: 初始点权重和(1.002914)偏离1.0，进行归一化调整
2025-12-29 16:35:09 初始解维度: 320x1
2025-12-29 16:35:09 下界维度: 320x1
2025-12-29 16:35:09 上界维度: 320x1
2025-12-29 16:35:09 验证初始点:
2025-12-29 16:35:09 初始点 x0 中的 NaN: 0, Inf: 0
2025-12-29 16:35:09 初始点 x0 范围: [0.000000, 0.041606]
2025-12-29 16:35:09 初始点 x0 和: 1.000000
2025-12-29 16:35:09 初始点约束条件 g0 中的 NaN: 0, Inf: 0
2025-12-29 16:35:09 初始点约束条件 g0 范围: [-115333.001913, 1242.108949]
2025-12-29 16:35:09 违反的约束数量: 29 / 84
2025-12-29 16:35:09 违反的约束详情:
2025-12-29 16:35:09   风格因子上限违反: 0 / 11
2025-12-29 16:35:09   风格因子下限违反: 3 / 11
2025-12-29 16:35:09   行业因子上限违反: 0 / 30
2025-12-29 16:35:09   行业因子下限违反: 26 / 30
2025-12-29 16:35:09   跟踪误差约束违反: -0.078935 (限制: 0.080000)
2025-12-29 16:35:09   换手率约束违反: -0.994280 (限制: 1.000000)
2025-12-29 16:35:09 线性等式约束维度: Aeq(1x320), beq(1x1)
2025-12-29 16:35:09 优化选项设置完成: 算法=sqp, 最大函数评估次数=800000, 并行计算=true
2025-12-29 16:35:09 开始求解优化问题...
2025-12-29 16:35:09 开始求解优化问题
2025-12-29 16:35:10 fmincon 返回: exitflag=-2, fval=0.042659
2025-12-29 16:35:10 优化完成，输出标志: -2
2025-12-29 16:35:10 优化完成，输出标志: -2
2025-12-29 16:35:10 目标函数值: 0.042659
2025-12-29 16:35:10 未找到可行解
2025-12-29 16:35:10 函数评估次数: 671
2025-12-29 16:35:10 一阶最优性: 5.975900e-01
2025-12-29 16:35:10 约束违反值: 1.242109e+03
2025-12-29 16:35:10 实际换手率: 0.0058 (限制: 1.0000)
2025-12-29 16:35:10 换手率基准权重总和: 1.0000
2025-12-29 16:35:10 最终权重总和: 1.0001
2025-12-29 16:35:10 最大权重变化: 0.0005 (股票: 300274.SZ)
2025-12-29 16:35:10 投资组合风险: 0.001071
2025-12-29 16:35:10 最终分数: -0.042659
2025-12-29 16:35:10 权重总和: 1.000063
2025-12-29 16:35:10 风格风险维度: 11x1
2025-12-29 16:35:10 行业风险维度: 30x1
2025-12-29 16:35:10 行业风险比率维度: 30x1
2025-12-29 16:35:10 优化完成，总时间: 0.94秒
2025-12-29 16:35:10 优化完成: vp08_hs300_HB_2 - 2025-11-04
2025-12-29 16:35:10 投资组合 vp08_hs300_HB_2 优化完成
2025-12-29 16:35:10 所有投资组合批量优化完成
2025-12-29 16:35:10 正在读取配置文件: 
2025-12-29 16:35:11 从配置文件读取到 2 个投资组合
2025-12-29 16:35:11 
处理投资组合: vp08_hs300_HB_1 (yfr)
2025-12-29 16:35:11 工作日列表: 2025-11-01 到 2025-11-06，共 4 天
2025-12-29 16:35:11   日期范围: 2025-11-01 到 2025-11-06，共 4 个工作日
2025-12-29 16:35:11 
处理投资组合: vp08_hs300_HB_2 (yfr)
2025-12-29 16:35:11 工作日列表: 2025-11-02 到 2025-11-04，共 2 天
2025-12-29 16:35:11   日期范围: 2025-11-02 到 2025-11-04，共 2 个工作日
2025-12-29 16:36:21 从配置文件读取到 2 个投资组合
2025-12-29 16:36:21 
处理投资组合: vp08_hs300_HB_1 
2025-12-29 16:36:21   日期范围: 2025-11-01 到 2025-11-06
2025-12-29 16:36:21 工作日列表: 2025-11-01 到 2025-11-06，共 4 天
2025-12-29 16:36:24 目标股票数量: 310
2025-12-29 16:36:24 最终股票数量: 310 (其中指数成分股: 299, top股票: 10, 补充股票: 1)
2025-12-29 16:36:30 目标股票数量: 310
2025-12-29 16:36:30 最终股票数量: 310 (其中指数成分股: 299, top股票: 10, 补充股票: 1)
2025-12-29 16:36:40 目标股票数量: 310
2025-12-29 16:36:40 最终股票数量: 310 (其中指数成分股: 299, top股票: 10, 补充股票: 1)
2025-12-29 16:36:44 目标股票数量: 310
2025-12-29 16:36:44 最终股票数量: 310 (其中指数成分股: 299, top股票: 10, 补充股票: 1)
2025-12-29 16:36:46 
处理投资组合: vp08_hs300_HB_2 
2025-12-29 16:36:46   日期范围: 2025-11-02 到 2025-11-04
2025-12-29 16:36:46 工作日列表: 2025-11-02 到 2025-11-04，共 2 天
2025-12-29 16:36:49 目标股票数量: 320
2025-12-29 16:36:49 最终股票数量: 320 (其中指数成分股: 299, top股票: 10, 补充股票: 11)
2025-12-29 16:36:54 目标股票数量: 320
2025-12-29 16:36:54 最终股票数量: 320 (其中指数成分股: 299, top股票: 10, 补充股票: 11)
2025-12-29 16:36:56 从配置文件读取到 2 个投资组合
2025-12-29 16:36:56 开始优化投资组合: vp08_hs300_HB_1 
2025-12-29 16:36:56   日期范围: 2025-11-01 到 2025-11-06
2025-12-29 16:36:57 工作日列表: 2025-11-01 到 2025-11-06，共 4 天
2025-12-29 16:36:57 正在优化: vp08_hs300_HB_1 - 2025-11-03
2025-12-29 16:36:57 MATLAB函数开始处理路径: E:\test\yfr\vp08_hs300_HB_1\2025-11-03
2025-12-29 16:36:57 配置文件不存在，使用默认配置
2025-12-29 16:36:57 使用指定的并行工作进程数: 6
2025-12-29 16:36:57 配置并行计算，最大工作进程数: 6
2025-12-29 16:36:57 复用现有并行池，6个工作进程
2025-12-29 16:36:57 开始读取数据...
2025-12-29 16:36:57 开始读取数据: E:\test\yfr\vp08_hs300_HB_1\2025-11-03
2025-12-29 16:36:57 风格因子数量: 11
2025-12-29 16:36:57 风格因子表类型: table, 维度: 11x1
2025-12-29 16:36:57 行业因子数量: 30
2025-12-29 16:36:57 行业因子表类型: table, 维度: 30x1
2025-12-29 16:36:57 股票风险暴露包含字段: data, textdata, colheaders
2025-12-29 16:36:57 股票风险暴露数据类型: double, 维度: 310x39
2025-12-29 16:36:57 股票分数包含字段: data, textdata, colheaders
2025-12-29 16:36:57 股票分数数据类型: double, 维度: 310x1
2025-12-29 16:36:57 权重下限包含字段: data, textdata, colheaders
2025-12-29 16:36:57 权重下限数据类型: double, 维度: 310x1
2025-12-29 16:36:57 权重上限包含字段: data, textdata, colheaders
2025-12-29 16:36:57 权重上限数据类型: double, 维度: 310x1
2025-12-29 16:36:57 指数初始权重包含字段: data, textdata, colheaders
2025-12-29 16:36:57 指数初始权重数据类型: double, 维度: 310x1
2025-12-29 16:36:57 股票特异风险包含字段: data, textdata, colheaders
2025-12-29 16:36:57 股票特异风险数据类型: double, 维度: 1x310
2025-12-29 16:36:57 因子协方差包含字段: data, textdata, colheaders
2025-12-29 16:36:57 因子协方差数据类型: double, 维度: 39x39
2025-12-29 16:36:57 因子约束上限数据类型: double, 维度: 1x40
2025-12-29 16:36:57 跟踪误差约束: 2.000000
2025-12-29 16:36:57 处理后的因子约束上限维度: 39x1
2025-12-29 16:36:57 换手率约束包含字段: data, textdata, rowheaders
2025-12-29 16:36:57 最大换手率限制: 1.00
2025-12-29 16:36:57 从配置文件读取权重：分数权重=1.00, 夏普比率权重=0.00
2025-12-29 16:36:57 股票数量: 310
2025-12-29 16:36:57 警告: 因子约束上限向量长度不足，需41，实际为39
2025-12-29 16:36:57 已扩展因子约束上限向量长度至41
2025-12-29 16:36:57 警告: 因子约束下限向量长度不足，需41，实际为39
2025-12-29 16:36:57 已扩展因子约束下限向量长度至41
2025-12-29 16:36:57 风格权重上限维度: 11x1
2025-12-29 16:36:57 风格权重下限维度: 11x1
2025-12-29 16:36:57 行业权重上限维度: 30x1
2025-12-29 16:36:57 行业权重下限维度: 30x1
2025-12-29 16:36:57 警告: 股票风险暴露维度不足，需41列，实际只有39列
2025-12-29 16:36:57 警告: 指数风险暴露维度不足，需41列，实际只有39列
2025-12-29 16:36:57 风格风险暴露维度: 310x11
2025-12-29 16:36:57 行业风险暴露维度: 310x28
2025-12-29 16:36:57 指数风格风险暴露维度: 11x1
2025-12-29 16:36:57 指数行业风险暴露维度: 30x1
2025-12-29 16:36:57 计算协方差矩阵...
2025-12-29 16:36:57 将股票特异风险转换为列向量，维度: 310x1
2025-12-29 16:36:57 协方差矩阵不是正定的，最小特征值: -0.000000，添加正则化项
2025-12-29 16:36:57 协方差矩阵维度: 310x310
2025-12-29 16:36:57 初始权重包含字段: data, textdata, colheaders
2025-12-29 16:36:57 初始权重数据类型: double, 维度: 310x1
2025-12-29 16:36:57 昨天权重数据维度: 310x1, 代码数量: 310
2025-12-29 16:36:57 今天代码数量: 310
2025-12-29 16:36:57 昨天权重总和: 0.999999
2025-12-29 16:36:57 成功匹配股票代码: 299/310
2025-12-29 16:36:57 换手率基准权重总和: 0.999999
2025-12-29 16:36:57 使用昨天权重作为换手率计算基准（按代码匹配）
2025-12-29 16:36:57 检测到yes文件，应用权重约束...
2025-12-29 16:36:57 代码数量: 310, 权重数量: 310，允许权重约束
2025-12-29 16:36:57 应用yes权重后年化跟踪误差项为：0.000081
2025-12-29 16:36:57 权重约束应用完成，最终权重维度: 310x1
2025-12-29 16:36:57 转置后的股票分数维度: 1x310
2025-12-29 16:36:57 目标函数设置：分数权重=1.00, 夏普比率权重=0.00
2025-12-29 16:36:57 调试目标函数计算...
2025-12-29 16:36:57 协方差矩阵V检查:
2025-12-29 16:36:57   V维度: 310x310
2025-12-29 16:36:57   V中的NaN数量: 0
2025-12-29 16:36:57   V中的Inf数量: 0
2025-12-29 16:36:57   V中的负数数量: 17106
2025-12-29 16:36:57   V的最小值: -0.000172
2025-12-29 16:36:57   V的最大值: 0.002369
2025-12-29 16:36:57   V的最小特征值: 0.000001
2025-12-29 16:36:57 分数组件: -0.017609
2025-12-29 16:36:57 风险组件 (x'Vx*252): 0.012826
2025-12-29 16:36:57 风险标准差: 0.113253
2025-12-29 16:36:57 夏普比率组件: -0.155483
2025-12-29 16:36:57 目标函数值: -0.017609
2025-12-29 16:36:57 警告: 初始点权重和(1.000004)偏离1.0，进行归一化调整
2025-12-29 16:36:57 初始解维度: 310x1
2025-12-29 16:36:57 下界维度: 310x1
2025-12-29 16:36:57 上界维度: 310x1
2025-12-29 16:36:57 验证初始点:
2025-12-29 16:36:57 初始点 x0 中的 NaN: 0, Inf: 0
2025-12-29 16:36:57 初始点 x0 范围: [0.000000, 0.037429]
2025-12-29 16:36:57 初始点 x0 和: 1.000000
2025-12-29 16:36:57 初始点约束条件 g0 中的 NaN: 0, Inf: 0
2025-12-29 16:36:57 初始点约束条件 g0 范围: [-115331.072097, 0.000000]
2025-12-29 16:36:57 违反的约束数量: 0 / 84
2025-12-29 16:36:57 线性等式约束维度: Aeq(1x310), beq(1x1)
2025-12-29 16:36:57 优化选项设置完成: 算法=sqp, 最大函数评估次数=800000, 并行计算=true
2025-12-29 16:36:57 开始求解优化问题...
2025-12-29 16:36:57 开始求解优化问题
2025-12-29 16:36:58 fmincon 返回: exitflag=2, fval=0.014373
2025-12-29 16:36:58 找到更好的可行解，使用该解
2025-12-29 16:36:58 优化完成，输出标志: 2
2025-12-29 16:36:58 优化完成，输出标志: 2
2025-12-29 16:36:58 目标函数值: 0.014373
2025-12-29 16:36:58 优化成功完成：
2025-12-29 16:36:58   目标函数在可行域内呈现非递减趋势
2025-12-29 16:36:58   约束条件在可行域内满足要求
2025-12-29 16:36:58 函数评估次数: 1263
2025-12-29 16:36:58 一阶最优性: 3.161244e-04
2025-12-29 16:36:58 约束违反值: 1.000000e-03
2025-12-29 16:36:58 实际换手率: 0.0217 (限制: 1.0000)
2025-12-29 16:36:58 换手率基准权重总和: 1.0000
2025-12-29 16:36:58 最终权重总和: 1.0000
2025-12-29 16:36:58 最大权重变化: 0.0039 (股票: 600066.SH)
2025-12-29 16:36:58 投资组合风险: 0.008882
2025-12-29 16:36:58 最终分数: -0.014373
2025-12-29 16:36:58 权重总和: 1.000000
2025-12-29 16:36:58 风格风险维度: 11x1
2025-12-29 16:36:58 行业风险维度: 30x1
2025-12-29 16:36:58 行业风险比率维度: 30x1
2025-12-29 16:36:58 优化完成，总时间: 1.02秒
2025-12-29 16:36:58 优化完成: vp08_hs300_HB_1 - 2025-11-03
2025-12-29 16:36:58 正在优化: vp08_hs300_HB_1 - 2025-11-04
2025-12-29 16:36:58 MATLAB函数开始处理路径: E:\test\yfr\vp08_hs300_HB_1\2025-11-04
2025-12-29 16:36:58 配置文件不存在，使用默认配置
2025-12-29 16:36:58 使用指定的并行工作进程数: 6
2025-12-29 16:36:58 配置并行计算，最大工作进程数: 6
2025-12-29 16:36:58 复用现有并行池，6个工作进程
2025-12-29 16:36:58 开始读取数据...
2025-12-29 16:36:58 开始读取数据: E:\test\yfr\vp08_hs300_HB_1\2025-11-04
2025-12-29 16:36:58 风格因子数量: 11
2025-12-29 16:36:58 风格因子表类型: table, 维度: 11x1
2025-12-29 16:36:58 行业因子数量: 30
2025-12-29 16:36:58 行业因子表类型: table, 维度: 30x1
2025-12-29 16:36:58 股票风险暴露包含字段: data, textdata, colheaders
2025-12-29 16:36:58 股票风险暴露数据类型: double, 维度: 310x39
2025-12-29 16:36:58 股票分数包含字段: data, textdata, colheaders
2025-12-29 16:36:58 股票分数数据类型: double, 维度: 310x1
2025-12-29 16:36:58 权重下限包含字段: data, textdata, colheaders
2025-12-29 16:36:58 权重下限数据类型: double, 维度: 310x1
2025-12-29 16:36:58 权重上限包含字段: data, textdata, colheaders
2025-12-29 16:36:58 权重上限数据类型: double, 维度: 310x1
2025-12-29 16:36:58 指数初始权重包含字段: data, textdata, colheaders
2025-12-29 16:36:58 指数初始权重数据类型: double, 维度: 310x1
2025-12-29 16:36:58 股票特异风险包含字段: data, textdata, colheaders
2025-12-29 16:36:58 股票特异风险数据类型: double, 维度: 1x310
2025-12-29 16:36:58 因子协方差包含字段: data, textdata, colheaders
2025-12-29 16:36:58 因子协方差数据类型: double, 维度: 39x39
2025-12-29 16:36:58 因子约束上限数据类型: double, 维度: 1x40
2025-12-29 16:36:58 跟踪误差约束: 2.000000
2025-12-29 16:36:58 处理后的因子约束上限维度: 39x1
2025-12-29 16:36:58 换手率约束包含字段: data, textdata, rowheaders
2025-12-29 16:36:58 最大换手率限制: 1.00
2025-12-29 16:36:58 从配置文件读取权重：分数权重=1.00, 夏普比率权重=0.00
2025-12-29 16:36:58 股票数量: 310
2025-12-29 16:36:58 警告: 因子约束上限向量长度不足，需41，实际为39
2025-12-29 16:36:58 已扩展因子约束上限向量长度至41
2025-12-29 16:36:58 警告: 因子约束下限向量长度不足，需41，实际为39
2025-12-29 16:36:58 已扩展因子约束下限向量长度至41
2025-12-29 16:36:58 风格权重上限维度: 11x1
2025-12-29 16:36:58 风格权重下限维度: 11x1
2025-12-29 16:36:58 行业权重上限维度: 30x1
2025-12-29 16:36:58 行业权重下限维度: 30x1
2025-12-29 16:36:58 警告: 股票风险暴露维度不足，需41列，实际只有39列
2025-12-29 16:36:58 警告: 指数风险暴露维度不足，需41列，实际只有39列
2025-12-29 16:36:58 风格风险暴露维度: 310x11
2025-12-29 16:36:58 行业风险暴露维度: 310x28
2025-12-29 16:36:58 指数风格风险暴露维度: 11x1
2025-12-29 16:36:58 指数行业风险暴露维度: 30x1
2025-12-29 16:36:58 计算协方差矩阵...
2025-12-29 16:36:58 将股票特异风险转换为列向量，维度: 310x1
2025-12-29 16:36:58 协方差矩阵不是正定的，最小特征值: -0.000000，添加正则化项
2025-12-29 16:36:58 协方差矩阵维度: 310x310
2025-12-29 16:36:58 初始权重包含字段: data, textdata, colheaders
2025-12-29 16:36:58 初始权重数据类型: double, 维度: 310x1
2025-12-29 16:36:58 昨天权重数据维度: 310x1, 代码数量: 310
2025-12-29 16:36:58 今天代码数量: 310
2025-12-29 16:36:58 昨天权重总和: 1.000001
2025-12-29 16:36:58 成功匹配股票代码: 307/310
2025-12-29 16:36:58 换手率基准权重总和: 0.998019
2025-12-29 16:36:58 使用昨天权重作为换手率计算基准（按代码匹配）
2025-12-29 16:36:58 检测到yes文件，应用权重约束...
2025-12-29 16:36:58 代码数量: 310, 权重数量: 310，允许权重约束
2025-12-29 16:36:58 应用yes权重后年化跟踪误差项为：0.919026
2025-12-29 16:36:58 权重约束应用完成，最终权重维度: 310x1
2025-12-29 16:36:58 转置后的股票分数维度: 1x310
2025-12-29 16:36:58 目标函数设置：分数权重=1.00, 夏普比率权重=0.00
2025-12-29 16:36:58 调试目标函数计算...
2025-12-29 16:36:58 协方差矩阵V检查:
2025-12-29 16:36:58   V维度: 310x310
2025-12-29 16:36:58   V中的NaN数量: 0
2025-12-29 16:36:58   V中的Inf数量: 0
2025-12-29 16:36:58   V中的负数数量: 15794
2025-12-29 16:36:58   V的最小值: -0.000162
2025-12-29 16:36:58   V的最大值: 0.003646
2025-12-29 16:36:58   V的最小特征值: 0.000001
2025-12-29 16:36:58 分数组件: 0.561988
2025-12-29 16:36:58 风险组件 (x'Vx*252): 0.943108
2025-12-29 16:36:58 风险标准差: 0.971138
2025-12-29 16:36:58 夏普比率组件: 0.578690
2025-12-29 16:36:58 目标函数值: 0.561988
2025-12-29 16:36:58 警告: 初始点权重和(0.989103)偏离1.0，进行归一化调整
2025-12-29 16:36:58 初始解维度: 310x1
2025-12-29 16:36:58 下界维度: 310x1
2025-12-29 16:36:58 上界维度: 310x1
2025-12-29 16:36:58 验证初始点:
2025-12-29 16:36:58 初始点 x0 中的 NaN: 0, Inf: 0
2025-12-29 16:36:58 初始点 x0 范围: [0.000000, 0.041734]
2025-12-29 16:36:58 初始点 x0 和: 1.000000
2025-12-29 16:36:58 初始点约束条件 g0 中的 NaN: 0, Inf: 0
2025-12-29 16:36:58 初始点约束条件 g0 范围: [-115333.034318, 0.005330]
2025-12-29 16:36:58 违反的约束数量: 1 / 84
2025-12-29 16:36:58 违反的约束详情:
2025-12-29 16:36:58   风格因子上限违反: 1 / 11
2025-12-29 16:36:58   风格因子下限违反: 0 / 11
2025-12-29 16:36:58   行业因子上限违反: 0 / 30
2025-12-29 16:36:58   行业因子下限违反: 0 / 30
2025-12-29 16:36:58   跟踪误差约束违反: -1.993793 (限制: 2.000000)
2025-12-29 16:36:58   换手率约束违反: -0.896707 (限制: 1.000000)
2025-12-29 16:36:58 线性等式约束维度: Aeq(1x310), beq(1x1)
2025-12-29 16:36:58 优化选项设置完成: 算法=sqp, 最大函数评估次数=800000, 并行计算=true
2025-12-29 16:36:58 开始求解优化问题...
2025-12-29 16:36:58 开始求解优化问题
2025-12-29 16:36:59 fmincon 返回: exitflag=1, fval=0.016662
2025-12-29 16:36:59 找到更好的可行解，使用该解
2025-12-29 16:36:59 优化完成，输出标志: 1
2025-12-29 16:36:59 优化完成，输出标志: 1
2025-12-29 16:36:59 目标函数值: 0.016551
2025-12-29 16:36:59 优化成功完成：
2025-12-29 16:36:59   找到满足约束条件的局部最小值
2025-12-29 16:36:59 函数评估次数: 1864
2025-12-29 16:36:59 一阶最优性: 1.137979e-15
2025-12-29 16:36:59 约束违反值: 1.016548e-15
2025-12-29 16:36:59 检测到 11 个负数权重，将其设为0并重新归一化
2025-12-29 16:36:59 实际换手率: 0.2590 (限制: 1.0000)
2025-12-29 16:36:59 换手率基准权重总和: 0.9980
2025-12-29 16:36:59 最终权重总和: 1.0000
2025-12-29 16:36:59 最大权重变化: 0.0213 (股票: 600150.SH)
2025-12-29 16:36:59 投资组合风险: 0.010084
2025-12-29 16:36:59 最终分数: -0.016551
2025-12-29 16:36:59 权重总和: 1.000000
2025-12-29 16:36:59 风格风险维度: 11x1
2025-12-29 16:36:59 行业风险维度: 30x1
2025-12-29 16:36:59 行业风险比率维度: 30x1
2025-12-29 16:36:59 优化完成，总时间: 0.71秒
2025-12-29 16:36:59 优化完成: vp08_hs300_HB_1 - 2025-11-04
2025-12-29 16:36:59 正在优化: vp08_hs300_HB_1 - 2025-11-05
2025-12-29 16:36:59 MATLAB函数开始处理路径: E:\test\yfr\vp08_hs300_HB_1\2025-11-05
2025-12-29 16:36:59 配置文件不存在，使用默认配置
2025-12-29 16:36:59 使用指定的并行工作进程数: 6
2025-12-29 16:36:59 配置并行计算，最大工作进程数: 6
2025-12-29 16:36:59 复用现有并行池，6个工作进程
2025-12-29 16:36:59 开始读取数据...
2025-12-29 16:36:59 开始读取数据: E:\test\yfr\vp08_hs300_HB_1\2025-11-05
2025-12-29 16:36:59 风格因子数量: 11
2025-12-29 16:36:59 风格因子表类型: table, 维度: 11x1
2025-12-29 16:36:59 行业因子数量: 30
2025-12-29 16:36:59 行业因子表类型: table, 维度: 30x1
2025-12-29 16:36:59 股票风险暴露包含字段: data, textdata, colheaders
2025-12-29 16:36:59 股票风险暴露数据类型: double, 维度: 310x39
2025-12-29 16:36:59 股票分数包含字段: data, textdata, colheaders
2025-12-29 16:36:59 股票分数数据类型: double, 维度: 310x1
2025-12-29 16:36:59 权重下限包含字段: data, textdata, colheaders
2025-12-29 16:36:59 权重下限数据类型: double, 维度: 310x1
2025-12-29 16:36:59 权重上限包含字段: data, textdata, colheaders
2025-12-29 16:36:59 权重上限数据类型: double, 维度: 310x1
2025-12-29 16:36:59 指数初始权重包含字段: data, textdata, colheaders
2025-12-29 16:36:59 指数初始权重数据类型: double, 维度: 310x1
2025-12-29 16:36:59 股票特异风险包含字段: data, textdata, colheaders
2025-12-29 16:36:59 股票特异风险数据类型: double, 维度: 1x310
2025-12-29 16:36:59 因子协方差包含字段: data, textdata, colheaders
2025-12-29 16:36:59 因子协方差数据类型: double, 维度: 39x39
2025-12-29 16:36:59 因子约束上限数据类型: double, 维度: 1x40
2025-12-29 16:36:59 跟踪误差约束: 2.000000
2025-12-29 16:36:59 处理后的因子约束上限维度: 39x1
2025-12-29 16:36:59 换手率约束包含字段: data, textdata, rowheaders
2025-12-29 16:36:59 最大换手率限制: 1.00
2025-12-29 16:36:59 从配置文件读取权重：分数权重=1.00, 夏普比率权重=0.00
2025-12-29 16:36:59 股票数量: 310
2025-12-29 16:36:59 警告: 因子约束上限向量长度不足，需41，实际为39
2025-12-29 16:36:59 已扩展因子约束上限向量长度至41
2025-12-29 16:36:59 警告: 因子约束下限向量长度不足，需41，实际为39
2025-12-29 16:36:59 已扩展因子约束下限向量长度至41
2025-12-29 16:36:59 风格权重上限维度: 11x1
2025-12-29 16:36:59 风格权重下限维度: 11x1
2025-12-29 16:36:59 行业权重上限维度: 30x1
2025-12-29 16:36:59 行业权重下限维度: 30x1
2025-12-29 16:36:59 警告: 股票风险暴露维度不足，需41列，实际只有39列
2025-12-29 16:36:59 警告: 指数风险暴露维度不足，需41列，实际只有39列
2025-12-29 16:36:59 风格风险暴露维度: 310x11
2025-12-29 16:36:59 行业风险暴露维度: 310x28
2025-12-29 16:36:59 指数风格风险暴露维度: 11x1
2025-12-29 16:36:59 指数行业风险暴露维度: 30x1
2025-12-29 16:36:59 计算协方差矩阵...
2025-12-29 16:36:59 将股票特异风险转换为列向量，维度: 310x1
2025-12-29 16:36:59 协方差矩阵维度: 310x310
2025-12-29 16:36:59 初始权重包含字段: data, textdata, colheaders
2025-12-29 16:36:59 初始权重数据类型: double, 维度: 310x1
2025-12-29 16:36:59 昨天权重数据维度: 310x1, 代码数量: 310
2025-12-29 16:36:59 今天代码数量: 310
2025-12-29 16:36:59 昨天权重总和: 1.000002
2025-12-29 16:36:59 成功匹配股票代码: 299/310
2025-12-29 16:36:59 换手率基准权重总和: 1.000002
2025-12-29 16:36:59 使用昨天权重作为换手率计算基准（按代码匹配）
2025-12-29 16:36:59 检测到yes文件，应用权重约束...
2025-12-29 16:36:59 代码数量: 310, 权重数量: 310，允许权重约束
2025-12-29 16:36:59 应用yes权重后年化跟踪误差项为：0.165445
2025-12-29 16:36:59 权重约束应用完成，最终权重维度: 310x1
2025-12-29 16:36:59 转置后的股票分数维度: 1x310
2025-12-29 16:36:59 目标函数设置：分数权重=1.00, 夏普比率权重=0.00
2025-12-29 16:36:59 调试目标函数计算...
2025-12-29 16:36:59 协方差矩阵V检查:
2025-12-29 16:36:59   V维度: 310x310
2025-12-29 16:36:59   V中的NaN数量: 0
2025-12-29 16:36:59   V中的Inf数量: 0
2025-12-29 16:36:59   V中的负数数量: 19578
2025-12-29 16:36:59   V的最小值: -0.000187
2025-12-29 16:36:59   V的最大值: 0.003655
2025-12-29 16:36:59   V的最小特征值: 0.000000
2025-12-29 16:36:59 分数组件: 0.608922
2025-12-29 16:36:59 风险组件 (x'Vx*252): 0.193324
2025-12-29 16:36:59 风险标准差: 0.439686
2025-12-29 16:36:59 夏普比率组件: 1.384904
2025-12-29 16:36:59 目标函数值: 0.608922
2025-12-29 16:36:59 警告: 初始点权重和(0.966187)偏离1.0，进行归一化调整
2025-12-29 16:36:59 初始解维度: 310x1
2025-12-29 16:36:59 下界维度: 310x1
2025-12-29 16:36:59 上界维度: 310x1
2025-12-29 16:36:59 验证初始点:
2025-12-29 16:36:59 初始点 x0 中的 NaN: 0, Inf: 0
2025-12-29 16:36:59 初始点 x0 范围: [0.000000, 0.042752]
2025-12-29 16:36:59 初始点 x0 和: 1.000000
2025-12-29 16:36:59 初始点约束条件 g0 中的 NaN: 0, Inf: 0
2025-12-29 16:36:59 初始点约束条件 g0 范围: [-114901.016923, 0.000772]
2025-12-29 16:36:59 违反的约束数量: 1 / 84
2025-12-29 16:36:59 违反的约束详情:
2025-12-29 16:36:59   风格因子上限违反: 0 / 11
2025-12-29 16:36:59   风格因子下限违反: 0 / 11
2025-12-29 16:36:59   行业因子上限违反: 1 / 30
2025-12-29 16:36:59   行业因子下限违反: 0 / 30
2025-12-29 16:36:59   跟踪误差约束违反: -1.997172 (限制: 2.000000)
2025-12-29 16:36:59   换手率约束违反: -0.859076 (限制: 1.000000)
2025-12-29 16:36:59 线性等式约束维度: Aeq(1x310), beq(1x1)
2025-12-29 16:36:59 优化选项设置完成: 算法=sqp, 最大函数评估次数=800000, 并行计算=true
2025-12-29 16:36:59 开始求解优化问题...
2025-12-29 16:36:59 开始求解优化问题
2025-12-29 16:36:59 fmincon 返回: exitflag=1, fval=-0.080530
2025-12-29 16:36:59 找到更好的可行解，使用该解
2025-12-29 16:36:59 优化完成，输出标志: 1
2025-12-29 16:36:59 优化完成，输出标志: 1
2025-12-29 16:36:59 目标函数值: -0.080530
2025-12-29 16:36:59 优化成功完成：
2025-12-29 16:36:59   找到满足约束条件的局部最小值
2025-12-29 16:36:59 函数评估次数: 1864
2025-12-29 16:36:59 一阶最优性: 2.084183e-11
2025-12-29 16:36:59 约束违反值: 8.881784e-16
2025-12-29 16:36:59 检测到 11 个负数权重，将其设为0并重新归一化
2025-12-29 16:36:59 实际换手率: 0.2585 (限制: 1.0000)
2025-12-29 16:36:59 换手率基准权重总和: 1.0000
2025-12-29 16:36:59 最终权重总和: 1.0000
2025-12-29 16:36:59 最大权重变化: 0.0206 (股票: 600150.SH)
2025-12-29 16:36:59 投资组合风险: 0.009820
2025-12-29 16:36:59 最终分数: 0.080530
2025-12-29 16:36:59 权重总和: 1.000000
2025-12-29 16:36:59 风格风险维度: 11x1
2025-12-29 16:36:59 行业风险维度: 30x1
2025-12-29 16:36:59 行业风险比率维度: 30x1
2025-12-29 16:36:59 优化完成，总时间: 0.69秒
2025-12-29 16:36:59 优化完成: vp08_hs300_HB_1 - 2025-11-05
2025-12-29 16:36:59 正在优化: vp08_hs300_HB_1 - 2025-11-06
2025-12-29 16:36:59 MATLAB函数开始处理路径: E:\test\yfr\vp08_hs300_HB_1\2025-11-06
2025-12-29 16:36:59 配置文件不存在，使用默认配置
2025-12-29 16:36:59 使用指定的并行工作进程数: 6
2025-12-29 16:36:59 配置并行计算，最大工作进程数: 6
2025-12-29 16:36:59 复用现有并行池，6个工作进程
2025-12-29 16:36:59 开始读取数据...
2025-12-29 16:36:59 开始读取数据: E:\test\yfr\vp08_hs300_HB_1\2025-11-06
2025-12-29 16:36:59 风格因子数量: 11
2025-12-29 16:36:59 风格因子表类型: table, 维度: 11x1
2025-12-29 16:36:59 行业因子数量: 30
2025-12-29 16:36:59 行业因子表类型: table, 维度: 30x1
2025-12-29 16:36:59 股票风险暴露包含字段: data, textdata, colheaders
2025-12-29 16:36:59 股票风险暴露数据类型: double, 维度: 310x39
2025-12-29 16:36:59 股票分数包含字段: data, textdata, colheaders
2025-12-29 16:36:59 股票分数数据类型: double, 维度: 310x1
2025-12-29 16:36:59 权重下限包含字段: data, textdata, colheaders
2025-12-29 16:36:59 权重下限数据类型: double, 维度: 310x1
2025-12-29 16:36:59 权重上限包含字段: data, textdata, colheaders
2025-12-29 16:36:59 权重上限数据类型: double, 维度: 310x1
2025-12-29 16:36:59 指数初始权重包含字段: data, textdata, colheaders
2025-12-29 16:36:59 指数初始权重数据类型: double, 维度: 310x1
2025-12-29 16:36:59 股票特异风险包含字段: data, textdata, colheaders
2025-12-29 16:36:59 股票特异风险数据类型: double, 维度: 1x310
2025-12-29 16:36:59 因子协方差包含字段: data, textdata, colheaders
2025-12-29 16:36:59 因子协方差数据类型: double, 维度: 39x39
2025-12-29 16:36:59 因子约束上限数据类型: double, 维度: 1x40
2025-12-29 16:36:59 跟踪误差约束: 2.000000
2025-12-29 16:36:59 处理后的因子约束上限维度: 39x1
2025-12-29 16:36:59 换手率约束包含字段: data, textdata, rowheaders
2025-12-29 16:36:59 最大换手率限制: 1.00
2025-12-29 16:36:59 从配置文件读取权重：分数权重=1.00, 夏普比率权重=0.00
2025-12-29 16:36:59 股票数量: 310
2025-12-29 16:36:59 警告: 因子约束上限向量长度不足，需41，实际为39
2025-12-29 16:36:59 已扩展因子约束上限向量长度至41
2025-12-29 16:36:59 警告: 因子约束下限向量长度不足，需41，实际为39
2025-12-29 16:36:59 已扩展因子约束下限向量长度至41
2025-12-29 16:36:59 风格权重上限维度: 11x1
2025-12-29 16:36:59 风格权重下限维度: 11x1
2025-12-29 16:36:59 行业权重上限维度: 30x1
2025-12-29 16:36:59 行业权重下限维度: 30x1
2025-12-29 16:36:59 警告: 股票风险暴露维度不足，需41列，实际只有39列
2025-12-29 16:36:59 警告: 指数风险暴露维度不足，需41列，实际只有39列
2025-12-29 16:36:59 风格风险暴露维度: 310x11
2025-12-29 16:36:59 行业风险暴露维度: 310x28
2025-12-29 16:36:59 指数风格风险暴露维度: 11x1
2025-12-29 16:36:59 指数行业风险暴露维度: 30x1
2025-12-29 16:36:59 计算协方差矩阵...
2025-12-29 16:36:59 将股票特异风险转换为列向量，维度: 310x1
2025-12-29 16:36:59 协方差矩阵维度: 310x310
2025-12-29 16:36:59 初始权重包含字段: data, textdata, colheaders
2025-12-29 16:36:59 初始权重数据类型: double, 维度: 310x1
2025-12-29 16:37:00 昨天权重数据维度: 310x1, 代码数量: 310
2025-12-29 16:37:00 今天代码数量: 310
2025-12-29 16:37:00 昨天权重总和: 0.999995
2025-12-29 16:37:00 成功匹配股票代码: 299/310
2025-12-29 16:37:00 换手率基准权重总和: 0.999995
2025-12-29 16:37:00 使用昨天权重作为换手率计算基准（按代码匹配）
2025-12-29 16:37:00 检测到yes文件，应用权重约束...
2025-12-29 16:37:00 代码数量: 310, 权重数量: 310，允许权重约束
2025-12-29 16:37:00 应用yes权重后年化跟踪误差项为：0.115993
2025-12-29 16:37:00 权重约束应用完成，最终权重维度: 310x1
2025-12-29 16:37:00 转置后的股票分数维度: 1x310
2025-12-29 16:37:00 目标函数设置：分数权重=1.00, 夏普比率权重=0.00
2025-12-29 16:37:00 调试目标函数计算...
2025-12-29 16:37:00 协方差矩阵V检查:
2025-12-29 16:37:00   V维度: 310x310
2025-12-29 16:37:00   V中的NaN数量: 0
2025-12-29 16:37:00   V中的Inf数量: 0
2025-12-29 16:37:00   V中的负数数量: 19864
2025-12-29 16:37:00   V的最小值: -0.000185
2025-12-29 16:37:00   V的最大值: 0.003656
2025-12-29 16:37:00   V的最小特征值: 0.000000
2025-12-29 16:37:00 分数组件: 0.536536
2025-12-29 16:37:00 风险组件 (x'Vx*252): 0.144160
2025-12-29 16:37:00 风险标准差: 0.379685
2025-12-29 16:37:00 夏普比率组件: 1.413110
2025-12-29 16:37:00 目标函数值: 0.536536
2025-12-29 16:37:00 警告: 初始点权重和(0.965998)偏离1.0，进行归一化调整
2025-12-29 16:37:00 初始解维度: 310x1
2025-12-29 16:37:00 下界维度: 310x1
2025-12-29 16:37:00 上界维度: 310x1
2025-12-29 16:37:00 验证初始点:
2025-12-29 16:37:00 初始点 x0 中的 NaN: 0, Inf: 0
2025-12-29 16:37:00 初始点 x0 范围: [0.000000, 0.046242]
2025-12-29 16:37:00 初始点 x0 和: 1.000000
2025-12-29 16:37:00 初始点约束条件 g0 中的 NaN: 0, Inf: 0
2025-12-29 16:37:00 初始点约束条件 g0 范围: [-115501.020832, 0.007519]
2025-12-29 16:37:00 违反的约束数量: 1 / 84
2025-12-29 16:37:00 违反的约束详情:
2025-12-29 16:37:00   风格因子上限违反: 1 / 11
2025-12-29 16:37:00   风格因子下限违反: 0 / 11
2025-12-29 16:37:00   行业因子上限违反: 0 / 30
2025-12-29 16:37:00   行业因子下限违反: 0 / 30
2025-12-29 16:37:00   跟踪误差约束违反: -1.993499 (限制: 2.000000)
2025-12-29 16:37:00   换手率约束违反: -0.909296 (限制: 1.000000)
2025-12-29 16:37:00 线性等式约束维度: Aeq(1x310), beq(1x1)
2025-12-29 16:37:00 优化选项设置完成: 算法=sqp, 最大函数评估次数=800000, 并行计算=true
2025-12-29 16:37:00 开始求解优化问题...
2025-12-29 16:37:00 开始求解优化问题
2025-12-29 16:37:00 fmincon 返回: exitflag=1, fval=-0.014294
2025-12-29 16:37:00 找到更好的可行解，使用该解
2025-12-29 16:37:00 优化完成，输出标志: 1
2025-12-29 16:37:00 优化完成，输出标志: 1
2025-12-29 16:37:00 目标函数值: -0.014294
2025-12-29 16:37:00 优化成功完成：
2025-12-29 16:37:00   找到满足约束条件的局部最小值
2025-12-29 16:37:00 函数评估次数: 4348
2025-12-29 16:37:00 一阶最优性: 6.939380e-12
2025-12-29 16:37:00 约束违反值: 3.451266e-31
2025-12-29 16:37:00 检测到 6 个负数权重，将其设为0并重新归一化
2025-12-29 16:37:00 实际换手率: 0.1686 (限制: 1.0000)
2025-12-29 16:37:00 换手率基准权重总和: 1.0000
2025-12-29 16:37:00 最终权重总和: 1.0000
2025-12-29 16:37:00 最大权重变化: 0.0138 (股票: 601688.SH)
2025-12-29 16:37:00 投资组合风险: 0.008040
2025-12-29 16:37:00 最终分数: 0.014294
2025-12-29 16:37:00 权重总和: 1.000000
2025-12-29 16:37:00 风格风险维度: 11x1
2025-12-29 16:37:00 行业风险维度: 30x1
2025-12-29 16:37:00 行业风险比率维度: 30x1
2025-12-29 16:37:00 优化完成，总时间: 0.79秒
2025-12-29 16:37:00 优化完成: vp08_hs300_HB_1 - 2025-11-06
2025-12-29 16:37:00 投资组合 vp08_hs300_HB_1 优化完成
2025-12-29 16:37:00 开始优化投资组合: vp08_hs300_HB_2 
2025-12-29 16:37:00   日期范围: 2025-11-02 到 2025-11-04
2025-12-29 16:37:00 工作日列表: 2025-11-02 到 2025-11-04，共 2 天
2025-12-29 16:37:01 正在优化: vp08_hs300_HB_2 - 2025-11-03
2025-12-29 16:37:01 MATLAB函数开始处理路径: E:\test\yfr\vp08_hs300_HB_2\2025-11-03
2025-12-29 16:37:01 配置文件不存在，使用默认配置
2025-12-29 16:37:01 使用指定的并行工作进程数: 6
2025-12-29 16:37:01 配置并行计算，最大工作进程数: 6
2025-12-29 16:37:01 复用现有并行池，6个工作进程
2025-12-29 16:37:01 开始读取数据...
2025-12-29 16:37:01 开始读取数据: E:\test\yfr\vp08_hs300_HB_2\2025-11-03
2025-12-29 16:37:01 风格因子数量: 11
2025-12-29 16:37:01 风格因子表类型: table, 维度: 11x1
2025-12-29 16:37:01 行业因子数量: 30
2025-12-29 16:37:01 行业因子表类型: table, 维度: 30x1
2025-12-29 16:37:01 股票风险暴露包含字段: data, textdata, colheaders
2025-12-29 16:37:01 股票风险暴露数据类型: double, 维度: 320x39
2025-12-29 16:37:01 股票分数包含字段: data, textdata, colheaders
2025-12-29 16:37:01 股票分数数据类型: double, 维度: 320x1
2025-12-29 16:37:01 权重下限包含字段: data, textdata, colheaders
2025-12-29 16:37:01 权重下限数据类型: double, 维度: 320x1
2025-12-29 16:37:01 权重上限包含字段: data, textdata, colheaders
2025-12-29 16:37:01 权重上限数据类型: double, 维度: 320x1
2025-12-29 16:37:01 指数初始权重包含字段: data, textdata, colheaders
2025-12-29 16:37:01 指数初始权重数据类型: double, 维度: 320x1
2025-12-29 16:37:01 股票特异风险包含字段: data, textdata, colheaders
2025-12-29 16:37:01 股票特异风险数据类型: double, 维度: 1x320
2025-12-29 16:37:01 因子协方差包含字段: data, textdata, colheaders
2025-12-29 16:37:01 因子协方差数据类型: double, 维度: 39x39
2025-12-29 16:37:01 因子约束上限数据类型: double, 维度: 1x40
2025-12-29 16:37:01 跟踪误差约束: 0.080000
2025-12-29 16:37:01 处理后的因子约束上限维度: 39x1
2025-12-29 16:37:01 换手率约束包含字段: data, textdata, rowheaders
2025-12-29 16:37:01 最大换手率限制: 1.00
2025-12-29 16:37:01 从配置文件读取权重：分数权重=1.00, 夏普比率权重=0.00
2025-12-29 16:37:01 股票数量: 320
2025-12-29 16:37:01 警告: 因子约束上限向量长度不足，需41，实际为39
2025-12-29 16:37:01 已扩展因子约束上限向量长度至41
2025-12-29 16:37:01 警告: 因子约束下限向量长度不足，需41，实际为39
2025-12-29 16:37:01 已扩展因子约束下限向量长度至41
2025-12-29 16:37:01 风格权重上限维度: 11x1
2025-12-29 16:37:01 风格权重下限维度: 11x1
2025-12-29 16:37:01 行业权重上限维度: 30x1
2025-12-29 16:37:01 行业权重下限维度: 30x1
2025-12-29 16:37:01 警告: 股票风险暴露维度不足，需41列，实际只有39列
2025-12-29 16:37:01 警告: 指数风险暴露维度不足，需41列，实际只有39列
2025-12-29 16:37:01 风格风险暴露维度: 320x11
2025-12-29 16:37:01 行业风险暴露维度: 320x28
2025-12-29 16:37:01 指数风格风险暴露维度: 11x1
2025-12-29 16:37:01 指数行业风险暴露维度: 30x1
2025-12-29 16:37:01 计算协方差矩阵...
2025-12-29 16:37:01 将股票特异风险转换为列向量，维度: 320x1
2025-12-29 16:37:01 协方差矩阵不是正定的，最小特征值: -0.000000，添加正则化项
2025-12-29 16:37:01 协方差矩阵维度: 320x320
2025-12-29 16:37:01 初始权重包含字段: data, textdata, colheaders
2025-12-29 16:37:01 初始权重数据类型: double, 维度: 320x1
2025-12-29 16:37:01 昨天权重数据维度: 320x1, 代码数量: 320
2025-12-29 16:37:01 今天代码数量: 320
2025-12-29 16:37:01 昨天权重总和: 1.000001
2025-12-29 16:37:01 成功匹配股票代码: 299/320
2025-12-29 16:37:01 换手率基准权重总和: 1.000001
2025-12-29 16:37:01 使用昨天权重作为换手率计算基准（按代码匹配）
2025-12-29 16:37:01 检测到yes文件，应用权重约束...
2025-12-29 16:37:01 代码数量: 320, 权重数量: 320，允许权重约束
2025-12-29 16:37:01 应用yes权重后年化跟踪误差项为：0.000000
2025-12-29 16:37:01 权重约束应用完成，最终权重维度: 320x1
2025-12-29 16:37:01 转置后的股票分数维度: 1x320
2025-12-29 16:37:01 目标函数设置：分数权重=1.00, 夏普比率权重=0.00
2025-12-29 16:37:01 调试目标函数计算...
2025-12-29 16:37:01 协方差矩阵V检查:
2025-12-29 16:37:01   V维度: 320x320
2025-12-29 16:37:01   V中的NaN数量: 0
2025-12-29 16:37:01   V中的Inf数量: 0
2025-12-29 16:37:01   V中的负数数量: 18022
2025-12-29 16:37:01   V的最小值: -0.000172
2025-12-29 16:37:01   V的最大值: 0.003604
2025-12-29 16:37:01   V的最小特征值: 0.000001
2025-12-29 16:37:01 分数组件: -0.056233
2025-12-29 16:37:01 风险组件 (x'Vx*252): 0.013119
2025-12-29 16:37:01 风险标准差: 0.114537
2025-12-29 16:37:01 夏普比率组件: -0.490960
2025-12-29 16:37:01 目标函数值: -0.056233
2025-12-29 16:37:01 初始解维度: 320x1
2025-12-29 16:37:01 下界维度: 320x1
2025-12-29 16:37:01 上界维度: 320x1
2025-12-29 16:37:01 验证初始点:
2025-12-29 16:37:01 初始点 x0 中的 NaN: 0, Inf: 0
2025-12-29 16:37:01 初始点 x0 范围: [0.000000, 0.041744]
2025-12-29 16:37:01 初始点 x0 和: 1.000001
2025-12-29 16:37:01 初始点约束条件 g0 中的 NaN: 0, Inf: 0
2025-12-29 16:37:01 初始点约束条件 g0 范围: [-115331.001483, 1648.899891]
2025-12-29 16:37:01 违反的约束数量: 30 / 84
2025-12-29 16:37:01 违反的约束详情:
2025-12-29 16:37:01   风格因子上限违反: 0 / 11
2025-12-29 16:37:01   风格因子下限违反: 4 / 11
2025-12-29 16:37:01   行业因子上限违反: 1 / 30
2025-12-29 16:37:01   行业因子下限违反: 25 / 30
2025-12-29 16:37:01   跟踪误差约束违反: -0.079574 (限制: 0.080000)
2025-12-29 16:37:01   换手率约束违反: -1.000000 (限制: 1.000000)
2025-12-29 16:37:01 线性等式约束维度: Aeq(1x320), beq(1x1)
2025-12-29 16:37:01 优化选项设置完成: 算法=sqp, 最大函数评估次数=800000, 并行计算=true
2025-12-29 16:37:01 开始求解优化问题...
2025-12-29 16:37:01 开始求解优化问题
2025-12-29 16:37:01 fmincon 返回: exitflag=-2, fval=0.056233
2025-12-29 16:37:01 优化完成，输出标志: -2
2025-12-29 16:37:01 优化完成，输出标志: -2
2025-12-29 16:37:01 目标函数值: 0.056233
2025-12-29 16:37:01 未找到可行解
2025-12-29 16:37:01 函数评估次数: 671
2025-12-29 16:37:01 一阶最优性: 5.975900e-01
2025-12-29 16:37:01 约束违反值: 1.648900e+03
2025-12-29 16:37:01 实际换手率: 0.0000 (限制: 1.0000)
2025-12-29 16:37:01 换手率基准权重总和: 1.0000
2025-12-29 16:37:01 最终权重总和: 1.0000
2025-12-29 16:37:01 最大权重变化: 0.0000 (股票: 000001.SZ)
2025-12-29 16:37:01 投资组合风险: 0.000426
2025-12-29 16:37:01 最终分数: -0.056233
2025-12-29 16:37:01 权重总和: 1.000001
2025-12-29 16:37:01 风格风险维度: 11x1
2025-12-29 16:37:01 行业风险维度: 30x1
2025-12-29 16:37:01 行业风险比率维度: 30x1
2025-12-29 16:37:01 优化完成，总时间: 0.71秒
2025-12-29 16:37:01 优化完成: vp08_hs300_HB_2 - 2025-11-03
2025-12-29 16:37:01 正在优化: vp08_hs300_HB_2 - 2025-11-04
2025-12-29 16:37:01 MATLAB函数开始处理路径: E:\test\yfr\vp08_hs300_HB_2\2025-11-04
2025-12-29 16:37:01 配置文件不存在，使用默认配置
2025-12-29 16:37:01 使用指定的并行工作进程数: 6
2025-12-29 16:37:01 配置并行计算，最大工作进程数: 6
2025-12-29 16:37:01 复用现有并行池，6个工作进程
2025-12-29 16:37:01 开始读取数据...
2025-12-29 16:37:01 开始读取数据: E:\test\yfr\vp08_hs300_HB_2\2025-11-04
2025-12-29 16:37:01 风格因子数量: 11
2025-12-29 16:37:01 风格因子表类型: table, 维度: 11x1
2025-12-29 16:37:01 行业因子数量: 30
2025-12-29 16:37:01 行业因子表类型: table, 维度: 30x1
2025-12-29 16:37:01 股票风险暴露包含字段: data, textdata, colheaders
2025-12-29 16:37:01 股票风险暴露数据类型: double, 维度: 320x39
2025-12-29 16:37:01 股票分数包含字段: data, textdata, colheaders
2025-12-29 16:37:01 股票分数数据类型: double, 维度: 320x1
2025-12-29 16:37:01 权重下限包含字段: data, textdata, colheaders
2025-12-29 16:37:01 权重下限数据类型: double, 维度: 320x1
2025-12-29 16:37:01 权重上限包含字段: data, textdata, colheaders
2025-12-29 16:37:01 权重上限数据类型: double, 维度: 320x1
2025-12-29 16:37:01 指数初始权重包含字段: data, textdata, colheaders
2025-12-29 16:37:01 指数初始权重数据类型: double, 维度: 320x1
2025-12-29 16:37:01 股票特异风险包含字段: data, textdata, colheaders
2025-12-29 16:37:01 股票特异风险数据类型: double, 维度: 1x320
2025-12-29 16:37:01 因子协方差包含字段: data, textdata, colheaders
2025-12-29 16:37:01 因子协方差数据类型: double, 维度: 39x39
2025-12-29 16:37:01 因子约束上限数据类型: double, 维度: 1x40
2025-12-29 16:37:01 跟踪误差约束: 0.080000
2025-12-29 16:37:01 处理后的因子约束上限维度: 39x1
2025-12-29 16:37:01 换手率约束包含字段: data, textdata, rowheaders
2025-12-29 16:37:01 最大换手率限制: 1.00
2025-12-29 16:37:01 从配置文件读取权重：分数权重=1.00, 夏普比率权重=0.00
2025-12-29 16:37:01 股票数量: 320
2025-12-29 16:37:01 警告: 因子约束上限向量长度不足，需41，实际为39
2025-12-29 16:37:01 已扩展因子约束上限向量长度至41
2025-12-29 16:37:01 警告: 因子约束下限向量长度不足，需41，实际为39
2025-12-29 16:37:01 已扩展因子约束下限向量长度至41
2025-12-29 16:37:01 风格权重上限维度: 11x1
2025-12-29 16:37:01 风格权重下限维度: 11x1
2025-12-29 16:37:01 行业权重上限维度: 30x1
2025-12-29 16:37:01 行业权重下限维度: 30x1
2025-12-29 16:37:01 警告: 股票风险暴露维度不足，需41列，实际只有39列
2025-12-29 16:37:01 警告: 指数风险暴露维度不足，需41列，实际只有39列
2025-12-29 16:37:01 风格风险暴露维度: 320x11
2025-12-29 16:37:01 行业风险暴露维度: 320x28
2025-12-29 16:37:01 指数风格风险暴露维度: 11x1
2025-12-29 16:37:01 指数行业风险暴露维度: 30x1
2025-12-29 16:37:01 计算协方差矩阵...
2025-12-29 16:37:01 将股票特异风险转换为列向量，维度: 320x1
2025-12-29 16:37:01 协方差矩阵不是正定的，最小特征值: -0.000000，添加正则化项
2025-12-29 16:37:01 协方差矩阵维度: 320x320
2025-12-29 16:37:01 初始权重包含字段: data, textdata, colheaders
2025-12-29 16:37:01 初始权重数据类型: double, 维度: 320x1
2025-12-29 16:37:01 昨天权重数据维度: 320x1, 代码数量: 320
2025-12-29 16:37:01 今天代码数量: 320
2025-12-29 16:37:01 昨天权重总和: 1.000001
2025-12-29 16:37:01 成功匹配股票代码: 299/320
2025-12-29 16:37:01 换手率基准权重总和: 1.000001
2025-12-29 16:37:02 使用昨天权重作为换手率计算基准（按代码匹配）
2025-12-29 16:37:02 检测到yes文件，应用权重约束...
2025-12-29 16:37:02 代码数量: 320, 权重数量: 320，允许权重约束
2025-12-29 16:37:02 应用yes权重后年化跟踪误差项为：0.019179
2025-12-29 16:37:02 权重约束应用完成，最终权重维度: 320x1
2025-12-29 16:37:02 转置后的股票分数维度: 1x320
2025-12-29 16:37:02 目标函数设置：分数权重=1.00, 夏普比率权重=0.00
2025-12-29 16:37:02 调试目标函数计算...
2025-12-29 16:37:02 协方差矩阵V检查:
2025-12-29 16:37:02   V维度: 320x320
2025-12-29 16:37:02   V中的NaN数量: 0
2025-12-29 16:37:02   V中的Inf数量: 0
2025-12-29 16:37:02   V中的负数数量: 17098
2025-12-29 16:37:02   V的最小值: -0.000162
2025-12-29 16:37:02   V的最大值: 0.003646
2025-12-29 16:37:02   V的最小特征值: 0.000001
2025-12-29 16:37:02 分数组件: 0.377640
2025-12-29 16:37:02 风险组件 (x'Vx*252): 0.040001
2025-12-29 16:37:02 风险标准差: 0.200002
2025-12-29 16:37:02 夏普比率组件: 1.888181
2025-12-29 16:37:02 目标函数值: 0.377640
2025-12-29 16:37:02 警告: 初始点权重和(1.002914)偏离1.0，进行归一化调整
2025-12-29 16:37:02 初始解维度: 320x1
2025-12-29 16:37:02 下界维度: 320x1
2025-12-29 16:37:02 上界维度: 320x1
2025-12-29 16:37:02 验证初始点:
2025-12-29 16:37:02 初始点 x0 中的 NaN: 0, Inf: 0
2025-12-29 16:37:02 初始点 x0 范围: [0.000000, 0.041606]
2025-12-29 16:37:02 初始点 x0 和: 1.000000
2025-12-29 16:37:02 初始点约束条件 g0 中的 NaN: 0, Inf: 0
2025-12-29 16:37:02 初始点约束条件 g0 范围: [-115333.001913, 1242.108949]
2025-12-29 16:37:02 违反的约束数量: 29 / 84
2025-12-29 16:37:02 违反的约束详情:
2025-12-29 16:37:02   风格因子上限违反: 0 / 11
2025-12-29 16:37:02   风格因子下限违反: 3 / 11
2025-12-29 16:37:02   行业因子上限违反: 0 / 30
2025-12-29 16:37:02   行业因子下限违反: 26 / 30
2025-12-29 16:37:02   跟踪误差约束违反: -0.078935 (限制: 0.080000)
2025-12-29 16:37:02   换手率约束违反: -0.994280 (限制: 1.000000)
2025-12-29 16:37:02 线性等式约束维度: Aeq(1x320), beq(1x1)
2025-12-29 16:37:02 优化选项设置完成: 算法=sqp, 最大函数评估次数=800000, 并行计算=true
2025-12-29 16:37:02 开始求解优化问题...
2025-12-29 16:37:02 开始求解优化问题
2025-12-29 16:37:02 fmincon 返回: exitflag=-2, fval=0.042659
2025-12-29 16:37:02 优化完成，输出标志: -2
2025-12-29 16:37:02 优化完成，输出标志: -2
2025-12-29 16:37:02 目标函数值: 0.042659
2025-12-29 16:37:02 未找到可行解
2025-12-29 16:37:02 函数评估次数: 671
2025-12-29 16:37:02 一阶最优性: 5.975900e-01
2025-12-29 16:37:02 约束违反值: 1.242109e+03
2025-12-29 16:37:02 实际换手率: 0.0058 (限制: 1.0000)
2025-12-29 16:37:02 换手率基准权重总和: 1.0000
2025-12-29 16:37:02 最终权重总和: 1.0001
2025-12-29 16:37:02 最大权重变化: 0.0005 (股票: 300274.SZ)
2025-12-29 16:37:02 投资组合风险: 0.001071
2025-12-29 16:37:02 最终分数: -0.042659
2025-12-29 16:37:02 权重总和: 1.000063
2025-12-29 16:37:02 风格风险维度: 11x1
2025-12-29 16:37:02 行业风险维度: 30x1
2025-12-29 16:37:02 行业风险比率维度: 30x1
2025-12-29 16:37:02 优化完成，总时间: 0.84秒
2025-12-29 16:37:02 优化完成: vp08_hs300_HB_2 - 2025-11-04
2025-12-29 16:37:02 投资组合 vp08_hs300_HB_2 优化完成
2025-12-29 16:37:02 所有投资组合批量优化完成
2025-12-29 16:37:02 正在读取配置文件: 
2025-12-29 16:37:03 从配置文件读取到 2 个投资组合
2025-12-29 16:37:03 
处理投资组合: vp08_hs300_HB_1 (yfr)
2025-12-29 16:37:03 工作日列表: 2025-11-01 到 2025-11-06，共 4 天
2025-12-29 16:37:03   日期范围: 2025-11-01 到 2025-11-06，共 4 个工作日
2025-12-29 16:37:03 
处理投资组合: vp08_hs300_HB_2 (yfr)
2025-12-29 16:37:04 工作日列表: 2025-11-02 到 2025-11-04，共 2 天
2025-12-29 16:37:04   日期范围: 2025-11-02 到 2025-11-04，共 2 个工作日
2025-12-29 16:37:06 Python return status: 0
2025-12-29 16:37:06 Python output:
2025-12-29 16:37:05 INFO     root: 上传 3140 行数据到表 yfr (database: portfolio_backtest)
2025-12-29 16:37:06 INFO     importer: 导入 1880 行到 portfolio_backtest.yfr
2025-12-29 17:05:18 Python return status: 0
2025-12-29 17:08:48 从配置文件读取到 2 个投资组合
2025-12-29 17:08:48 
处理投资组合: vp08_hs300_HB_1 
2025-12-29 17:08:48   日期范围: 2025-11-01 到 2025-11-06
2025-12-29 17:08:48 工作日列表: 2025-11-01 到 2025-11-06，共 4 天
2025-12-29 17:08:51 目标股票数量: 310
2025-12-29 17:08:51 最终股票数量: 310 (其中指数成分股: 299, top股票: 10, 补充股票: 1)
2025-12-29 17:08:56 目标股票数量: 310
2025-12-29 17:08:56 最终股票数量: 310 (其中指数成分股: 299, top股票: 10, 补充股票: 1)
2025-12-29 17:09:00 目标股票数量: 310
2025-12-29 17:09:00 最终股票数量: 310 (其中指数成分股: 299, top股票: 10, 补充股票: 1)
2025-12-29 17:09:05 目标股票数量: 310
2025-12-29 17:09:05 最终股票数量: 310 (其中指数成分股: 299, top股票: 10, 补充股票: 1)
2025-12-29 17:09:06 
处理投资组合: vp08_hs300_HB_2 
2025-12-29 17:09:06   日期范围: 2025-11-02 到 2025-11-04
2025-12-29 17:09:07 工作日列表: 2025-11-02 到 2025-11-04，共 2 天
2025-12-29 17:09:09 目标股票数量: 320
2025-12-29 17:09:09 最终股票数量: 320 (其中指数成分股: 299, top股票: 10, 补充股票: 11)
2025-12-29 17:09:14 目标股票数量: 320
2025-12-29 17:09:14 最终股票数量: 320 (其中指数成分股: 299, top股票: 10, 补充股票: 11)
2025-12-29 17:09:16 从配置文件读取到 2 个投资组合
2025-12-29 17:09:16 开始优化投资组合: vp08_hs300_HB_1 
2025-12-29 17:09:16   日期范围: 2025-11-01 到 2025-11-06
2025-12-29 17:09:16 工作日列表: 2025-11-01 到 2025-11-06，共 4 天
2025-12-29 17:09:17 正在优化: vp08_hs300_HB_1 - 2025-11-03
2025-12-29 17:09:17 MATLAB函数开始处理路径: E:\test\yfr\vp08_hs300_HB_1\2025-11-03
2025-12-29 17:09:17 配置文件不存在，使用默认配置
2025-12-29 17:09:17 使用指定的并行工作进程数: 6
2025-12-29 17:09:17 配置并行计算，最大工作进程数: 6
2025-12-29 17:09:17 创建新并行池 6 个工作进程
2025-12-29 17:09:17 创建新并行池 6 个工作进程
2025-12-29 17:09:37 并行池创建完毕，NumWorkers=6
2025-12-29 17:09:38 无法在 worker 上添加 utils 路径: 运算符的使用无效。
2025-12-29 17:09:38 开始读取数据...
2025-12-29 17:09:38 开始读取数据: E:\test\yfr\vp08_hs300_HB_1\2025-11-03
2025-12-29 17:09:38 风格因子数量: 11
2025-12-29 17:09:38 风格因子表类型: table, 维度: 11x1
2025-12-29 17:09:38 行业因子数量: 30
2025-12-29 17:09:38 行业因子表类型: table, 维度: 30x1
2025-12-29 17:09:38 股票风险暴露包含字段: data, textdata, colheaders
2025-12-29 17:09:38 股票风险暴露数据类型: double, 维度: 310x39
2025-12-29 17:09:38 股票分数包含字段: data, textdata, colheaders
2025-12-29 17:09:38 股票分数数据类型: double, 维度: 310x1
2025-12-29 17:09:38 权重下限包含字段: data, textdata, colheaders
2025-12-29 17:09:38 权重下限数据类型: double, 维度: 310x1
2025-12-29 17:09:38 权重上限包含字段: data, textdata, colheaders
2025-12-29 17:09:38 权重上限数据类型: double, 维度: 310x1
2025-12-29 17:09:38 指数初始权重包含字段: data, textdata, colheaders
2025-12-29 17:09:38 指数初始权重数据类型: double, 维度: 310x1
2025-12-29 17:09:38 股票特异风险包含字段: data, textdata, colheaders
2025-12-29 17:09:38 股票特异风险数据类型: double, 维度: 1x310
2025-12-29 17:09:38 因子协方差包含字段: data, textdata, colheaders
2025-12-29 17:09:38 因子协方差数据类型: double, 维度: 39x39
2025-12-29 17:09:38 因子约束上限数据类型: double, 维度: 1x40
2025-12-29 17:09:38 跟踪误差约束: 2.000000
2025-12-29 17:09:38 处理后的因子约束上限维度: 39x1
2025-12-29 17:09:38 换手率约束包含字段: data, textdata, rowheaders
2025-12-29 17:09:38 最大换手率限制: 1.00
2025-12-29 17:09:38 从配置文件读取权重：分数权重=1.00, 夏普比率权重=0.00
2025-12-29 17:09:38 股票数量: 310
2025-12-29 17:09:38 警告: 因子约束上限向量长度不足，需41，实际为39
2025-12-29 17:09:38 已扩展因子约束上限向量长度至41
2025-12-29 17:09:38 警告: 因子约束下限向量长度不足，需41，实际为39
2025-12-29 17:09:38 已扩展因子约束下限向量长度至41
2025-12-29 17:09:38 风格权重上限维度: 11x1
2025-12-29 17:09:38 风格权重下限维度: 11x1
2025-12-29 17:09:38 行业权重上限维度: 30x1
2025-12-29 17:09:38 行业权重下限维度: 30x1
2025-12-29 17:09:38 警告: 股票风险暴露维度不足，需41列，实际只有39列
2025-12-29 17:09:38 警告: 指数风险暴露维度不足，需41列，实际只有39列
2025-12-29 17:09:38 风格风险暴露维度: 310x11
2025-12-29 17:09:38 行业风险暴露维度: 310x28
2025-12-29 17:09:38 指数风格风险暴露维度: 11x1
2025-12-29 17:09:38 指数行业风险暴露维度: 30x1
2025-12-29 17:09:38 计算协方差矩阵...
2025-12-29 17:09:38 将股票特异风险转换为列向量，维度: 310x1
2025-12-29 17:09:38 协方差矩阵不是正定的，最小特征值: -0.000000，添加正则化项
2025-12-29 17:09:38 协方差矩阵维度: 310x310
2025-12-29 17:09:38 初始权重包含字段: data, textdata, colheaders
2025-12-29 17:09:38 初始权重数据类型: double, 维度: 310x1
2025-12-29 17:09:38 昨天权重数据维度: 310x1, 代码数量: 310
2025-12-29 17:09:38 今天代码数量: 310
2025-12-29 17:09:38 昨天权重总和: 1.000001
2025-12-29 17:09:38 成功匹配股票代码: 310/310
2025-12-29 17:09:38 换手率基准权重总和: 1.000001
2025-12-29 17:09:38 使用昨天权重作为换手率计算基准（按代码匹配）
2025-12-29 17:09:38 检测到yes文件，应用权重约束...
2025-12-29 17:09:38 代码数量: 310, 权重数量: 310，允许权重约束
2025-12-29 17:09:38 应用yes权重后年化跟踪误差项为：0.000079
2025-12-29 17:09:38 权重约束应用完成，最终权重维度: 310x1
2025-12-29 17:09:38 转置后的股票分数维度: 1x310
2025-12-29 17:09:38 目标函数设置：分数权重=1.00, 夏普比率权重=0.00
2025-12-29 17:09:38 调试目标函数计算...
2025-12-29 17:09:38 协方差矩阵V检查:
2025-12-29 17:09:38   V维度: 310x310
2025-12-29 17:09:38   V中的NaN数量: 0
2025-12-29 17:09:38   V中的Inf数量: 0
2025-12-29 17:09:38   V中的负数数量: 17106
2025-12-29 17:09:38   V的最小值: -0.000172
2025-12-29 17:09:38   V的最大值: 0.002369
2025-12-29 17:09:38   V的最小特征值: 0.000001
2025-12-29 17:09:38 分数组件: -0.014373
2025-12-29 17:09:38 风险组件 (x'Vx*252): 0.012643
2025-12-29 17:09:38 风险标准差: 0.112441
2025-12-29 17:09:38 夏普比率组件: -0.127831
2025-12-29 17:09:38 目标函数值: -0.014373
2025-12-29 17:09:38 警告: 初始点权重和(0.989146)偏离1.0，进行归一化调整
2025-12-29 17:09:38 初始解维度: 310x1
2025-12-29 17:09:38 下界维度: 310x1
2025-12-29 17:09:38 上界维度: 310x1
2025-12-29 17:09:38 验证初始点:
2025-12-29 17:09:38 初始点 x0 中的 NaN: 0, Inf: 0
2025-12-29 17:09:38 初始点 x0 范围: [0.000000, 0.037886]
2025-12-29 17:09:38 初始点 x0 和: 1.000000
2025-12-29 17:09:38 初始点约束条件 g0 中的 NaN: 0, Inf: 0
2025-12-29 17:09:38 初始点约束条件 g0 范围: [-115331.069061, 0.000113]
2025-12-29 17:09:38 违反的约束数量: 1 / 84
2025-12-29 17:09:38 违反的约束详情:
2025-12-29 17:09:38   风格因子上限违反: 1 / 11
2025-12-29 17:09:38   风格因子下限违反: 0 / 11
2025-12-29 17:09:38   行业因子上限违反: 0 / 30
2025-12-29 17:09:38   行业因子下限违反: 0 / 30
2025-12-29 17:09:38   跟踪误差约束违反: -1.991517 (限制: 2.000000)
2025-12-29 17:09:38   换手率约束违反: -0.978302 (限制: 1.000000)
2025-12-29 17:09:38 线性等式约束维度: Aeq(1x310), beq(1x1)
2025-12-29 17:09:38 优化选项设置完成: 算法=sqp, 最大函数评估次数=800000, 并行计算=true
2025-12-29 17:09:38 开始求解优化问题...
2025-12-29 17:09:38 开始求解优化问题
2025-12-29 17:09:38 fmincon 返回: exitflag=2, fval=0.021475
2025-12-29 17:09:38 找到更好的可行解，使用该解
2025-12-29 17:09:38 优化完成，输出标志: 2
2025-12-29 17:09:38 优化完成，输出标志: 2
2025-12-29 17:09:38 目标函数值: 0.021475
2025-12-29 17:09:38 优化成功完成：
2025-12-29 17:09:38   目标函数在可行域内呈现非递减趋势
2025-12-29 17:09:38   约束条件在可行域内满足要求
2025-12-29 17:09:38 函数评估次数: 644
2025-12-29 17:09:38 一阶最优性: 1.913130e-04
2025-12-29 17:09:38 约束违反值: 1.316857e-04
2025-12-29 17:09:38 实际换手率: 0.0216 (限制: 1.0000)
2025-12-29 17:09:38 换手率基准权重总和: 1.0000
2025-12-29 17:09:38 最终权重总和: 0.9999
2025-12-29 17:09:38 最大权重变化: 0.0010 (股票: 000880.SZ)
2025-12-29 17:09:38 投资组合风险: 0.008478
2025-12-29 17:09:38 最终分数: -0.021475
2025-12-29 17:09:38 权重总和: 0.999868
2025-12-29 17:09:38 风格风险维度: 11x1
2025-12-29 17:09:38 行业风险维度: 30x1
2025-12-29 17:09:38 行业风险比率维度: 30x1
2025-12-29 17:09:38 优化完成，总时间: 21.97秒
2025-12-29 17:09:38 优化完成: vp08_hs300_HB_1 - 2025-11-03
2025-12-29 17:09:38 正在优化: vp08_hs300_HB_1 - 2025-11-04
2025-12-29 17:09:38 MATLAB函数开始处理路径: E:\test\yfr\vp08_hs300_HB_1\2025-11-04
2025-12-29 17:09:38 配置文件不存在，使用默认配置
2025-12-29 17:09:39 使用指定的并行工作进程数: 6
2025-12-29 17:09:39 配置并行计算，最大工作进程数: 6
2025-12-29 17:09:39 复用现有并行池，6个工作进程
2025-12-29 17:09:39 开始读取数据...
2025-12-29 17:09:39 开始读取数据: E:\test\yfr\vp08_hs300_HB_1\2025-11-04
2025-12-29 17:09:39 风格因子数量: 11
2025-12-29 17:09:39 风格因子表类型: table, 维度: 11x1
2025-12-29 17:09:39 行业因子数量: 30
2025-12-29 17:09:39 行业因子表类型: table, 维度: 30x1
2025-12-29 17:09:39 股票风险暴露包含字段: data, textdata, colheaders
2025-12-29 17:09:39 股票风险暴露数据类型: double, 维度: 310x39
2025-12-29 17:09:39 股票分数包含字段: data, textdata, colheaders
2025-12-29 17:09:39 股票分数数据类型: double, 维度: 310x1
2025-12-29 17:09:39 权重下限包含字段: data, textdata, colheaders
2025-12-29 17:09:39 权重下限数据类型: double, 维度: 310x1
2025-12-29 17:09:39 权重上限包含字段: data, textdata, colheaders
2025-12-29 17:09:39 权重上限数据类型: double, 维度: 310x1
2025-12-29 17:09:39 指数初始权重包含字段: data, textdata, colheaders
2025-12-29 17:09:39 指数初始权重数据类型: double, 维度: 310x1
2025-12-29 17:09:39 股票特异风险包含字段: data, textdata, colheaders
2025-12-29 17:09:39 股票特异风险数据类型: double, 维度: 1x310
2025-12-29 17:09:39 因子协方差包含字段: data, textdata, colheaders
2025-12-29 17:09:39 因子协方差数据类型: double, 维度: 39x39
2025-12-29 17:09:39 因子约束上限数据类型: double, 维度: 1x40
2025-12-29 17:09:39 跟踪误差约束: 2.000000
2025-12-29 17:09:39 处理后的因子约束上限维度: 39x1
2025-12-29 17:09:39 换手率约束包含字段: data, textdata, rowheaders
2025-12-29 17:09:39 最大换手率限制: 1.00
2025-12-29 17:09:39 从配置文件读取权重：分数权重=1.00, 夏普比率权重=0.00
2025-12-29 17:09:39 股票数量: 310
2025-12-29 17:09:39 警告: 因子约束上限向量长度不足，需41，实际为39
2025-12-29 17:09:39 已扩展因子约束上限向量长度至41
2025-12-29 17:09:39 警告: 因子约束下限向量长度不足，需41，实际为39
2025-12-29 17:09:39 已扩展因子约束下限向量长度至41
2025-12-29 17:09:39 风格权重上限维度: 11x1
2025-12-29 17:09:39 风格权重下限维度: 11x1
2025-12-29 17:09:39 行业权重上限维度: 30x1
2025-12-29 17:09:39 行业权重下限维度: 30x1
2025-12-29 17:09:39 警告: 股票风险暴露维度不足，需41列，实际只有39列
2025-12-29 17:09:39 警告: 指数风险暴露维度不足，需41列，实际只有39列
2025-12-29 17:09:39 风格风险暴露维度: 310x11
2025-12-29 17:09:39 行业风险暴露维度: 310x28
2025-12-29 17:09:39 指数风格风险暴露维度: 11x1
2025-12-29 17:09:39 指数行业风险暴露维度: 30x1
2025-12-29 17:09:39 计算协方差矩阵...
2025-12-29 17:09:39 将股票特异风险转换为列向量，维度: 310x1
2025-12-29 17:09:39 协方差矩阵不是正定的，最小特征值: -0.000000，添加正则化项
2025-12-29 17:09:39 协方差矩阵维度: 310x310
2025-12-29 17:09:39 初始权重包含字段: data, textdata, colheaders
2025-12-29 17:09:39 初始权重数据类型: double, 维度: 310x1
2025-12-29 17:09:39 昨天权重数据维度: 310x1, 代码数量: 310
2025-12-29 17:09:39 今天代码数量: 310
2025-12-29 17:09:39 昨天权重总和: 0.999866
2025-12-29 17:09:39 成功匹配股票代码: 299/310
2025-12-29 17:09:39 换手率基准权重总和: 0.999866
2025-12-29 17:09:39 使用昨天权重作为换手率计算基准（按代码匹配）
2025-12-29 17:09:39 检测到yes文件，应用权重约束...
2025-12-29 17:09:39 代码数量: 310, 权重数量: 310，允许权重约束
2025-12-29 17:09:39 应用yes权重后年化跟踪误差项为：0.918794
2025-12-29 17:09:39 权重约束应用完成，最终权重维度: 310x1
2025-12-29 17:09:39 转置后的股票分数维度: 1x310
2025-12-29 17:09:39 目标函数设置：分数权重=1.00, 夏普比率权重=0.00
2025-12-29 17:09:39 调试目标函数计算...
2025-12-29 17:09:39 协方差矩阵V检查:
2025-12-29 17:09:39   V维度: 310x310
2025-12-29 17:09:39   V中的NaN数量: 0
2025-12-29 17:09:39   V中的Inf数量: 0
2025-12-29 17:09:39   V中的负数数量: 15794
2025-12-29 17:09:39   V的最小值: -0.000162
2025-12-29 17:09:39   V的最大值: 0.003646
2025-12-29 17:09:39   V的最小特征值: 0.000001
2025-12-29 17:09:39 分数组件: 0.557346
2025-12-29 17:09:39 风险组件 (x'Vx*252): 0.943057
2025-12-29 17:09:39 风险标准差: 0.971111
2025-12-29 17:09:39 夏普比率组件: 0.573926
2025-12-29 17:09:39 目标函数值: 0.557346
2025-12-29 17:09:39 警告: 初始点权重和(0.993965)偏离1.0，进行归一化调整
2025-12-29 17:09:39 初始解维度: 310x1
2025-12-29 17:09:39 下界维度: 310x1
2025-12-29 17:09:39 上界维度: 310x1
2025-12-29 17:09:39 验证初始点:
2025-12-29 17:09:39 初始点 x0 中的 NaN: 0, Inf: 0
2025-12-29 17:09:39 初始点 x0 范围: [0.000000, 0.041520]
2025-12-29 17:09:39 初始点 x0 和: 1.000000
2025-12-29 17:09:39 初始点约束条件 g0 中的 NaN: 0, Inf: 0
2025-12-29 17:09:39 初始点约束条件 g0 范围: [-115333.034440, 0.004289]
2025-12-29 17:09:39 违反的约束数量: 1 / 84
2025-12-29 17:09:39 违反的约束详情:
2025-12-29 17:09:39   风格因子上限违反: 1 / 11
2025-12-29 17:09:39   风格因子下限违反: 0 / 11
2025-12-29 17:09:39   行业因子上限违反: 0 / 30
2025-12-29 17:09:39   行业因子下限违反: 0 / 30
2025-12-29 17:09:39   跟踪误差约束违反: -1.993865 (限制: 2.000000)
2025-12-29 17:09:39   换手率约束违反: -0.917515 (限制: 1.000000)
2025-12-29 17:09:39 线性等式约束维度: Aeq(1x310), beq(1x1)
2025-12-29 17:09:39 优化选项设置完成: 算法=sqp, 最大函数评估次数=800000, 并行计算=true
2025-12-29 17:09:39 开始求解优化问题...
2025-12-29 17:09:39 开始求解优化问题
2025-12-29 17:09:39 fmincon 返回: exitflag=1, fval=0.016662
2025-12-29 17:09:39 找到更好的可行解，使用该解
2025-12-29 17:09:39 优化完成，输出标志: 1
2025-12-29 17:09:39 优化完成，输出标志: 1
2025-12-29 17:09:39 目标函数值: 0.016554
2025-12-29 17:09:39 优化成功完成：
2025-12-29 17:09:39   找到满足约束条件的局部最小值
2025-12-29 17:09:39 函数评估次数: 1864
2025-12-29 17:09:39 一阶最优性: 1.609823e-15
2025-12-29 17:09:39 约束违反值: 2.220446e-16
2025-12-29 17:09:39 检测到 11 个负数权重，将其设为0并重新归一化
2025-12-29 17:09:39 实际换手率: 0.2476 (限制: 1.0000)
2025-12-29 17:09:39 换手率基准权重总和: 0.9999
2025-12-29 17:09:39 最终权重总和: 1.0000
2025-12-29 17:09:39 最大权重变化: 0.0212 (股票: 600150.SH)
2025-12-29 17:09:39 投资组合风险: 0.010083
2025-12-29 17:09:39 最终分数: -0.016554
2025-12-29 17:09:39 权重总和: 1.000000
2025-12-29 17:09:39 风格风险维度: 11x1
2025-12-29 17:09:39 行业风险维度: 30x1
2025-12-29 17:09:39 行业风险比率维度: 30x1
2025-12-29 17:09:39 优化完成，总时间: 0.73秒
2025-12-29 17:09:39 优化完成: vp08_hs300_HB_1 - 2025-11-04
2025-12-29 17:09:39 正在优化: vp08_hs300_HB_1 - 2025-11-05
2025-12-29 17:09:39 MATLAB函数开始处理路径: E:\test\yfr\vp08_hs300_HB_1\2025-11-05
2025-12-29 17:09:39 配置文件不存在，使用默认配置
2025-12-29 17:09:39 使用指定的并行工作进程数: 6
2025-12-29 17:09:39 配置并行计算，最大工作进程数: 6
2025-12-29 17:09:39 复用现有并行池，6个工作进程
2025-12-29 17:09:39 开始读取数据...
2025-12-29 17:09:39 开始读取数据: E:\test\yfr\vp08_hs300_HB_1\2025-11-05
2025-12-29 17:09:39 风格因子数量: 11
2025-12-29 17:09:39 风格因子表类型: table, 维度: 11x1
2025-12-29 17:09:39 行业因子数量: 30
2025-12-29 17:09:39 行业因子表类型: table, 维度: 30x1
2025-12-29 17:09:39 股票风险暴露包含字段: data, textdata, colheaders
2025-12-29 17:09:39 股票风险暴露数据类型: double, 维度: 310x39
2025-12-29 17:09:39 股票分数包含字段: data, textdata, colheaders
2025-12-29 17:09:39 股票分数数据类型: double, 维度: 310x1
2025-12-29 17:09:39 权重下限包含字段: data, textdata, colheaders
2025-12-29 17:09:39 权重下限数据类型: double, 维度: 310x1
2025-12-29 17:09:39 权重上限包含字段: data, textdata, colheaders
2025-12-29 17:09:39 权重上限数据类型: double, 维度: 310x1
2025-12-29 17:09:39 指数初始权重包含字段: data, textdata, colheaders
2025-12-29 17:09:39 指数初始权重数据类型: double, 维度: 310x1
2025-12-29 17:09:39 股票特异风险包含字段: data, textdata, colheaders
2025-12-29 17:09:39 股票特异风险数据类型: double, 维度: 1x310
2025-12-29 17:09:39 因子协方差包含字段: data, textdata, colheaders
2025-12-29 17:09:39 因子协方差数据类型: double, 维度: 39x39
2025-12-29 17:09:39 因子约束上限数据类型: double, 维度: 1x40
2025-12-29 17:09:39 跟踪误差约束: 2.000000
2025-12-29 17:09:39 处理后的因子约束上限维度: 39x1
2025-12-29 17:09:39 换手率约束包含字段: data, textdata, rowheaders
2025-12-29 17:09:39 最大换手率限制: 1.00
2025-12-29 17:09:39 从配置文件读取权重：分数权重=1.00, 夏普比率权重=0.00
2025-12-29 17:09:39 股票数量: 310
2025-12-29 17:09:39 警告: 因子约束上限向量长度不足，需41，实际为39
2025-12-29 17:09:39 已扩展因子约束上限向量长度至41
2025-12-29 17:09:39 警告: 因子约束下限向量长度不足，需41，实际为39
2025-12-29 17:09:39 已扩展因子约束下限向量长度至41
2025-12-29 17:09:39 风格权重上限维度: 11x1
2025-12-29 17:09:39 风格权重下限维度: 11x1
2025-12-29 17:09:39 行业权重上限维度: 30x1
2025-12-29 17:09:39 行业权重下限维度: 30x1
2025-12-29 17:09:39 警告: 股票风险暴露维度不足，需41列，实际只有39列
2025-12-29 17:09:39 警告: 指数风险暴露维度不足，需41列，实际只有39列
2025-12-29 17:09:39 风格风险暴露维度: 310x11
2025-12-29 17:09:39 行业风险暴露维度: 310x28
2025-12-29 17:09:39 指数风格风险暴露维度: 11x1
2025-12-29 17:09:39 指数行业风险暴露维度: 30x1
2025-12-29 17:09:39 计算协方差矩阵...
2025-12-29 17:09:39 将股票特异风险转换为列向量，维度: 310x1
2025-12-29 17:09:39 协方差矩阵维度: 310x310
2025-12-29 17:09:39 初始权重包含字段: data, textdata, colheaders
2025-12-29 17:09:39 初始权重数据类型: double, 维度: 310x1
2025-12-29 17:09:39 昨天权重数据维度: 310x1, 代码数量: 310
2025-12-29 17:09:39 今天代码数量: 310
2025-12-29 17:09:39 昨天权重总和: 1.000000
2025-12-29 17:09:39 成功匹配股票代码: 299/310
2025-12-29 17:09:39 换手率基准权重总和: 1.000000
2025-12-29 17:09:39 使用昨天权重作为换手率计算基准（按代码匹配）
2025-12-29 17:09:39 检测到yes文件，应用权重约束...
2025-12-29 17:09:39 代码数量: 310, 权重数量: 310，允许权重约束
2025-12-29 17:09:39 应用yes权重后年化跟踪误差项为：0.165445
2025-12-29 17:09:39 权重约束应用完成，最终权重维度: 310x1
2025-12-29 17:09:39 转置后的股票分数维度: 1x310
2025-12-29 17:09:39 目标函数设置：分数权重=1.00, 夏普比率权重=0.00
2025-12-29 17:09:39 调试目标函数计算...
2025-12-29 17:09:39 协方差矩阵V检查:
2025-12-29 17:09:39   V维度: 310x310
2025-12-29 17:09:39   V中的NaN数量: 0
2025-12-29 17:09:39   V中的Inf数量: 0
2025-12-29 17:09:39   V中的负数数量: 19578
2025-12-29 17:09:39   V的最小值: -0.000187
2025-12-29 17:09:39   V的最大值: 0.003655
2025-12-29 17:09:39   V的最小特征值: 0.000000
2025-12-29 17:09:39 分数组件: 0.608929
2025-12-29 17:09:39 风险组件 (x'Vx*252): 0.193324
2025-12-29 17:09:39 风险标准差: 0.439686
2025-12-29 17:09:39 夏普比率组件: 1.384918
2025-12-29 17:09:39 目标函数值: 0.608929
2025-12-29 17:09:39 警告: 初始点权重和(0.966187)偏离1.0，进行归一化调整
2025-12-29 17:09:39 初始解维度: 310x1
2025-12-29 17:09:39 下界维度: 310x1
2025-12-29 17:09:39 上界维度: 310x1
2025-12-29 17:09:39 验证初始点:
2025-12-29 17:09:40 初始点 x0 中的 NaN: 0, Inf: 0
2025-12-29 17:09:40 初始点 x0 范围: [0.000000, 0.042752]
2025-12-29 17:09:40 初始点 x0 和: 1.000000
2025-12-29 17:09:40 初始点约束条件 g0 中的 NaN: 0, Inf: 0
2025-12-29 17:09:40 初始点约束条件 g0 范围: [-114901.016919, 0.000770]
2025-12-29 17:09:40 违反的约束数量: 1 / 84
2025-12-29 17:09:40 违反的约束详情:
2025-12-29 17:09:40   风格因子上限违反: 0 / 11
2025-12-29 17:09:40   风格因子下限违反: 0 / 11
2025-12-29 17:09:40   行业因子上限违反: 1 / 30
2025-12-29 17:09:40   行业因子下限违反: 0 / 30
2025-12-29 17:09:40   跟踪误差约束违反: -1.997172 (限制: 2.000000)
2025-12-29 17:09:40   换手率约束违反: -0.859087 (限制: 1.000000)
2025-12-29 17:09:40 线性等式约束维度: Aeq(1x310), beq(1x1)
2025-12-29 17:09:40 优化选项设置完成: 算法=sqp, 最大函数评估次数=800000, 并行计算=true
2025-12-29 17:09:40 开始求解优化问题...
2025-12-29 17:09:40 开始求解优化问题
2025-12-29 17:09:40 fmincon 返回: exitflag=1, fval=-0.080530
2025-12-29 17:09:40 找到更好的可行解，使用该解
2025-12-29 17:09:40 优化完成，输出标志: 1
2025-12-29 17:09:40 优化完成，输出标志: 1
2025-12-29 17:09:40 目标函数值: -0.080530
2025-12-29 17:09:40 优化成功完成：
2025-12-29 17:09:40   找到满足约束条件的局部最小值
2025-12-29 17:09:40 函数评估次数: 1864
2025-12-29 17:09:40 一阶最优性: 5.119349e-12
2025-12-29 17:09:40 约束违反值: 2.220338e-16
2025-12-29 17:09:40 检测到 11 个负数权重，将其设为0并重新归一化
2025-12-29 17:09:40 实际换手率: 0.2585 (限制: 1.0000)
2025-12-29 17:09:40 换手率基准权重总和: 1.0000
2025-12-29 17:09:40 最终权重总和: 1.0000
2025-12-29 17:09:40 最大权重变化: 0.0206 (股票: 600150.SH)
2025-12-29 17:09:40 投资组合风险: 0.009822
2025-12-29 17:09:40 最终分数: 0.080530
2025-12-29 17:09:40 权重总和: 1.000000
2025-12-29 17:09:40 风格风险维度: 11x1
2025-12-29 17:09:40 行业风险维度: 30x1
2025-12-29 17:09:40 行业风险比率维度: 30x1
2025-12-29 17:09:40 优化完成，总时间: 0.76秒
2025-12-29 17:09:40 优化完成: vp08_hs300_HB_1 - 2025-11-05
2025-12-29 17:09:40 正在优化: vp08_hs300_HB_1 - 2025-11-06
2025-12-29 17:09:40 MATLAB函数开始处理路径: E:\test\yfr\vp08_hs300_HB_1\2025-11-06
2025-12-29 17:09:40 配置文件不存在，使用默认配置
2025-12-29 17:09:40 使用指定的并行工作进程数: 6
2025-12-29 17:09:40 配置并行计算，最大工作进程数: 6
2025-12-29 17:09:40 复用现有并行池，6个工作进程
2025-12-29 17:09:40 开始读取数据...
2025-12-29 17:09:40 开始读取数据: E:\test\yfr\vp08_hs300_HB_1\2025-11-06
2025-12-29 17:09:40 风格因子数量: 11
2025-12-29 17:09:40 风格因子表类型: table, 维度: 11x1
2025-12-29 17:09:40 行业因子数量: 30
2025-12-29 17:09:40 行业因子表类型: table, 维度: 30x1
2025-12-29 17:09:40 股票风险暴露包含字段: data, textdata, colheaders
2025-12-29 17:09:40 股票风险暴露数据类型: double, 维度: 310x39
2025-12-29 17:09:40 股票分数包含字段: data, textdata, colheaders
2025-12-29 17:09:40 股票分数数据类型: double, 维度: 310x1
2025-12-29 17:09:40 权重下限包含字段: data, textdata, colheaders
2025-12-29 17:09:40 权重下限数据类型: double, 维度: 310x1
2025-12-29 17:09:40 权重上限包含字段: data, textdata, colheaders
2025-12-29 17:09:40 权重上限数据类型: double, 维度: 310x1
2025-12-29 17:09:40 指数初始权重包含字段: data, textdata, colheaders
2025-12-29 17:09:40 指数初始权重数据类型: double, 维度: 310x1
2025-12-29 17:09:40 股票特异风险包含字段: data, textdata, colheaders
2025-12-29 17:09:40 股票特异风险数据类型: double, 维度: 1x310
2025-12-29 17:09:40 因子协方差包含字段: data, textdata, colheaders
2025-12-29 17:09:40 因子协方差数据类型: double, 维度: 39x39
2025-12-29 17:09:40 因子约束上限数据类型: double, 维度: 1x40
2025-12-29 17:09:40 跟踪误差约束: 2.000000
2025-12-29 17:09:40 处理后的因子约束上限维度: 39x1
2025-12-29 17:09:40 换手率约束包含字段: data, textdata, rowheaders
2025-12-29 17:09:40 最大换手率限制: 1.00
2025-12-29 17:09:40 从配置文件读取权重：分数权重=1.00, 夏普比率权重=0.00
2025-12-29 17:09:40 股票数量: 310
2025-12-29 17:09:40 警告: 因子约束上限向量长度不足，需41，实际为39
2025-12-29 17:09:40 已扩展因子约束上限向量长度至41
2025-12-29 17:09:40 警告: 因子约束下限向量长度不足，需41，实际为39
2025-12-29 17:09:40 已扩展因子约束下限向量长度至41
2025-12-29 17:09:40 风格权重上限维度: 11x1
2025-12-29 17:09:40 风格权重下限维度: 11x1
2025-12-29 17:09:40 行业权重上限维度: 30x1
2025-12-29 17:09:40 行业权重下限维度: 30x1
2025-12-29 17:09:40 警告: 股票风险暴露维度不足，需41列，实际只有39列
2025-12-29 17:09:40 警告: 指数风险暴露维度不足，需41列，实际只有39列
2025-12-29 17:09:40 风格风险暴露维度: 310x11
2025-12-29 17:09:40 行业风险暴露维度: 310x28
2025-12-29 17:09:40 指数风格风险暴露维度: 11x1
2025-12-29 17:09:40 指数行业风险暴露维度: 30x1
2025-12-29 17:09:40 计算协方差矩阵...
2025-12-29 17:09:40 将股票特异风险转换为列向量，维度: 310x1
2025-12-29 17:09:40 协方差矩阵维度: 310x310
2025-12-29 17:09:40 初始权重包含字段: data, textdata, colheaders
2025-12-29 17:09:40 初始权重数据类型: double, 维度: 310x1
2025-12-29 17:09:40 昨天权重数据维度: 310x1, 代码数量: 310
2025-12-29 17:09:40 今天代码数量: 310
2025-12-29 17:09:40 昨天权重总和: 0.999995
2025-12-29 17:09:40 成功匹配股票代码: 299/310
2025-12-29 17:09:40 换手率基准权重总和: 0.999995
2025-12-29 17:09:40 使用昨天权重作为换手率计算基准（按代码匹配）
2025-12-29 17:09:40 检测到yes文件，应用权重约束...
2025-12-29 17:09:40 代码数量: 310, 权重数量: 310，允许权重约束
2025-12-29 17:09:40 应用yes权重后年化跟踪误差项为：0.115993
2025-12-29 17:09:40 权重约束应用完成，最终权重维度: 310x1
2025-12-29 17:09:40 转置后的股票分数维度: 1x310
2025-12-29 17:09:40 目标函数设置：分数权重=1.00, 夏普比率权重=0.00
2025-12-29 17:09:40 调试目标函数计算...
2025-12-29 17:09:40 协方差矩阵V检查:
2025-12-29 17:09:40   V维度: 310x310
2025-12-29 17:09:40   V中的NaN数量: 0
2025-12-29 17:09:40   V中的Inf数量: 0
2025-12-29 17:09:40   V中的负数数量: 19864
2025-12-29 17:09:40   V的最小值: -0.000185
2025-12-29 17:09:40   V的最大值: 0.003656
2025-12-29 17:09:40   V的最小特征值: 0.000000
2025-12-29 17:09:40 分数组件: 0.536521
2025-12-29 17:09:40 风险组件 (x'Vx*252): 0.144160
2025-12-29 17:09:40 风险标准差: 0.379685
2025-12-29 17:09:40 夏普比率组件: 1.413070
2025-12-29 17:09:40 目标函数值: 0.536521
2025-12-29 17:09:40 警告: 初始点权重和(0.966012)偏离1.0，进行归一化调整
2025-12-29 17:09:40 初始解维度: 310x1
2025-12-29 17:09:40 下界维度: 310x1
2025-12-29 17:09:40 上界维度: 310x1
2025-12-29 17:09:40 验证初始点:
2025-12-29 17:09:40 初始点 x0 中的 NaN: 0, Inf: 0
2025-12-29 17:09:40 初始点 x0 范围: [0.000000, 0.046245]
2025-12-29 17:09:40 初始点 x0 和: 1.000000
2025-12-29 17:09:40 初始点约束条件 g0 中的 NaN: 0, Inf: 0
2025-12-29 17:09:40 初始点约束条件 g0 范围: [-115501.020826, 0.007535]
2025-12-29 17:09:40 违反的约束数量: 1 / 84
2025-12-29 17:09:40 违反的约束详情:
2025-12-29 17:09:40   风格因子上限违反: 1 / 11
2025-12-29 17:09:40   风格因子下限违反: 0 / 11
2025-12-29 17:09:40   行业因子上限违反: 0 / 30
2025-12-29 17:09:40   行业因子下限违反: 0 / 30
2025-12-29 17:09:40   跟踪误差约束违反: -1.993497 (限制: 2.000000)
2025-12-29 17:09:40   换手率约束违反: -0.909284 (限制: 1.000000)
2025-12-29 17:09:40 线性等式约束维度: Aeq(1x310), beq(1x1)
2025-12-29 17:09:40 优化选项设置完成: 算法=sqp, 最大函数评估次数=800000, 并行计算=true
2025-12-29 17:09:40 开始求解优化问题...
2025-12-29 17:09:40 开始求解优化问题
2025-12-29 17:09:41 fmincon 返回: exitflag=1, fval=-0.014294
2025-12-29 17:09:41 找到更好的可行解，使用该解
2025-12-29 17:09:41 优化完成，输出标志: 1
2025-12-29 17:09:41 优化完成，输出标志: 1
2025-12-29 17:09:41 目标函数值: -0.014294
2025-12-29 17:09:41 优化成功完成：
2025-12-29 17:09:41   找到满足约束条件的局部最小值
2025-12-29 17:09:41 函数评估次数: 4348
2025-12-29 17:09:41 一阶最优性: 6.939161e-12
2025-12-29 17:09:41 约束违反值: 2.218671e-31
2025-12-29 17:09:41 检测到 4 个负数权重，将其设为0并重新归一化
2025-12-29 17:09:41 实际换手率: 0.1686 (限制: 1.0000)
2025-12-29 17:09:41 换手率基准权重总和: 1.0000
2025-12-29 17:09:41 最终权重总和: 1.0000
2025-12-29 17:09:41 最大权重变化: 0.0138 (股票: 601688.SH)
2025-12-29 17:09:41 投资组合风险: 0.008040
2025-12-29 17:09:41 最终分数: 0.014294
2025-12-29 17:09:41 权重总和: 1.000000
2025-12-29 17:09:41 风格风险维度: 11x1
2025-12-29 17:09:41 行业风险维度: 30x1
2025-12-29 17:09:41 行业风险比率维度: 30x1
2025-12-29 17:09:41 优化完成，总时间: 0.87秒
2025-12-29 17:09:41 优化完成: vp08_hs300_HB_1 - 2025-11-06
2025-12-29 17:09:41 投资组合 vp08_hs300_HB_1 优化完成
2025-12-29 17:09:41 开始优化投资组合: vp08_hs300_HB_2 
2025-12-29 17:09:41   日期范围: 2025-11-02 到 2025-11-04
2025-12-29 17:09:41 工作日列表: 2025-11-02 到 2025-11-04，共 2 天
2025-12-29 17:09:41 正在优化: vp08_hs300_HB_2 - 2025-11-03
2025-12-29 17:09:41 MATLAB函数开始处理路径: E:\test\yfr\vp08_hs300_HB_2\2025-11-03
2025-12-29 17:09:41 配置文件不存在，使用默认配置
2025-12-29 17:09:41 使用指定的并行工作进程数: 6
2025-12-29 17:09:41 配置并行计算，最大工作进程数: 6
2025-12-29 17:09:41 复用现有并行池，6个工作进程
2025-12-29 17:09:41 开始读取数据...
2025-12-29 17:09:41 开始读取数据: E:\test\yfr\vp08_hs300_HB_2\2025-11-03
2025-12-29 17:09:41 风格因子数量: 11
2025-12-29 17:09:41 风格因子表类型: table, 维度: 11x1
2025-12-29 17:09:41 行业因子数量: 30
2025-12-29 17:09:41 行业因子表类型: table, 维度: 30x1
2025-12-29 17:09:41 股票风险暴露包含字段: data, textdata, colheaders
2025-12-29 17:09:41 股票风险暴露数据类型: double, 维度: 320x39
2025-12-29 17:09:41 股票分数包含字段: data, textdata, colheaders
2025-12-29 17:09:41 股票分数数据类型: double, 维度: 320x1
2025-12-29 17:09:41 权重下限包含字段: data, textdata, colheaders
2025-12-29 17:09:41 权重下限数据类型: double, 维度: 320x1
2025-12-29 17:09:41 权重上限包含字段: data, textdata, colheaders
2025-12-29 17:09:41 权重上限数据类型: double, 维度: 320x1
2025-12-29 17:09:41 指数初始权重包含字段: data, textdata, colheaders
2025-12-29 17:09:41 指数初始权重数据类型: double, 维度: 320x1
2025-12-29 17:09:41 股票特异风险包含字段: data, textdata, colheaders
2025-12-29 17:09:41 股票特异风险数据类型: double, 维度: 1x320
2025-12-29 17:09:41 因子协方差包含字段: data, textdata, colheaders
2025-12-29 17:09:41 因子协方差数据类型: double, 维度: 39x39
2025-12-29 17:09:41 因子约束上限数据类型: double, 维度: 1x40
2025-12-29 17:09:41 跟踪误差约束: 0.080000
2025-12-29 17:09:41 处理后的因子约束上限维度: 39x1
2025-12-29 17:09:42 换手率约束包含字段: data, textdata, rowheaders
2025-12-29 17:09:42 最大换手率限制: 1.00
2025-12-29 17:09:42 从配置文件读取权重：分数权重=1.00, 夏普比率权重=0.00
2025-12-29 17:09:42 股票数量: 320
2025-12-29 17:09:42 警告: 因子约束上限向量长度不足，需41，实际为39
2025-12-29 17:09:42 已扩展因子约束上限向量长度至41
2025-12-29 17:09:42 警告: 因子约束下限向量长度不足，需41，实际为39
2025-12-29 17:09:42 已扩展因子约束下限向量长度至41
2025-12-29 17:09:42 风格权重上限维度: 11x1
2025-12-29 17:09:42 风格权重下限维度: 11x1
2025-12-29 17:09:42 行业权重上限维度: 30x1
2025-12-29 17:09:42 行业权重下限维度: 30x1
2025-12-29 17:09:42 警告: 股票风险暴露维度不足，需41列，实际只有39列
2025-12-29 17:09:42 警告: 指数风险暴露维度不足，需41列，实际只有39列
2025-12-29 17:09:42 风格风险暴露维度: 320x11
2025-12-29 17:09:42 行业风险暴露维度: 320x28
2025-12-29 17:09:42 指数风格风险暴露维度: 11x1
2025-12-29 17:09:42 指数行业风险暴露维度: 30x1
2025-12-29 17:09:42 计算协方差矩阵...
2025-12-29 17:09:42 将股票特异风险转换为列向量，维度: 320x1
2025-12-29 17:09:42 协方差矩阵不是正定的，最小特征值: -0.000000，添加正则化项
2025-12-29 17:09:42 协方差矩阵维度: 320x320
2025-12-29 17:09:42 初始权重包含字段: data, textdata, colheaders
2025-12-29 17:09:42 初始权重数据类型: double, 维度: 320x1
2025-12-29 17:09:42 昨天权重数据维度: 320x1, 代码数量: 320
2025-12-29 17:09:42 今天代码数量: 320
2025-12-29 17:09:42 昨天权重总和: 1.000001
2025-12-29 17:09:42 成功匹配股票代码: 299/320
2025-12-29 17:09:42 换手率基准权重总和: 1.000001
2025-12-29 17:09:42 使用昨天权重作为换手率计算基准（按代码匹配）
2025-12-29 17:09:42 检测到yes文件，应用权重约束...
2025-12-29 17:09:42 代码数量: 320, 权重数量: 320，允许权重约束
2025-12-29 17:09:42 应用yes权重后年化跟踪误差项为：0.000000
2025-12-29 17:09:42 权重约束应用完成，最终权重维度: 320x1
2025-12-29 17:09:42 转置后的股票分数维度: 1x320
2025-12-29 17:09:42 目标函数设置：分数权重=1.00, 夏普比率权重=0.00
2025-12-29 17:09:42 调试目标函数计算...
2025-12-29 17:09:42 协方差矩阵V检查:
2025-12-29 17:09:42   V维度: 320x320
2025-12-29 17:09:42   V中的NaN数量: 0
2025-12-29 17:09:42   V中的Inf数量: 0
2025-12-29 17:09:42   V中的负数数量: 18022
2025-12-29 17:09:42   V的最小值: -0.000172
2025-12-29 17:09:42   V的最大值: 0.003604
2025-12-29 17:09:42   V的最小特征值: 0.000001
2025-12-29 17:09:42 分数组件: -0.056233
2025-12-29 17:09:42 风险组件 (x'Vx*252): 0.013119
2025-12-29 17:09:42 风险标准差: 0.114537
2025-12-29 17:09:42 夏普比率组件: -0.490960
2025-12-29 17:09:42 目标函数值: -0.056233
2025-12-29 17:09:42 初始解维度: 320x1
2025-12-29 17:09:42 下界维度: 320x1
2025-12-29 17:09:42 上界维度: 320x1
2025-12-29 17:09:42 验证初始点:
2025-12-29 17:09:42 初始点 x0 中的 NaN: 0, Inf: 0
2025-12-29 17:09:42 初始点 x0 范围: [0.000000, 0.041744]
2025-12-29 17:09:42 初始点 x0 和: 1.000001
2025-12-29 17:09:42 初始点约束条件 g0 中的 NaN: 0, Inf: 0
2025-12-29 17:09:42 初始点约束条件 g0 范围: [-115331.001483, 1648.899891]
2025-12-29 17:09:42 违反的约束数量: 30 / 84
2025-12-29 17:09:42 违反的约束详情:
2025-12-29 17:09:42   风格因子上限违反: 0 / 11
2025-12-29 17:09:42   风格因子下限违反: 4 / 11
2025-12-29 17:09:42   行业因子上限违反: 1 / 30
2025-12-29 17:09:42   行业因子下限违反: 25 / 30
2025-12-29 17:09:42   跟踪误差约束违反: -0.079574 (限制: 0.080000)
2025-12-29 17:09:42   换手率约束违反: -1.000000 (限制: 1.000000)
2025-12-29 17:09:42 线性等式约束维度: Aeq(1x320), beq(1x1)
2025-12-29 17:09:42 优化选项设置完成: 算法=sqp, 最大函数评估次数=800000, 并行计算=true
2025-12-29 17:09:42 开始求解优化问题...
2025-12-29 17:09:42 开始求解优化问题
2025-12-29 17:09:42 fmincon 返回: exitflag=-2, fval=0.056233
2025-12-29 17:09:42 优化完成，输出标志: -2
2025-12-29 17:09:42 优化完成，输出标志: -2
2025-12-29 17:09:42 目标函数值: 0.056233
2025-12-29 17:09:42 未找到可行解
2025-12-29 17:09:42 函数评估次数: 671
2025-12-29 17:09:42 一阶最优性: 5.975900e-01
2025-12-29 17:09:42 约束违反值: 1.648900e+03
2025-12-29 17:09:42 实际换手率: 0.0000 (限制: 1.0000)
2025-12-29 17:09:42 换手率基准权重总和: 1.0000
2025-12-29 17:09:42 最终权重总和: 1.0000
2025-12-29 17:09:42 最大权重变化: 0.0000 (股票: 000001.SZ)
2025-12-29 17:09:42 投资组合风险: 0.000426
2025-12-29 17:09:42 最终分数: -0.056233
2025-12-29 17:09:42 权重总和: 1.000001
2025-12-29 17:09:42 风格风险维度: 11x1
2025-12-29 17:09:42 行业风险维度: 30x1
2025-12-29 17:09:42 行业风险比率维度: 30x1
2025-12-29 17:09:42 优化完成，总时间: 0.76秒
2025-12-29 17:09:42 优化完成: vp08_hs300_HB_2 - 2025-11-03
2025-12-29 17:09:42 正在优化: vp08_hs300_HB_2 - 2025-11-04
2025-12-29 17:09:42 MATLAB函数开始处理路径: E:\test\yfr\vp08_hs300_HB_2\2025-11-04
2025-12-29 17:09:42 配置文件不存在，使用默认配置
2025-12-29 17:09:42 使用指定的并行工作进程数: 6
2025-12-29 17:09:42 配置并行计算，最大工作进程数: 6
2025-12-29 17:09:42 复用现有并行池，6个工作进程
2025-12-29 17:09:42 开始读取数据...
2025-12-29 17:09:42 开始读取数据: E:\test\yfr\vp08_hs300_HB_2\2025-11-04
2025-12-29 17:09:42 风格因子数量: 11
2025-12-29 17:09:42 风格因子表类型: table, 维度: 11x1
2025-12-29 17:09:42 行业因子数量: 30
2025-12-29 17:09:42 行业因子表类型: table, 维度: 30x1
2025-12-29 17:09:42 股票风险暴露包含字段: data, textdata, colheaders
2025-12-29 17:09:42 股票风险暴露数据类型: double, 维度: 320x39
2025-12-29 17:09:42 股票分数包含字段: data, textdata, colheaders
2025-12-29 17:09:42 股票分数数据类型: double, 维度: 320x1
2025-12-29 17:09:42 权重下限包含字段: data, textdata, colheaders
2025-12-29 17:09:42 权重下限数据类型: double, 维度: 320x1
2025-12-29 17:09:42 权重上限包含字段: data, textdata, colheaders
2025-12-29 17:09:42 权重上限数据类型: double, 维度: 320x1
2025-12-29 17:09:42 指数初始权重包含字段: data, textdata, colheaders
2025-12-29 17:09:42 指数初始权重数据类型: double, 维度: 320x1
2025-12-29 17:09:42 股票特异风险包含字段: data, textdata, colheaders
2025-12-29 17:09:42 股票特异风险数据类型: double, 维度: 1x320
2025-12-29 17:09:42 因子协方差包含字段: data, textdata, colheaders
2025-12-29 17:09:42 因子协方差数据类型: double, 维度: 39x39
2025-12-29 17:09:42 因子约束上限数据类型: double, 维度: 1x40
2025-12-29 17:09:42 跟踪误差约束: 0.080000
2025-12-29 17:09:42 处理后的因子约束上限维度: 39x1
2025-12-29 17:09:42 换手率约束包含字段: data, textdata, rowheaders
2025-12-29 17:09:42 最大换手率限制: 1.00
2025-12-29 17:09:42 从配置文件读取权重：分数权重=1.00, 夏普比率权重=0.00
2025-12-29 17:09:42 股票数量: 320
2025-12-29 17:09:42 警告: 因子约束上限向量长度不足，需41，实际为39
2025-12-29 17:09:42 已扩展因子约束上限向量长度至41
2025-12-29 17:09:42 警告: 因子约束下限向量长度不足，需41，实际为39
2025-12-29 17:09:42 已扩展因子约束下限向量长度至41
2025-12-29 17:09:42 风格权重上限维度: 11x1
2025-12-29 17:09:42 风格权重下限维度: 11x1
2025-12-29 17:09:42 行业权重上限维度: 30x1
2025-12-29 17:09:42 行业权重下限维度: 30x1
2025-12-29 17:09:42 警告: 股票风险暴露维度不足，需41列，实际只有39列
2025-12-29 17:09:42 警告: 指数风险暴露维度不足，需41列，实际只有39列
2025-12-29 17:09:42 风格风险暴露维度: 320x11
2025-12-29 17:09:42 行业风险暴露维度: 320x28
2025-12-29 17:09:42 指数风格风险暴露维度: 11x1
2025-12-29 17:09:42 指数行业风险暴露维度: 30x1
2025-12-29 17:09:42 计算协方差矩阵...
2025-12-29 17:09:42 将股票特异风险转换为列向量，维度: 320x1
2025-12-29 17:09:42 协方差矩阵不是正定的，最小特征值: -0.000000，添加正则化项
2025-12-29 17:09:42 协方差矩阵维度: 320x320
2025-12-29 17:09:42 初始权重包含字段: data, textdata, colheaders
2025-12-29 17:09:42 初始权重数据类型: double, 维度: 320x1
2025-12-29 17:09:42 昨天权重数据维度: 320x1, 代码数量: 320
2025-12-29 17:09:42 今天代码数量: 320
2025-12-29 17:09:42 昨天权重总和: 1.000001
2025-12-29 17:09:42 成功匹配股票代码: 299/320
2025-12-29 17:09:42 换手率基准权重总和: 1.000001
2025-12-29 17:09:42 使用昨天权重作为换手率计算基准（按代码匹配）
2025-12-29 17:09:42 检测到yes文件，应用权重约束...
2025-12-29 17:09:42 代码数量: 320, 权重数量: 320，允许权重约束
2025-12-29 17:09:42 应用yes权重后年化跟踪误差项为：0.019179
2025-12-29 17:09:42 权重约束应用完成，最终权重维度: 320x1
2025-12-29 17:09:42 转置后的股票分数维度: 1x320
2025-12-29 17:09:42 目标函数设置：分数权重=1.00, 夏普比率权重=0.00
2025-12-29 17:09:42 调试目标函数计算...
2025-12-29 17:09:42 协方差矩阵V检查:
2025-12-29 17:09:42   V维度: 320x320
2025-12-29 17:09:42   V中的NaN数量: 0
2025-12-29 17:09:42   V中的Inf数量: 0
2025-12-29 17:09:42   V中的负数数量: 17098
2025-12-29 17:09:42   V的最小值: -0.000162
2025-12-29 17:09:42   V的最大值: 0.003646
2025-12-29 17:09:42   V的最小特征值: 0.000001
2025-12-29 17:09:42 分数组件: 0.377640
2025-12-29 17:09:42 风险组件 (x'Vx*252): 0.040001
2025-12-29 17:09:42 风险标准差: 0.200002
2025-12-29 17:09:42 夏普比率组件: 1.888181
2025-12-29 17:09:42 目标函数值: 0.377640
2025-12-29 17:09:42 警告: 初始点权重和(1.002914)偏离1.0，进行归一化调整
2025-12-29 17:09:42 初始解维度: 320x1
2025-12-29 17:09:42 下界维度: 320x1
2025-12-29 17:09:42 上界维度: 320x1
2025-12-29 17:09:42 验证初始点:
2025-12-29 17:09:42 初始点 x0 中的 NaN: 0, Inf: 0
2025-12-29 17:09:42 初始点 x0 范围: [0.000000, 0.041606]
2025-12-29 17:09:42 初始点 x0 和: 1.000000
2025-12-29 17:09:42 初始点约束条件 g0 中的 NaN: 0, Inf: 0
2025-12-29 17:09:42 初始点约束条件 g0 范围: [-115333.001913, 1242.108949]
2025-12-29 17:09:42 违反的约束数量: 29 / 84
2025-12-29 17:09:42 违反的约束详情:
2025-12-29 17:09:42   风格因子上限违反: 0 / 11
2025-12-29 17:09:42   风格因子下限违反: 3 / 11
2025-12-29 17:09:42   行业因子上限违反: 0 / 30
2025-12-29 17:09:42   行业因子下限违反: 26 / 30
2025-12-29 17:09:42   跟踪误差约束违反: -0.078935 (限制: 0.080000)
2025-12-29 17:09:42   换手率约束违反: -0.994280 (限制: 1.000000)
2025-12-29 17:09:42 线性等式约束维度: Aeq(1x320), beq(1x1)
2025-12-29 17:09:42 优化选项设置完成: 算法=sqp, 最大函数评估次数=800000, 并行计算=true
2025-12-29 17:09:42 开始求解优化问题...
2025-12-29 17:09:42 开始求解优化问题
2025-12-29 17:09:43 fmincon 返回: exitflag=-2, fval=0.042659
2025-12-29 17:09:43 优化完成，输出标志: -2
2025-12-29 17:09:43 优化完成，输出标志: -2
2025-12-29 17:09:43 目标函数值: 0.042659
2025-12-29 17:09:43 未找到可行解
2025-12-29 17:09:43 函数评估次数: 671
2025-12-29 17:09:43 一阶最优性: 5.975900e-01
2025-12-29 17:09:43 约束违反值: 1.242109e+03
2025-12-29 17:09:43 实际换手率: 0.0058 (限制: 1.0000)
2025-12-29 17:09:43 换手率基准权重总和: 1.0000
2025-12-29 17:09:43 最终权重总和: 1.0001
2025-12-29 17:09:43 最大权重变化: 0.0005 (股票: 300274.SZ)
2025-12-29 17:09:43 投资组合风险: 0.001071
2025-12-29 17:09:43 最终分数: -0.042659
2025-12-29 17:09:43 权重总和: 1.000063
2025-12-29 17:09:43 风格风险维度: 11x1
2025-12-29 17:09:43 行业风险维度: 30x1
2025-12-29 17:09:43 行业风险比率维度: 30x1
2025-12-29 17:09:43 优化完成，总时间: 0.84秒
2025-12-29 17:09:43 优化完成: vp08_hs300_HB_2 - 2025-11-04
2025-12-29 17:09:43 投资组合 vp08_hs300_HB_2 优化完成
2025-12-29 17:09:43 所有投资组合批量优化完成
2025-12-29 17:09:43 正在读取配置文件: 
2025-12-29 17:09:44 从配置文件读取到 2 个投资组合
2025-12-29 17:09:44 
处理投资组合: vp08_hs300_HB_1 (yfr)
2025-12-29 17:09:44 工作日列表: 2025-11-01 到 2025-11-06，共 4 天
2025-12-29 17:09:44   日期范围: 2025-11-01 到 2025-11-06，共 4 个工作日
2025-12-29 17:09:44 
处理投资组合: vp08_hs300_HB_2 (yfr)
2025-12-29 17:09:44 工作日列表: 2025-11-02 到 2025-11-04，共 2 天
2025-12-29 17:09:44   日期范围: 2025-11-02 到 2025-11-04，共 2 个工作日
2025-12-29 17:09:46 Python return status: 0
2025-12-29 17:09:46 Python output:
2025-12-29 17:09:45 INFO     root: 上传 1240 行数据到表 yfr (database: portfolio_backtest)
2025-12-29 17:09:46 INFO     importer: 导入 1240 行到 portfolio_backtest.yfr
2025-12-29 17:13:35 Python return status: 0
2025-12-29 17:13:35 Python output:
2025-12-29 17:13:35 INFO     root: 上传 1880 行数据到表 yfr (database: portfolio_backtest)
2025-12-29 17:13:35 INFO     importer: 导入 1880 行到 portfolio_backtest.yfr
